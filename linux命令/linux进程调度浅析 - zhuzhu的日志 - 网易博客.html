
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=7" />
    <meta http-equiv="content-type" content="text/html;charset=gbk"/>
    <meta http-equiv="content-style-type" content="text/css"/>
    <meta http-equiv="content-script-type" content="text/javascript"/>
    <meta name="version" content="neblog-1.0"/>
    <script type="text/javascript">
      
      
      document.uniqueID!=document.uniqueID&&!!location.hash&&(location.hash=location.hash); 
      document.domain = location.hostname.replace(/^.*\.([\w]+\.[\w]+)$/,'$1');
      window.focus();
      window.getMusicTimeStamp=function(){return '1b1ebbf3fe44201bdc42c7572926b82b';};
    </script>
<title>linux进程调度浅析 - zhuzhu的日志 - 网易博客</title>
<meta name="author" content="zhumeng8337797,zhuzhu"/>
<meta name="keywords" content="linux进程调度浅析,日志,zhuzhu,五事九思 （大连Linux主机维护）,网易博客,网易,blog"/>
<meta name="description" content="linux进程调度浅析,zhuzhu的网易博客,大连linux维护qq群：287800525,"/>
  <script type="text/javascript">
    (function(){
     var R=24,C=11,a=[];
     for(var i=0;i<C;i++)for(var j=0;j<R;a.push('.icn0-'+i+j+'{background-position:'+(i>0?('-'+i*40+'px'):'0')+' '+(j>0?('-'+j*20+'px'):'0')+';}'),j++);
          document.write('<style type="text/css">'+a.join('')+'</st'+'yle>');
    })();
  </script>
    <link type="text/css" rel="stylesheet" href="http://b2.bst.126.net/newpage/r/c/c.css?v=1404703241875"/>
    <link type="text/css" rel="stylesheet" href="http://b.bst.126.net/newpage/style/nblog/4191/nb.css" id="blog-163-com-theme"/>
  <!--[if lte IE 6]>
  <style type="text/css">
    html,body,#blog-163-com-ie6body{height:100%;width:100%;overflow:hidden;}
    #blog-163-com-ie6body{overflow:auto;overflow-y:scroll;}
    #blog-163-com{background:none;}
  </style>
  <![endif]-->
  
  
  <style type="text/css">.m-3 .nbw-ryt .left .mcnt{padding-left:10px;}.m-3 .nbw-ryt .right .acts{position:relative;margin:0 0 12px 0;line-height:20px;}.m-3 .nbw-ryt .right .more{margin-top:-15px;height:24px;line-height:24px;}#blog-163-com .m-3 .phide{display:none;}.m-3 .nbw-ryt .left .nbw-bitm{margin:0;padding:0 10px 0 10px;position:relative;}.m-3 .nbw-ryt .left .nbw-bitm .title{margin:30px 0 20px;line-height:32px;}.m-3 .nbw-ryt .left .nbw-bitm .title .tcnt{font-size:26px;font-weight:bold;font-family:"Hiragino Sans GB W3","Hiragino Sans GB","Microsoft YaHei","\5FAE\8F6F\96C5\9ED1",Arial,Helvetica,simsun,"\5B8B\4F53";}.m-3 .nbw-ryt .left .nbw-bitm .tdep{margin-bottom:20px;}.m-3 .nbw-ryt .left .nbw-bitm .tbar{margin:5px 0;padding:10px 0 10px 0;line-height:20px;text-align:right;}.m-3 .nbw-ryt .left .nbw-bitm .bct{font-size:16px;padding-left:0}.m-3 .nbw-ryt .left .nbw-bitm .muava{float:left;margin:5px 7px 0 0;border-width:0 1px 0 0;height:40px;}.m-3 .nbw-ryt .left .snl .pnb div{line-height:20px;text-align:left;}.m-3 .nbw-ryt .cite{margin:20px 0 0 50px;line-height:24px;text-align:left;}.m-3 .nbw-ryt .cite .close{float:right;margin:0;text-align:right;}.m-3 .nbw-ryt .cite span{cursor:pointer;}.m-3 .nbw-ryt .cite .nbw-act{text-align:center;}.m-3 .nbw-ryt .cite .ads{margin-left:20px;width:400px;}.m-3 .nbw-ryt .cite .tbac{margin-left:60px;padding:0;border:0;list-style:none;line-height:24px;}.m-3 .nbw-ryt .cite .tbl{width:150px;overflow:hidden;}.m-3 .nbw-ryt .cite .tbr{margin-left:20px;overflow:hidden;}.m-3 .nbw-act-share{position:relative;}.m-3 .nbw-act-share .nas-wrap{visibility:hidden;}.m-3 .nbw-act-share:hover .nas-wrap,.m-3 .js-share-hover .nas-wrap{visibility:visible;}.m-3 .nas-wrap,.nas-itm,.nas-wb{background:url(/newpage/images/blog/icn-share.png?0011) no-repeat 9999px 9999px;}.m-3 .nas-wrap{margin-top:5px;}.nas-itm,.nas-wb{text-decoration:none;}.nas-itm,.nas-wb:hover{text-decoration:underline;}.m-3 .nas-itm{float:left;width:16px;height:16px;margin:0 1px 0 6px;overflow:hidden;cursor:pointer;}.m-3 .nas-itm0{background-position:0 -173px;}.m-3 .nas-itm1{background-position:0 -56px;}.m-3 .nas-itm2{background-position:0 -85px;}.m-3 .nas-itm3{background-position:0 -227px;}.m-3 .nas-itm4{background-position:0 -143px;}.m-3 .nas-itm5{background-position:0 -201px;}.m-3 .nas-itm6{background-position:0 -249px;}.m-3 .nas-itm7{background-position:0 -283px;}.m-3 .nas-itm8{background-position:0 -313px;}.m-3 .nas-itm9{background-position:0 -342px;}.nas-wb{padding-left:20px;cursor:pointer;line-height:normal;background-position:0 -173px;}.nas-icn0fix{margin-top:4px;}.nas-tofix{margin-top:0;*margin-top:2px;line-height:25px;}.m-3 .ptc{position:absolute;cursor:pointer;}.m-3 .ptc .ptcp .bcmimg{float:left;background-image:url("http://b.bst.126.net/newpage/images/blogcmtimg.png");background-position:0 0;background-repeat:no-repeat;height:22px;line-height:22px;width:22px;padding:0 6px 0 0;}.m-3 .ptc .ptcp{cursor:pointer;position:absolute;left:5px;bottom:5px;clear:both;width:94px;}.m-3 .ptc .ptcp .ptcmi{float:left;width:16px;height:16px;padding:3px 6px 3px 5px;_padding:2px 6px 0 3px;margin:0;}.m-3 .ptc .ptcp .ptcmt{background-position:-418px -50px;float:left;width:67px;height:22px;overflow:hidden;margin:0px 0 0 -3px;line-height:22px;*line-height:23px;text-align:left;color:#444444;}.m-3 .ptc .ptcp .ptcmt-2{width:61px;padding-left:6px;background-position:-424px -50px;}.m-3 .relateblog{text-align:left;}.m-3 .relateblog h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .relateblog .cnt{padding-left:8px;margin:10px 0 10px 0px;}.m-3 .relateblog .cnt ul{margin:0;padding:0;list-style:none;}.m-3 .relateblog .cnt ul li{height:24px;margin-right:20px;line-height:24px;}.m-3 .relateblog .cnt ul li span{margin:0 8px;}.m-3 .author, .m-3 .comment{text-align:left;}.m-3 .author .nlogif{width:150px;line-height:20px;margin-left:5px;_margin-left:3px;}.m-3 .author .nlogif .nbw-fce{margin:0 3px 0 10px;_margin-left:5px}.m-3 .author .nlogif .pright{width:85px;margin:0;padding:5px 0;_padding-top:10px}.m-3 .nbw-ryt .right h4{margin:0;padding:0;line-height:30px;}.m-3 .author h4, .m-3 .comment h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .author .cwd{border:0;text-align:left;}.m-3 .author .vname{width:50px;text-align:center;}.m-3 .author .cnt{margin:10px 0 10px -5px;}.m-3 .author .nbw-fce{margin:0 11px;}.m-3 .author .nbw-f50{width:50px}.m-3 .nbw-ryt .left .top{position:relative;padding-bottom:5px;line-height:20px;}.m-3 .nbw-ryt .left .top .ilft{position:absolute;left:0;top:0;}.m-3 .nbw-ryt .left .top .irgt{position:absolute;right:-10px;top:0;}.m-3 .nbw-ryt .left .top .pleft{margin-left:20px;_margin-left:10px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .top .pright{margin-right:10px;_margin-right:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .top{position:relative;padding:5px 0 15px 0;line-height:20px;}.m-3 .nbw-ryt .left .snl .top .ilft{position:absolute;left:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .irgt{position:absolute;right:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .pleft{margin-left:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .snl .top .pright{margin-right:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .pnb{padding:5px 0 10px 10px;overflow:hidden;_width:100%}.m-3 .comment h4{padding:0 0 0 10px}.m-3 .comment .publish{margin:10px 0;padding:0 0 10px 5px;text-align:left;}.m-3 .comment .publish .nbw-fce{padding-top:0;}.m-3 .comment .publish .nbw-fce .cwd{border:0;}.m-3 .comment .publish .redt{margin-left:65px;}.m-3 .comment .nolog{border:1px solid #000;background-color:#FFFFE1;height:40px;line-height:40px;text-align:center;padding:0;_padding:10px 0;_height:20px;}.m-3 .comment .case{padding-left:5px;padding-bottom:10px;}.m-3 .comment .vgl{margin:8px;width:75%;text-align:center;}#blog-163-com .m-3 .comment .nbw-cmt .cnt{width:488px;}#blog-163-com .m-3 .comment .nbw-cmt .nbw-cmt .cnt{width:444px;}.m-3 .edt-cmt{width:444px;}.m-3 .comment .publish .edt-cmt{width:488px;}.m-3 .comment .publish .edt-cmt .zbcc{display:none;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs0{font-size:150%;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs1, .m-3 .nbw-ryt .left .nbw-bitm .js-fs1 *{font-size:20px;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs2{}.m-3 .nbw-ryt .left .nbw-bitm .js-fs3, .m-3 .nbw-ryt .left .nbw-bitm .js-fs3 *{font-size:12px;}.m-3 .js-fcurrent{font-color:#000;font-weight:bold;text-decoration:none;}.m-3 .nbw-bitm .dream{margin-top:-10px;clear:both}.m-3 .nbw-bitm .cited{margin-top:-15px;}.m-3 .nbw-bitm .rdif{line-height:24px;height:24px;}.m-3 .nbw-bitm .rdif .pnt{line-height:24px;height:24px;margin-right:10px;}.m-3 .nbw-bitm .rdif .pclass{vertical-align:middle;width:57px;height:22px;}.m-3 .nbw-bitm .rdif .rdct{display:inline-block;}.m-3 .snl .rdcnt{padding:5px;text-align:left}.m-3 .snl .rdcnt .nbw-fce{margin:0 5px}.m-3 .snl .rdcnt p{margin:10px 0}.m-3 .snl .rdcnt .rrb{list-style:none;height:22px;line-height:22px;}.m-3 .acts .iblock{width:18px;}.m-3 .ns{margin:0 0 0 2px;}.m-3 .cancel{display:none;}.m-3 .js-hover .cancel, .m-3 .follow:hover .cancel, .m-3 .frd:hover .cancel{display:inline;}.m-3 .follow{*margin-left:2px;}.m-3 .flw{padding:7px 8px;color:#000;background:#fefce4;border:1px solid #b7b7b7;}.m-3 .acts .flw .iblock{width:20px;}.m-3 .sntesctf{width:15px;margin-left:3px;}.dr-warm{width:420px;padding:12px 18px;margin:18px 0;line-height:20px;border:1px solid #aaa;color:#666;background:#ffffdc;}.dr-warm a,.dr-warm a:hover{text-decoration:underline;color:#02a;}.dr-warm .codeinput{width:70px;text-align:center;}.dr-warm .codediv{margin:10px 0 0;}.dr-warm .ml{margin:0px 10px;vertical-align:middle;}.dr-warm .button{background-color:#77716F;width:42px;height:20px;border:0 none;color:#fff;cursor:pointer;}.m-3 .commentcntwrap{position:relative;zoom:1;}.m-3 .cmtMultiUserRole{position:absolute;left:62px;bottom:5px;width:300px;overflow-x;hidden;}.m-3 .cmtMultiUserRole .selectRole{float:right;padding:1px 1px 0 1px;border:none;}.m-3 .cmtMultiUserRole .selectRole .ztxt{float:left;width:auto;overflow:hidden;}.m-3 .cmtMultiUserRole .selectRole .zdwn{float:left;background:url("/newpage/images/icon.png") -240px -420px no-repeat;text-indent:-9999px;}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm{}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm:hover, .m-3 .cmtMultiUserRole .selectRole .slst .item.js-zhvr-910{color:#333;background-color:#ececec;}.m-3 .nbw-cmt{position:static;}.m-3 .nbw-cmt .thde{position:relative;zoom:1;}.m-3 .publish .redt{position:relative;zoom:1;}.m-3 .publish .redt .cmtMultiUserRole{left:135px;_left:132px;}.m-3 .cmtMultiUserRole .js-showlist{padding:0;margin:0;border-style:solid;border-width:1px 1px 0 1px;border-color:#aaa;}.m-3 .cmtMultiUserRole .js-showlist .zlst{border-style:solid;border-width:0 1px 1px 1px;border-color:#aaa;}.m-3 .multiuserItem{}.m-3 .multiuserItem .author{margin-right:-50px;}.m-3 .multiuserItem .multicntwrap{padding:30px 0 20px 0;}.m-3 .multiuserItem .multicnt{_padding-top:2px;margin-left:50px;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .title{width:95%;margin-top:0;margin-bottom:0;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .tdep{margin-bottom:0;}.m-3 .attachment{margin-bottom:20px;}.m-3 .awidth{width:40px;}.m-3 .view{margin-right:10px;}.m-3 .nbw-cmt .op{height:18px;line-height:18px;}.m-3 .suggestedreading{overflow:hidden;position:relative;zoom:1;}.m-3 .suggestedreading .m-list{margin-left:0;padding-left:15px;overflow:hidden;font-size:14px;}.m-3 .suggestedreading .m-list .gap{margin-left:8px;color:#ADADAD;}.m-3 .suggestedreading .m-list li{height:20px;padding:3px 0 2px;vertical-align:middle;}.m-3 .suggestedreading .wrap li{float:left;width:118px;height:146px;}.m-3 .suggestedreading .suggesteditem1{line-height:24px;margin:5px 0;font-size:12px;margin-right:10px;}.m-3 .suggestedreading .suggesteditem2{margin:5px 0;font-size:12px;}.m-3 .suggestedreading .suggesteditem2 .imgwrap1{position:relative;overflow:hidden;width:90px;height:90px;zoom:1;}.m-3 .suggestedreading .suggesteditem2 .imgwrap2{z-index:2;position:absolute;left:0;top:0;}.m-3 .suggestedreading .suggesteditem2 .btitle{width:96px;height:148px;overflow:hidden;text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 .sep{padding:5px 10px 0 10px;}.m-3 .suggestedreading .suggesteditem2 a{cursor:pointer;}.m-3 .suggestedreading .suggesteditem2 a:hover{text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 img{border-width:0;}.m-3 .suggestedreading .color1{background-color:#B3786B;}.m-3 .suggestedreading .color2{background-color:#D2C1A8;}.m-3 .suggestedreading .color3{background-color:#D46646;}.m-3 .suggestedreading .color4{background-color:#D28FA8;}.m-3 .suggestedreading .color5{background-color:#C84F54;}.m-3 .suggestedreading .white{color:white;}.m-3 .suggestedreading .imgtip{margin:2px;font-weight:bold;color:white;font-size:13px;}.m-3 .suggestedreading .borderwrap{padding:2px;background-color:#fff;}.m-3 .suggestedreading .time{position:absolute;bottom:0;right:0;}.m-3 .suggestedreading .hidsep{margin-left:-1px;}.m-3 .suggestedreading .srtitle{font-size:14px;font-weight:bold;margin-bottom:10px;}.m-3 #yodaoad{padding-left:5px;}.m-3 #yodaoad_3{padding:20px 0 25px 0;}.m-3 .relategroup{width:45%}.m-3 .blogvote{padding-left:35px;position:relative;zoom:1;}.m-3 .blogvote .sep{margin:0 5px;}.m-3 .blogvote .vtitle{margin:15px 0 15px -30px;}.m-3 .blogvote .vtitle span{padding-right:8px;}.m-3 .blogvote .vtitle .close{width:60px;height:24px;vertical-align:middle;}.m-3 .blogvote .roleview{padding-right:10px}.m-3 .blogvote .roleview .iblock{width:10px}.m-3 .blogvote .options{clear:both;margin-right:10px}.m-3 .blogvote .options ul{margin:0;padding:0;list-style:none;}.m-3 .blogvote .options ul li{padding:10px 0;line-height:16px;}.m-3 .blogvote .options .role{margin-bottom:15px;}.m-3 .blogvote .options .acts{margin-bottom:15px;height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt{height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt button{height:24px;line-height:18px;}.m-3 .blogvote .options .acts .leftpt span{}.m-3 .blogvote .options .acts .view{margin-left:5px;}.m-3 .blogvote .fvote{padding-top:10px;}.m-3 .blogvote .fvote ul{list-style:none;margin:10px 0;padding:0;}.m-3 .blogvote .fvote ul li{line-height:20px;margin:5px 0;}.m-3 .blogvote .options ul .col0{width:230px;margin-right:10px;margin-top:-3px;_margin-top:-5px;line-height:20px}.m-3 .blogvote .options ul .col0 input{_position:relative;_top:3px}.m-3 .blogvote .options ul .col0 label{width:200px;_position:relative;_top:4px}.m-3 .blogvote .options ul .col1{width:190px;height:14px;line-height:14px;;background:none repeat scroll 0 0 #EAEAEA;}.m-3 .blogvote .options ul .col1 .iblock{width:100%;height:16px;vertical-align:middle;}.qing001{margin:0;border:none;}.qing001 .nb-mc{background:none;}.qing001 .nb-mc .cc{width:942px;padding:0;margin:0 auto;}.qing001 .nb-mc .cl{display:none;}.qing001 .nb-mc .cr{display:none;}.qing001 .bh{display:none;}.qing001 .nbw-ryt{background:url(/newpage/images/qingtheme/qing001/blogdetail_cntbg.png) 0 0 repeat-y;}.qing001 .nbw-ryt .left{background:url(/newpage/images/qingtheme/qing001/blogdetail_ftbg.png) bottom left no-repeat;}.qing001 .nbw-ryt .left .lcnt{width:100%;padding:0;margin:0;background:url(/newpage/images/qingtheme/qing001/blogdetail_ttlbg.png) 0 0 no-repeat;}.qing001 .nbw-ryt .left .mcnt{padding:0 30px;}.qing001 .nbw-ryt .left .nbw-bitm{padding:0;}.qing001 .nb-mt{display:none;}.qing001 .nbw-ryt .left .top{display:none;}.qing001 .nbw-ryt .left .nbw-bitm .title{height:31px;padding:30px 0 46px 3px;margin:0;}.qing001 .nbw-ryt .left .nbw-bitm .title .tcnt{color:#fffadc;font-size:24px;}.qing001 .nbw-ryt .left .nbw-bitm .tdep{padding-top:6px;}.qing001 .comment .case{padding-bottom:40px;}.m-3 .article .douban{float:left;width:200px;margin:0 10px 10px 0;font-size:12px;}.m-3 .article .douban .field{padding-top:5px;}.m-3 .article .douban .field .dbyinyue{width:10px;height:8px;border-width:0;}.m-3 .article .douban img{max-width:100%;width:100%;border-color:#e9e9e9;display:inline-block;border-width:1px;border-style:solid;}.m-3 .article-1 .douban{float:right;width:200px;margin:0 3px 10px 10px;}.m-3 .article-2 .douban{float:left;width:250px;margin:0 -250px 0 0;}.m-3 .article-2 .blog{margin-left:270px;}.m-3 .article-2 .blogc{width:99%;overflow:hidden;}.m-3 .article-3 .douban{float:right;width:250px;margin:0 3px 0 -250px;}.m-3 .article-3 .blog{margin-right:270px;}.m-3 .article-3 .blogc{width:99%;overflow:hidden;}.m-3 .vote_star{overflow:visible;}.m-3 .rateword{display:none;left:88px;width:37px;top:-2px;position:absolute;line-height:23px;}.m-3 .star_d0 .rateword0{display:inline;}.m-3 .star_d1 .rateword1{display:inline;}.m-3 .star_d2 .rateword2{display:inline;}.m-3 .star_d3 .rateword3{display:inline;}.m-3 .star_d4 .rateword4{display:inline;}.m-3 .star_d5 .rateword5{display:inline;}.m-3 .nbw-act .blogsep{margin:0 2px}.m-3 .zihao{position:relative;cursor:default;}.m-3 .zihaoshow{position:absolute;width:26px;top:-57px;left:-3px;padding:0 0 3px;line-height:18px;}.m-3 .zihaoshow span{display:block;text-align:center;cursor:pointer;}.m-3 .zihaoc{border-style:solid;border-width:1px;}.m-3 .mbga{margin-bottom:12px;position:relative;}.m-3 .mbga a{margin-left:20px;}.m-3 .mbgai{position:absolute;top:-1px;width:17px;background:url(/newpage/images/microblog.png?1) no-repeat;_background:none transparent;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='http://b2.bst.126.net/newpage/images/microblog.png');_zoom:1;}.m-3 .mingxing{width:18px;background-position:-43px -80px;}.m-3 .xinxing{width:18px;background-position:-81px -80px;}.m-3 .darendesc{padding:7px 15px;margin-top:10px;line-height:18px;background:#efeae7;vertical-align:middle;}.m-3 .js-cmt-noavatar .nbw-cmt .nbw-fce{display:none;}.m-3 .js-cmt-noavatar .nbw-cmt .thde{padding-left:8px;margin-left:0;}.m-3 .js-cmt-noavatar .nbw-cmt .reps .thde{margin-left:55px;}.m-3 .toLofter{cursor:pointer;position:absolute;bottom:5px;width:112px;height:22px;background:url(/newpage/images/publishtolofter/tolofter.png?v=20130909) 0 0 no-repeat;text-indent:-9999px;}.m-3 .nbw-ryt .left .lcnt{padding-right:20px;}.m-3 .edt-cmt{width:auto;}.m-3 .comment .publish .edt-cmt{width:auto;}#blog-163-com .m-3 .comment .nbw-cmt .cnt{width:auto;}#blog-163-com .m-3 .comment .nbw-cmt .nbw-cmt .cnt{width:auto;}.m-3 .nbw-cmt .nbw-cmt{padding:20px 5px 1px 0;}.m-3 .nbw-cmt .op{height:18px;line-height:18px;margin-bottom:18px;}.m-3 .nbw-ryt .left .nbw-bitm .title{margin:34px 0 10px;line-height:normal;}.m-3 .nbw-ryt .left .nbw-bitm .title .tcnt{line-height:38px;}.m-3 .nbw-ryt .left .nbw-bitm .tdep{margin-bottom:25px;}.m-3 .comment .publish{padding:0 5px 10px 0;margin:20px 0 0 0;}.m-3 .nbw-sdt .miniBlogArea{bottom:12px;}.m-3 .nbw-sdt .edt .zbtn{height:40px;line-height:40px;}.m-3 .nbw-sdt .edt .zbtn .zfce{top:10px;}.m-3 .nas-tofix{line-height:24px;}.m-3 .nas-wrap{margin-top:4px;}.m-3 .leftoperatebar{height:24px;line-height:24px;padding:8px 0;}.m-3 .nbw-bitm .rdif{padding:8px 0;}.m-3 .leftoperatebar .sep-last{margin-right:8px;}.m-3 .rightoperatebar{height:40px;line-height:40px;margin-left:0px;}.m-3 .reblogbtn, .m-3 .recommendbtn, .m-3 .likebtn{width:48px;height:38px;line-height:38px;padding-left:44px;margin:0 0 0 5px;font-size:14px;color:#fff;text-align:left;}.m-3 .reblogbtn{background-position:1px -431px;}.m-3 .recommendbtn{background-position:1px -271px;}.m-3 .js-recommended{background-position:1px -351px;}.m-3 .likebtn{background-position:1px -111px;}.m-3 .js-liked{background-position:1px -191px;}.m-3 .hotarea{}.m-3 .hotarea .hotItem{position:relative;zoom:1;display:block;float:left;}.m-3 .hotarea .hotItem .hottype{position:absolute;right:-5px;top:29px;width:20px;height:20px;text-decoration:none;}.m-3 .hotarea .hotItem .js-liketype{background-position:-4px -536px;}.m-3 .hotarea .hotItem .js-reblogtype{background-position:-4px -648px;}.m-3 .hotarea .hotItem .js-sharetype{background-position:-4px -592px;}.m-3 .hotarea .expandHotItem{}.m-3 .hotarea .expeadbg{width:40px;height:40px;margin:0 auto;background-position:-2px -728px;cursor:pointer;}.js-openlikewin .showhint .zcvr{background:#000;opacity:0.5;filter:alpha(opacity=50);}.f-openlikeicon{background:url(/newpage/images/liketolofter/openlike24.png) -9999px -9999px no-repeat;_background:url(/newpage/images/liketolofter/openlike8.png) -9999px -9999px no-repeat;}#blog-163-com #blog-163-com-layer div.openlikewin{border:none;}.openlikewin .nbwinwrap .ztbr, .openlikewin .nbwinwrap .zcls, .openlikewin .nbwinwrap .zext, .openlikewin .nbwinwrap .zbtnbar{display:none;}.openlikewin .nbwinwrap .zcnt{padding:0;}.openlikewin .hdarea{position:relative;zoom:1;width:500px;height:145px;padding-top:30px;background:#d6e6f1;}.openlikewin .hdarea .tticon{width:86px;height:73px;margin:0 auto;background-position:-8px -111px;}.openlikewin .hdarea .ttcnt{height:60px;line-height:60px;color:#333;font-size:25px;}.openlikewin .hdarea .close{position:absolute;right:10px;top:10px;width:21px;height:21px;background-position:-6px -720px;cursor:pointer;}.openlikewin .bdarea{padding-bottom:40px;}.openlikewin .step{padding-top:30px;}.openlikewin .step .stepicon{width:60px;height:64px;margin:0 auto;}.openlikewin .step .stepcnt{width:500px;height:32px;line-height:32px;padding-top:16px;color:#333;font-size:20px;}.openlikewin .stepone{}.openlikewin .stepone .stepicon{background-position:-6px -247px;}.openlikewin .stepone .stepcnt{}.openlikewin .steptwo{}.openlikewin .steptwo .stepicon{background-position:-6px -359px;}.openlikewin .steptwo .stepcnt{}.openlikewin .stepthree{margin-bottom:40px;}.openlikewin .stepthree .stepicon{background-position:-6px -470px;}.openlikewin .stepthree .stepcnt{margin-bottom:5px;}.openlikewin .likeaddr{width:304px;height:40px;line-height:40px;padding:6px;margin:0 auto;background-position:-1px -600px;}.openlikewin .likeaddr .blogname{font-family:"Hiragino Sans GB W3","Hiragino Sans GB",Arial,Helvetica,simsun,u5b8bu4f53;}.openlikewin .likeaddr .blogname{text-align:right;float:left;width:150px;height:40px;line-height:40px;padding:0;margin:0;color:#666;font-size:20px;border:none;outline:none;background:none;}.openlikewin .likeaddr .urlsuffix{text-align:left;float:left;width:120px;height:40px;line-height:40px;color:#666;font-size:20px;}.openlikewin .openmylike{width:316px;height:54px;margin:0 auto;background-position:1px 1px;cursor:pointer;}.outlinklayer{position:absolute;width:398px;background:#fff;border:1px solid #cdcdcd;text-align:left;}.outlinklayer .hdarea{height:25px;}.outlinklayer .hdarea .close{position:absolute;right:0;top:0;width:30px;height:30px;background:url(/newpage/images/outlink/close.png) 10px 8px no-repeat;cursor:pointer;}.outlinklayer .bdarea{height:108px;padding:0 0 25px 30px;}.outlinklayer .bdarea .ttl{height:26px;line-height:26px;color:#333;font-size:16px;font-weight:bold;}.outlinklayer .bdarea .url{width:340px;height:22px;line-height:22px;color:#666;font-size:14px;font-weight:bold;}.outlinklayer .bdarea .prompt{height:22px;line-height:22px;padding-top:12px;color:#999;font-size:14px;}.outlinklayer .bdarea .goon{height:26px;line-height:26px;color:#536c86;font-size:16px;text-decoration:underline;}.outlinklayer .adarea{padding:10px;border-top:1px solid #e6e6e6;}.outlinklayer .adarea .adlink{}.outlinklayer .adarea .adpic{display:block;width:378px;height:50px;border:none;}.blogPublicAccount{width:95px;height:340px;padding:25px 10px 25px 25px;background:#fff;}.blogPublicAccount h3{height:26px;line-height:26px;padding:1px 0 0 0;margin:0;font-weight:normal;font-size:18px;color:#444;background:url(/newpage/images/publicaccount/sinav.png) 72px 8px no-repeat;}.blogPublicAccount h3{_background-position:72px 6px;}.blogPublicAccount .wbttl, .blogPublicAccount .yxttl, .blogPublicAccount .wxttl{height:18px;line-height:18px;padding:0;margin:0;font-weight:normal;font-size:12px;color:#444;}.blogPublicAccount .wbttl{margin-bottom:7px;color:#999;}.blogPublicAccount .yxttl{margin-bottom:4px;}.blogPublicAccount .wxttl{margin-bottom:4px;}.blogPublicAccount .wbiframe{height:24px;margin-bottom:27px;}.blogPublicAccount .yx2d{width:80px;height:80px;margin-bottom:27px;background:url(/newpage/images/publicaccount/yx2d.png) 0 0 no-repeat;}.blogPublicAccount .wx2d{width:80px;height:80px;background:url(/newpage/images/publicaccount/wx2d.jpg) 0 0 no-repeat;} </style>
  
  <link href="/newpage/prettycode/prettify.css" type="text/css" rel="stylesheet" />
  </head>
<body onload="prettyPrint()" id="blog-163-com" class="nb-body nb-inr nb-prv">
  <!--[if lte IE 6]><div id="blog-163-com-ie6bodywrap" class=""><![endif]-->
    <!--[if lte IE 6]><div id="blog-163-com-ie6body" class="nb-body"><![endif]-->

<div class="nb-nbar clearfix" id="blog-163-com-topbar">
  <div class="pl fl clearfix">
  <div id="" class="nbw-im fl im im0">
    <a  rel="nofollow"  class="lbl bd ia noul " href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://www.163.com/" target="_blank" hidefocus="true"><span class="tx">网易</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://news.163.com/" >
            新闻
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://t.163.com/" >
            微博
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://email.163.com/" >
            邮箱
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://photo.163.com/" >
            相册
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://yuedu.163.com/" >
            阅读
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://www.youdao.com/" >
            有道
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://photo.163.com/pp/square/" >
            摄影
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://aipai.163.com?from=163blog" >
            爱拍
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://quan.163.com/?from=blogdh" >
            优惠券
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://note.youdao.com/?vendor=163blog" >
            云笔记
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://fm.163.com/?fmblogzx0628" >
            闪电邮
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://m.123.163.com/?frombkcp" >
            手机邮
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://yxp.163.com/" >
            印像派
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://61.163.com/?from=blogxiala" >
            网易识字
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://sitemap.163.com/" >
            更多
          </a>
        
    </div>
  </div>

    <span style="display:none;margin-left:0;" class="fl iblock space icn1 icn1-4">&nbsp;</span>

  <div id="" class="nbw-im fl im im10">
    <a  class="lbl bd ia noul " href="http://blog.163.com/?frompersonalbloghome" target="_blank" hidefocus="true"><span class="tx">博客</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome" >
            手机博客
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/clone/clone.html?frompersonalbloghome" >
            博客搬家
          </a>
          <a   target="_blank"  class="itm noul youcai " hidefocus="true" href="http://blog.163.com/vip.do?frompersonalbloghome" >
            博客VIP服务
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201082863728829/?frompersonalbloghome" >
            LiveWriter写博
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201092713253500/?frompersonalbloghome" >
            word写博
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/services/mailblog.html?frompersonalbloghome" >
            邮件写博
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/services/emsblog.html?frompersonalbloghome" >
            短信写博
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/showMultiUser.do?frompersonalbloghome" >
            群博客
          </a>
          <a   target="_blank"  class="itm noul youcai " hidefocus="true" href="http://blog.163.com/BLOG_YOUCAI/" >
            博客油菜地
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/ht/?frompersonalbloghome" >
            博客话题
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/hot/history/?frompersonalbloghome" >
            博客热点
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://q.163.com/#home?frompersonalbloghome" >
            博客圈子
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/findFriend.do?type=5?frompersonalbloghome" >
            找朋友
          </a>
        
    </div>
  </div>


    <div class="nbw-im fl im1 im explore"><a class="lbl bd ima spy" href="http://blog.163.com/public/explore/?frompersonalbloghome">发现</a></div>
    <div class="nbw-im fl im1 im bloggroup"><a class="lbl bd ima spy" href="http://blog.163.com/g/?frompersonalbloghome">小组</a></div>
    <div class="nbw-im fl im1 im customtheme"><a class="lbl bd ima spy" href="http://blog.163.com/public/theme/?frompersonalbloghome">风格</a></div>
    <div class="nbw-im fl im1 im mobileblog"><a class="lbl bd ima spy" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome">手机博客</a></div>
    <div class="nbw-im fl im1 im seebyway"><a rel="nofollow" title="随便看看" class="lbl bd ima spy" href="http://blog.163.com/randomUser.do"><span>&nbsp;</span></a></div>

    <span style="display:none;" class="fl iblock space icn1 icn1-4">&nbsp;</span>
    <div id="topbar_randShowArea" class="fl">
      <div class="nbw-im fl im1 im randtag phide"><a target="_blank" class="bd ima moveblog randshow" href="http://www.lofter.com/?act=qbbokedingbuhuang_20140702_01">免费20张照片冲印券，等你来拿！></a></div>
<div class="nbw-im fl im1 im randtag phide"><a target="_blank" class="bd ima moveblog randshow" href="http://www.lofter.com/art?act=qbart_20140703_09">独一无二的艺术商品，只在ART</a></div>
    </div>
  </div>
  <div class="fr pr clearfix">
    <div id="topbar_loginAndReg" class="fr">
      <a rel="nofollow" style="margin-left:10px;color:#ff7700;" class="iblock fr ima" href="http://reg.163.com/reg/reg.jsp?product=blog&url=http://blog.163.com/ntesRegBlank.html&loginurl=http://blog.163.com/" target="_blank">创建博客</a>
      <a rel="nofollow" class="iblock fr ima ztag" href="#">登录</a>
      <span class="fr iblock space icn1 icn1-4 spx">&nbsp;</span>
      <div id="topbar_followArea" class="nbw-im fr"><span class="lbl bd ima followit fl ztag"><span class="fl addicon">&nbsp;</span><span class="fl">加关注</span></span></div>
    </div>
  </div>
</div>
<script type="text/javascript">
  (function(){
      var e = document.getElementById('blog-163-com-main');
      if(!!e) e.parentNode.insertBefore(document.getElementById('blog-163-com-topbar'),e);
      e = document.getElementById('blog-notice-email');
      if(!!e) window.setTimeout(function(){e.style.display='';},50);
  })()
</script>
<div class="blogtoptips phide" id="blog-163-com-toptips">
 <div class="blogtoptipswrap">
    <div id="newbulletinstip" class="newbulletinstip phide">
    <a class="lnknews fc03 m2a tiptag phide" href="" target="_blank"></a><span class="txtnews tiptag phide"></span>&nbsp;&nbsp;&nbsp;<a class="fc03 ul nextorprevnews tiptag phide" href="" hidefocus="true">显示下一条</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="fc03 ul close tiptag" href="" hidefocus="true">关闭</a>
  </div>
 </div>
 	<div id="sinaoauthtip" class="sinaoauthtip phide">
    	<span style="">温馨提示！由于新浪微博认证机制调整，您的新浪微博帐号绑定已过期，请重新绑定！</span><a rel="nofollow" class="fc03 noul iblock" href="http://zhumeng8337797.blog.163.com/settings/?fromnewcenter#m=6">立即重新绑定新浪微博》</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="fc03 iblock close" href="">关闭</a>
  	</div>
    <div id="$_faxiantip" class="faxiantip phide">
      <div>
	    <a class="m2a iblock" href="http://blog.163.com/public/explore/?fromblogbanner" target="_blank"></a>
	    <span class="faxiantag m2a"></span>
      </div>
    </div>
    <div id="$_guanggaotip" class="guanggaotip phide">
      <div>
	    
	    <span class="guanggaotag m2a"></span>
      </div>
    </div>
    <div id="$_lofterInviteTip" class="lofterInviteTip phide">
      <div>
	    <a class="m2a iblock" href="http://www.lofter.com/invite/163blog/?email=" target="_blank"></a>
	    <span class="lofterInviteTag m2a"></span>
      </div>
    </div>
</div>  <div class="nb-wrap wsy" id="blog-163-com-main"><div class="nb-are nb-top">
  <div class="wkg h" id="blog-163-com-banner">
    
    <div class="t">
      <h1 class="n c"><span class="ztag pre">五事九思 （大连Linux主机维护）</span></h1>
      <p class="d c"><span class="ztag pre">大连linux维护qq群：287800525</span></p>
    </div>
    <div class="f h ztag"></div>
    <a class="x" hidefocus="true" target="_blank" href="#"><span class="xx ztag"></span></a>
  </div>
</div><div class="nb-are nb-nav">
  <div class="wkg">
    <div class="c h">
      <h2>导航</h2>
      <ul class="noul clearfix">
                
	        <li class="w w0">
	          <a class="i i0 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/">首页</a>
	        </li>
	        <li class="w w1 selected">
	          <a class="i i1 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/blog/">日志</a>
	        </li>
	        <li class="w w2">
	          <a class="i i2 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/album/">相册</a>
	        </li>
	        <li class="w w3">
	          <a class="i i3 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/music/">音乐</a>
	        </li>
	        <li class="w w4">
	          <a class="i i4 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/collection/">收藏</a>
	        </li>
	        <li class="w w5">
	          <a class="i i5 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/friends/">博友</a>
	        </li>
	        <li class="w w6">
	          <a class="i i6 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/profile/">关于我</a>
	        </li>
      </ul><!--
 --></div>
    <div class="l h">&nbsp;</div>
    <div class="r h">&nbsp;</div>
  </div>
</div>  <div class="nb-are nb-smt"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
  <div class="nb-are nb-cnt">
    <div class="wkg">
      <div class="c wc h clearfix " id="blog-163-com-container">
  <div class="nb-mdl lcr m-3 " id="-3">
  <div class="nb-mt lcr th fc02">
    <div class="c tc th lcr"><h2 class="thide nb-jsc mdl_t_t">日志</h2></div>
    <div class="r tm th nb-jsc"></div>
    <div class="l tl th">&nbsp;</div>
    <div class="r tr th">&nbsp;</div>
  </div>
    <div class="nb-mc lcr">
      <div class="c cc lcr nb-jsc"><script>
function g_onSuggestedReadingImgLoad(_img){
    var image = new Image();
    image.src = _img.src;
    var _width = 90;
    var _height = 90;
    if(image.width > image.height){
    	_img.style.marginLeft = -Math.floor((image.width*(_height/image.height)-_width)/2)+'px';
    	_img.style.height = _height+'px';
    }else {
    	_img.style.width = _width+'px';
    	_img.style.marginTop = -Math.floor((image.height*(_width/image.width)-_height)/2)+'px';
    }
    _img.style.display = 'block';
}
</script>
<div class="nbw-ryt ztag clearfix js-auto-098">
  <div class="right bdwl bds0 bdc0"><div class="cnt ztag"></div></div>
  <div class="left">
     <div class="lcnt bdwr bds0 bdc0 ">
      <div id="$_newOldBlogLinkTopDiv" class='top fc03 bdwb bdc0 bds2 clearfix'>
     </div>
     <div class="mcnt ztag">
      <div class="nbw-bitm bdwb bds2 bdc0 ">
        <div class="multicntwrap">
	      <div class="multicnt">
	      	<div>
		      <h3 class="title pre fs1"><span class="tcnt">linux进程调度浅析</span>&nbsp;&nbsp;<span class="bgc0 fc07 fw0 fs0"></span></h3>
		      <p class="tdep clearfix nbw-act fc06" style="line-height:20px;">
		        <span class="pleft">
		          
		          <span class="blogsep">2011-06-20 19:30:33</span><span class="blogsep">|&nbsp;&nbsp;分类：</span>
		          <a class="fc03 m2a" href="http://zhumeng8337797.blog.163.com/blog/#m=0&t=1&c=fks_084067084086089075081081085095085086081068082094095066080" title="linux优化">linux优化</a>
		          <span class="blogsep phide" id="$_blogTagTitle">|&nbsp;&nbsp;标签：</span><span class="fc03 phide" id="$_blogTagInfo"></span>
		        </span>
		        <span class="pright fc07 ztag"><span class="blogsep">|</span><span id="$_spanReport" class="fc03 m2a">举报</span></span>
		        <span class="pright fc07 ztag"><span class="blogsep">|</span><span class="zihao fc03" id="$_fontswitch">字号<span class="zihaoshow  phide" id="$_fontsTypes"><span class="zihaoc bdc0"><span class="stag"></span><span class="fc04 stag">大</span><span  class="fc04 stag" >中</span><span  class="fc04 stag">小</span></span></span></span></span><span class="pright pnt fc03" id="$_blog_subscribe"><span class="iblock icn0 icn0-919">&nbsp;</span><a class="m2a">订阅</a></span>
		      </p>
		    </div>
	      </div>
        </div>

        <div>
        
        </div>

        <div class="nbw-blog-start"></div>
        <div class="bct fc05 fc11 nbw-blog ztag">  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; TEXT-INDENT: 21pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >操作系统要实现多进程，进程调度必不可少。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >有人说，进程调度是操作系统中最为重要的一个部分。我觉得这种说法说得太绝对了一点，就像很多人动辄就说<SPAN style="FONT-FAMILY: Arial;"  >"</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >某某函数比某某函数效率高</SPAN><SPAN style="FONT-FAMILY: Arial;"  >XX</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >倍</SPAN><SPAN style="FONT-FAMILY: Arial;"  >"</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >一样，脱离了实际环境，这些结论是比较片面的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ></SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >而进程调度究竟有多重要呢？&nbsp;首先，我们需要明确一点：</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >进程调度是对<SPAN style="FONT-FAMILY: Arial;"  >TASK_RUNNING</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >状态的进程进行调度</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >（参见《</SPAN><SPAN><A rel="nofollow" href="http://hi.baidu.com/_kouu/blog/item/e437d9d92790493f33fa1c9c.html"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >linux<SPAN style="FONT-FAMILY: 宋体;"  >进程状态浅析</SPAN></SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >》）。如果进程不可执行（正在睡眠或其他），那么它跟进程调度没多大关系。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >所以，如果你的系统负载非常低，盼星星盼月亮才出现一个可执行状态的进程。那么进程调度也就不会太重要。哪个进程可执行，就让它执行去，没有什么需要多考虑的。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >反之，如果系统负载非常高，时时刻刻都有<SPAN style="FONT-FAMILY: Arial;"  >N</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >多个进程处于可执行状态，等待被调度运行。那么进程调度程序为了协调这</SPAN><SPAN style="FONT-FAMILY: Arial;"  >N</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >个进程的执行，必定得做很多工作。协调得不好，系统的性能就会大打折扣。这个时候，进程调度就是非常重要的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >尽管我们平常接触的很多计算机（如桌面系统、网络服务器、等）负载都比较低，但是<SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >作为一个通用操作系统，不能假设系统负载低，必须为应付高负载下的进程调度做精心的设计。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >当然，这些设计对于低负载（且没有什么实时性要求）的环境，没多大用。极端情况下，如果<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的负载始终保持</SPAN><SPAN style="FONT-FAMILY: Arial;"  >0</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >或</SPAN><SPAN style="FONT-FAMILY: Arial;"  >1</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >（永远都只有一个进程或没有进程需要在</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >上运行），那么这些设计基本上都是徒劳的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ></SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 14pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >优先级</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >现在的操作系统为了协调多个进程的<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >同时</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >运行，最基本的手段就是给进程定义优先级。定义了进程的优先级，如果有多个进程同时处于可执行状态，那么谁优先级高谁就去执行，没有什么好纠结的了。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >那么，进程的优先级该如何确定呢？有两种方式：</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >由用户程序指定</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >、</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >由内核的调度程序动态调整</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。（下面会说到）</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >linux<SPAN style="FONT-FAMILY: 宋体;"  >内核将进程分成两个级别：</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >普通进程和实时进程</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。实时进程的优先级都高于普通进程，除此之外，它们的调度策略也有所不同。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >实时进程的调度</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >实时，原本的涵义是<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >给定的操作一定要在确定的时间内完成</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >。重点并不在于操作一定要处理得多快，而是时间要可控（在最坏情况下也不能突破给定的时间）。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >这样的<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >实时</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >称为</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >硬实时</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >”<SPAN style="FONT-FAMILY: 宋体;"  >，多用于很精密的系统之中（比如什么火箭、导弹之类的）。一般来说，硬实时的系统是相对比较专用的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >像<SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这样的通用操作系统显然没法满足这样的要求，中断处理、虚拟内存等机制的存在给处理时间带来了很大的不确定性。硬件的</SPAN><SPAN style="FONT-FAMILY: Arial;"  >cache</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >、磁盘寻道、总线争用、也会带来不确定性。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  >比如考虑<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: Arial;"  >i++;</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这么一句</SPAN><SPAN style="FONT-FAMILY: Arial;"  >C</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >代码。绝大多数情况下，它执行得很快。但是极端情况下还是有这样的可能：</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  >1<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN><SPAN style="FONT-FAMILY: Arial;"  >i</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的内存空间未分配，</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >触发缺页异常。而</SPAN><SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >在缺页异常的处理代码中试图分配内存时，又可能由于系统内存紧缺而分配失败，导致进程进入睡眠；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  >2<SPAN style="FONT-FAMILY: 宋体;"  >、代码执行过程中硬件产生中断，</SPAN><SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >进入中断处理程序而搁置当前进程。而中断处理程序的处理过程中又可能发生新的硬件中断，中断永远嵌套不止</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >……</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  >等等<SPAN style="FONT-FAMILY: Times New Roman;"  >……</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #3366ff; FONT-SIZE: 10pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >而像<SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这样号称实现了</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >实时</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的通用操作系统，其实只是实现了</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >软实时</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >”<SPAN style="FONT-FAMILY: 宋体;"  >，即尽可能地满足进程的实时需求。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >如果一个进程有实时需求（它是一个实时进程），则只要它是可执行状态的，内核就一直让它执行，以尽可能地满足它对<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的需要，直到它完成所需要做的事情，然后睡眠或退出（变为非可执行状态）。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >而如果有多个实时进程都处于可执行状态，则内核会先满足优先级最高的实时进程对<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的需要，直到它变为非可执行状态。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >于是，只要高优先级的实时进程一直处于可执行状态，低优先级的实时进程就一直不能得到<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >；只要一直有实时进程处于可执行状态，普通进程就一直不能得到</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >那么，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >如果多个相同优先级的实时进程都处于可执行状态呢？</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >这时就有两种调度策略可供选择：</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >1<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >SCHED_FIFO</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >：先进先出。直到先被执行的进程变为非可执行状态，后来的进程才被调度执行。在这种策略下，先来的进程可以执行</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #660000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >sched_yield</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >系统调用，自愿放弃<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >，以让权给后来的进程；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >2<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >SCHED_RR</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >：轮转调度。内核为实时进程分配时间片，在时间片用完时，让下一个进程使用<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >强调一下，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >这两种调度策略仅仅针对于</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >相同优先级的多个实时进程</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >同时处于</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >可执行状态</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >的情况。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >在<SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >下，用户程序可以通过</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #660000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >sched_setscheduler</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >系统调用来设置进程的调度策略以及相关调度参数；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #660000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >sched_setparam</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >系统调用则只用于设置调度参数。这两个系统调用要求用户进程具有设置进程优先级的能力（<SPAN style="FONT-FAMILY: Arial;"  >CAP_SYS_NICE</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >，一般来说需要</SPAN><SPAN style="FONT-FAMILY: Arial;"  >root</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >权限）（参阅</SPAN></SPAN><SPAN><A rel="nofollow" href="http://www.baidu.com/s?bs=linux+capacity&amp;f=8&amp;wd=linux+capability+"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >capability</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >相关的文章）。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >通过将进程的策略设为</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >SCHED_FIFO</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >或</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >SCHED_RR</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >，使得进程变为实时进程。而进程的优先级则是通过以上两个系统调用在设置调度参数时指定的。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >对于实时进程，内核不会试图调整其优先级。因为进程实时与否？有多实时？这些问题都是跟用户程序的应用场景相关，只有用户能够回答，内核不能臆断。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >综上所述，实时进程的调度是非常简单的。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >进程的优先级和调度策略都由用户定死了</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >，内核只需要总是选择优先级最高的实时进程来调度执行即可。唯一稍微麻烦一点的只是在选择具有相同优先级的实时进程时，要考虑两种调度策略。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >普通进程的调度</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >实时进程调度的中心思想是，让处于可执行状态的最高优先级的实时进程尽可能地占有<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >，因为它有实时需求；而普通进程则被认为是没有实时需求的进程，</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >于是调度程序力图让各个处于可执行状态的普通进程和平共处地分享<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >，从而让用户觉得这些进程是同时运行的。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >与实时进程相比，普通进程的调度要复杂得多。内核需要考虑两件麻烦事：</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >一、</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >动态调整进程的优先级</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >按进程的行为特征，可以将进程分为<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >交互式进程</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >和</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >批处理进程</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >：</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >交互式进程</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >（如桌面程序、服务器、等）主要的任务是与外界交互。这样的进程应该具有较高的优先级，它们总是睡眠等待外界的输入。而在输入到来，内核将其唤醒时，它们又应该很快被调度执行，以做出响应。比如一个桌面程序，如果鼠标点击后半秒种还没反应，用户就会感觉系统<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >卡</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >了；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >批处理进程</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >（如编译程序）主要的任务是做持续的运算，因而它们会持续处于可执行状态。这样的进程一般不需要高优先级，比如编译程序多运行了几秒种，用户多半不会太在意；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >如果用户能够明确知道进程应该有怎样的优先级，可以通过</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #660000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >nice</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >、</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #660000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >setpriority</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >系统调用来对优先级进行设置。（如果要提高进程的优先级，要求用户进程具有<SPAN style="FONT-FAMILY: Arial;"  >CAP_SYS_NICE</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >能力。）</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >然而应用程序未必就像桌面程序、编译程序这样典型。程序的行为可能五花八门，可能一会儿像交互式进程，一会儿又像批处理进程。以致于用户难以给它设置一个合适的优先级。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >再者，即使用户明确知道一个进程是交互式还是批处理，也多半碍于权限或因为偷懒而不去设置进程的优先级。（你又是否为某个程序设置过优先级呢？）</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >于是，最终，区分交互式进程和批处理进程的重任就落到了内核的调度程序上。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >调度程序关注进程近一段时间内的表现（主要是检查其睡眠时间和运行时间）</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >，根据一些经验性的公式，判断它现在是交互式的还是批处理的？程度如何？最后决定给它的优先级做一定的调整。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >进程的优先级被动态调整后，就出现了两个优先级：</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >1<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >用户程序设置的优先级</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >（如果未设置，则使用默认值），称为</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >静态优先级。这是进程优先级的基准，在进程执行的过程中往往是不改变的</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >2<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >优先级动态调整后，实际生效的优先级</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。这个值是可能时时刻刻都在变化的；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >二、</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >调度的公平性</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >在支持多进程的系统中，理想情况下，各个进程应该是根据其优先级公平地占有<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >。而不会出现</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >谁运气好谁占得多</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这样的不可控的情况。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >linux<SPAN style="FONT-FAMILY: 宋体;"  >实现公平调度基本上是两种思路：</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >1<SPAN style="FONT-FAMILY: 宋体;"  >、给处于可执行状态的进程分配时间片（按照优先级），</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >用完时间片的进程被放到<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >过期队列</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >中。等可执行状态的进程都过期了，再重新分配时间片；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >2<SPAN style="FONT-FAMILY: 宋体;"  >、动态调整进程的优先级。随着进程在</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >上运行，其优先级被不断调低，以便其他优先级较低的进程得到运行机会；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >后一种方式有更小的调度粒度，并且将<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >公平性</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >与</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >动态调整优先级</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >两件事情合而为一，大大简化了内核调度程序的代码。因此，</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >这种方式也成为内核调度程序的新宠</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >强调一下，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >以上两点都是仅针对</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >普通进程</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >的</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。而对于实时进程，内核既不能自作多情地去动态调整优先级，也没有什么公平性可言。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >普通进程具体的调度算法非常复杂，并且随<SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >内核版本的演变也在不断更替（不仅仅是简单的调整），所以本文就不继续深入了。有兴趣的朋友可以参考下面的链接：</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN><A rel="nofollow" href="http://www.ibm.com/developerworks/cn/linux/l-cn-scheduler/"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >《<SPAN style="FONT-FAMILY: Arial;"  >Linux&nbsp;</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >调度器发展简述</SPAN></SPAN></A></SPAN><SPAN><A rel="nofollow" href="http://www.ibm.com/developerworks/cn/linux/l-cn-scheduler/"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >》</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN><A rel="nofollow" href="http://blog.chinaunix.net/u1/42957/showart.php?id=337607"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >《</SPAN></A></SPAN><SPAN><A rel="nofollow" href="http://blog.chinaunix.net/u1/42957/showart.php?id=337597"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >鼠眼看<SPAN style="FONT-FAMILY: Arial;"  >Linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >调度器</SPAN></SPAN></A></SPAN><SPAN><A rel="nofollow" href="http://www.ibm.com/developerworks/cn/linux/l-cn-scheduler/"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >》</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN><A rel="nofollow" href="http://blog.chinaunix.net/u1/42957/showart.php?id=337607"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >《</SPAN></A></SPAN><SPAN><A rel="nofollow" href="http://blog.chinaunix.net/u1/42957/showart.php?id=337604"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >鼠眼再看<SPAN style="FONT-FAMILY: Arial;"  >Linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >调度器［</SPAN><SPAN style="FONT-FAMILY: Arial;"  >1</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >］</SPAN></SPAN></A></SPAN><SPAN><A rel="nofollow" href="http://www.ibm.com/developerworks/cn/linux/l-cn-scheduler/"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >》</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN><A rel="nofollow" href="http://blog.chinaunix.net/u1/42957/showart.php?id=337607"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >《鼠眼再看<SPAN style="FONT-FAMILY: Arial;"  >Linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >调度器［</SPAN><SPAN style="FONT-FAMILY: Arial;"  >2</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >］</SPAN></SPAN></A></SPAN><SPAN><A rel="nofollow" href="http://www.ibm.com/developerworks/cn/linux/l-cn-scheduler/"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >》</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 14pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >调度程序的效率</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >“<SPAN style="FONT-FAMILY: 宋体;"  >优先级</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >明确了哪个进程应该被调度执行，而调度程序还必须要关心效率问题。调度程序跟内核中的很多过程一样会频繁被执行，如果效率不济就会浪费很多</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >时间，导致系统性能下降。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >在<SPAN style="FONT-FAMILY: Arial;"  >linux&nbsp;2.4</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >时，可执行状态的进程被挂在一个链表中。每次调度，调度程序需要扫描整个链表，以找出最优的那个进程来运行。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >复杂度为<SPAN style="FONT-FAMILY: Arial;"  >O(n)</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >在<SPAN style="FONT-FAMILY: Arial;"  >linux&nbsp;2.6</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >早期，可执行状态的进程被挂在</SPAN><SPAN style="FONT-FAMILY: Arial;"  >N(N=140)</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >个链表中，每一个链表代表一个优先级，</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >系统中支持多少个优先级就有多少个链表。每次调度，调度程序只需要从第一个不为空的链表中取出位于链表头的进程即可</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。这样就大大提高了调度程序的效率，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >复杂度为<SPAN style="FONT-FAMILY: Arial;"  >O(1)</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >在<SPAN style="FONT-FAMILY: Arial;"  >linux&nbsp;2.6</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >近期的版本中，可执行状态的进程按照优先级顺序被挂在一个</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >红黑树</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >（可以想象成平衡二叉树）中。每次调度，调度程序需要从树中找出优先级最高的进程。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >复杂度为<SPAN style="FONT-FAMILY: Arial;"  >O(logN)</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >那么，为什么从<SPAN style="FONT-FAMILY: Arial;"  >linux&nbsp;2.6</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >早期到近期</SPAN><SPAN style="FONT-FAMILY: Arial;"  >linux&nbsp;2.6</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >版本，调度程序选择进程时的复杂度反而增加了呢？</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >这是因为，与此同时，调度程序对公平性的实现从上面提到的第一种思路改变为第二种思路（通过动态调整优先级实现）。而<SPAN style="FONT-FAMILY: Arial;"  >O(1)</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的算法是基于一组数目不大的链表来实现的，按我的理解，这使得优先级的取值范围很小（区分度很低），不能满足公平性的需求。而使用红黑树则对优先级的取值没有限制（可以用</SPAN><SPAN style="FONT-FAMILY: Arial;"  >32</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >位、&nbsp;</SPAN><SPAN style="FONT-FAMILY: Arial;"  >64</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >位、或更多位来表示优先级的值），并且</SPAN><SPAN style="FONT-FAMILY: Arial;"  >O(logN)</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的复杂度也还是很高效的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 14pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >调度触发的时机</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >调度的触发主要有如下几种情况：</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >1<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >当前进程（正在<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >上运行的进程）状态变为非可执行状态</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >进程执行系统调用主动变为非可执行状态。比如执行<SPAN style="FONT-FAMILY: Arial;"  >nanosleep</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >进入睡眠、执行</SPAN><SPAN style="FONT-FAMILY: Arial;"  >exit</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >退出、等等；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >进程请求的资源得不到满足而被迫进入睡眠状态。比如执行<SPAN style="FONT-FAMILY: Arial;"  >read</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >系统调用时，磁盘高速缓存里没有所需要的数据，从而睡眠等待磁盘</SPAN><SPAN style="FONT-FAMILY: Arial;"  >IO</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >进程响应信号而变为非可执行状态。比如响应<SPAN style="FONT-FAMILY: Arial;"  >SIGSTOP</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >进入暂停状态、响应</SPAN><SPAN style="FONT-FAMILY: Arial;"  >SIGKILL</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >退出、等等；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >2<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >抢占</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。进程运行时，非预期地被剥夺<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的使用权。这又分两种情况：进程用完了时间片、或出现了优先级更高的进程。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >优先级更高的进程受正在<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >上运行的进程的影响而被唤醒。如发送信号主动唤醒，或因为释放互斥对象（如释放锁）而被唤醒；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >内核在响应时钟中断的过程中，发现当前进程的时间片用完；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >内核在响应中断的过程中，发现优先级更高的进程所等待的外部资源的变为可用，从而将其唤醒。比如<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >收到网卡中断，内核处理该中断，发现某个&nbsp;</SPAN><SPAN style="FONT-FAMILY: Arial;"  >socket</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >可读，于是唤醒正在等待读这个</SPAN><SPAN style="FONT-FAMILY: Arial;"  >socket</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的进程；再比如内核在处理时钟中断的过程中，触发了定时器，从而唤醒对应的正在</SPAN><SPAN style="FONT-FAMILY: Arial;"  >nanosleep&nbsp;</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >系统调用中睡眠的进程；</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff00ff; FONT-SIZE: 14pt; FONT-WEIGHT: bold; mso-spacerun: 'yes';"  >其他问题</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >1<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >内核抢占</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >理想情况下，只要满足<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >出现了优先级更高的进程</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这个条件，当前进程就应该被立刻抢占。但是，就像多线程程序需要用锁来保护临界区资源一样，内核中也存在很多这样的临界区，不大可能随时随地都能接收抢占。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >linux&nbsp;2.4<SPAN style="FONT-FAMILY: 宋体;"  >时</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >的设计就非常简单，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >内核不支持抢占。进程运行在内核态时（比如正在执行系统调用、正处于异常处理函数中），是不允许抢占的</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。必须等到返回用户态时才会触发调度（确切的说，是在返回用户态之前，内核会专门检查一下是否需要调度）；</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >l</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >inux&nbsp;2.6<SPAN style="FONT-FAMILY: 宋体;"  >则实现了内核抢占</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >，但是在很多地方还是为了保护临界区资源而需要临时性的禁用内核抢占。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >也有一些地方是出于效率考虑而禁用抢占，比较典型的是<SPAN style="FONT-FAMILY: Arial;"  >spin_lock</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >。</SPAN><SPAN style="FONT-FAMILY: Arial;"  >spin_lock</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >是这样一种锁，如果请求加锁得不到满足（锁已被别的进程占有），则当前进程在一个死循环中不断检测锁的状态，直到锁被释放。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >为什么要这样忙等待呢？因为临界区很小，比如只保护<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: Arial;"  >i+=j++;</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这么一句。如果因为加锁失败而形成</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >睡眠</SPAN><SPAN style="FONT-FAMILY: Arial;"  >-</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >唤醒</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这么个过程，就有些得不偿失了。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >那么既然当前进程忙等待（不睡眠），谁又来释放锁呢？其实已得到锁的进程是运行在另一个<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >上的，并且是禁用了内核抢占的。这个进程不会被其他进程抢占，所以等待锁的进程只有可能运行在别的</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >上。（如果只有一个</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >呢？那么就不可能存在等待锁的进程了。）</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >而如果不禁用内核抢占呢？那么得到锁的进程将可能被抢占，于是可能很久都不会释放锁。于是，等待锁的进程可能就不知何年何月得偿所望了。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >对于一些实时性要求更高的系统，则不能容忍<SPAN style="FONT-FAMILY: Arial;"  >spin_lock</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这样的东西。宁可改用更费劲的</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >睡眠</SPAN><SPAN style="FONT-FAMILY: Arial;"  >-</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >唤醒</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >过程，也不能因为禁用抢占而让更高优先级的进程等待。比如，</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >嵌入式实时<SPAN style="FONT-FAMILY: Arial;"  >linux&nbsp;montavista</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >就是这么干的</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >由此可见，实时并不代表高效。很多时候为了实现<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >实时</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >，还是需要对性能做一定让步的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >2<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >多处理器下的负载均衡</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >前面我们并没有专门讨论多处理器对调度程序的影响，其实也没有什么特别的，就是在同一时刻能有多个进程并行地运行而已。那么，为什么会有<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >多处理器负载均衡</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这个事情呢？</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >如果系统中只有一个可执行队列，哪个<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >空闲了就去队列中找一个最合适的进程来执行。这样不是很好很均衡吗？</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >的确如此，但是多处理器共用一个可执行队列会有一些问题。显然，每个<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >在执行调度程序时都需要把队列锁起来，这会使得调度程序难以并行，可能导致系统性能下降。而如果每个</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >对应一个可执行队列则不存在这样的问题。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >另外，多个可执行队列还有一个好处。这使得一个进程在一段时间内总是在同一个<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >上执行，那么很可能这个</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的各级</SPAN><SPAN style="FONT-FAMILY: Arial;"  >cache</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >中都缓存着这个进程的数据，很有利于系统性能的提升。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >所以，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >在<SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >下，每个</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >都有着对应的可执行队列，而一个可执行状态的进程在同一时刻只能处于一个可执行队列中。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >于是，<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >多处理器负载均衡</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >这个麻烦事情就来了。内核需要关注各个</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >可执行队列中的进程数目，在数目不均衡时做出适当调整。什么时候需要调整，以多大力度进程调整，这些都是内核需要关心的。当然，尽量不要调整最好，毕竟调整起来又要耗</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >、又要锁可执行队列，代价还是不小的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >另外，内核还得关心各个<SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的关系。两个</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >之间，可能是相互独立的、可能是共享</SPAN><SPAN style="FONT-FAMILY: Arial;"  >cache</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的、甚至可能是由同一个物理</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >通过超线程技术虚拟出来的</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >……</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >之间的关系也是实现负载均衡的重要依据。关系越紧密，就应该越能容忍</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >不均衡</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >更细节的东西可以参考一下关于<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN></SPAN><SPAN><A rel="nofollow" href="http://www.baidu.com/s?wd=&amp;cl=3&amp;tn=baidu_myps_pg&amp;bar=17"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >调度域</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >”<SPAN style="FONT-FAMILY: 宋体;"  >的文章。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ></SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >3<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >优先级继承</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >由于互斥，一个进程（设为<SPAN style="FONT-FAMILY: Arial;"  >A</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >）可能因为等待进入临界区而睡眠。直到正在占有相应资源的进程（设为</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >）退出临界区，进程</SPAN><SPAN style="FONT-FAMILY: Arial;"  >A</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >才被唤醒。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >可能存在这样的情况：<SPAN style="FONT-FAMILY: Arial;"  >A</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的优先级非常高，</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的优先级非常低。</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >进入了临界区，但是却被其他优先级较高的进程（设为</SPAN><SPAN style="FONT-FAMILY: Arial;"  >C</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >）抢占了，而得不到运行，也就无法退出临界区。于是</SPAN><SPAN style="FONT-FAMILY: Arial;"  >A</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >也就无法被唤醒。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >A<SPAN style="FONT-FAMILY: 宋体;"  >有着很高的优先级，但是现在却沦落到跟</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >一起，被优先级并不太高的</SPAN><SPAN style="FONT-FAMILY: Arial;"  >C</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >抢占，导致执行被推迟。这种现象就叫做</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >优先级反转</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >出现这种现象是很不合理的。较好的应对措施是：当<SPAN style="FONT-FAMILY: Arial;"  >A</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >开始等待</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >退出临界区时，</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >临时得到</SPAN><SPAN style="FONT-FAMILY: Arial;"  >A</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的优先级（还是假设</SPAN><SPAN style="FONT-FAMILY: Arial;"  >A</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的优先级高于</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >），以便顺利完成处理过程，退出临界区。之后</SPAN><SPAN style="FONT-FAMILY: Arial;"  >B</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >的优先级恢复。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >这就是优先级继承的方法</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >为了实现优先级继承，内核又得做很多事情。更细节的东西可以参考一下关于<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN></SPAN><SPAN><A rel="nofollow" href="http://www.baidu.com/s?bs=??&amp;f=8&amp;wd=??"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >优先级反转</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >”<SPAN style="FONT-FAMILY: 宋体;"  >或</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN></SPAN><SPAN><A rel="nofollow" href="http://www.baidu.com/s?bs=linux+capability&amp;f=8&amp;wd=??"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #690000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >优先级继承</SPAN></A></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >”<SPAN style="FONT-FAMILY: 宋体;"  >的文章。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >4<SPAN style="FONT-FAMILY: 宋体;"  >、</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #9900ff; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >中断处理线程化</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >在<SPAN style="FONT-FAMILY: Arial;"  >linux</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >下，中断处理程序运行于一个不可调度的上下文中。从</SPAN><SPAN style="FONT-FAMILY: Arial;"  >CPU</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >响应硬件中断自动跳转到内核设定的中断处理程序去执行，到中断处理程序退出，整个过程是不能被抢占的。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >一个进程如果被抢占了，可以通过保存在它的进程控制块（<SPAN style="FONT-FAMILY: Arial;"  >task_struct</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >）中的信息，在之后的某个时间恢复它的运行。而中断上下文则没有</SPAN><SPAN style="FONT-FAMILY: Arial;"  >task_struct</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >，被抢占了就没法恢复了。</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >中断处理程序不能被抢占，也就意味着中断处理程序的<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >优先级</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >比任何进程都高</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >（必须等中断处理程序完成了，进程才能被执行）。但是在实际的应用场景中，可能某些实时进程应该得到比中断处理程序更高的优先级。</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >于是，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >一些实时性要求更高的系统就给中断处理程序赋予了<SPAN style="FONT-FAMILY: Arial;"  >task_struct</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >以及优先级</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >，使得它们在</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >必要的时候能够被高优先级的进程抢占</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。但是显然，做这些工作是会给系统造成一定开销的，</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #ff0000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >这也是为了实现<SPAN style="FONT-FAMILY: Times New Roman;"  >“</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >实时</SPAN><SPAN style="FONT-FAMILY: Times New Roman;"  >”</SPAN><SPAN style="FONT-FAMILY: 宋体;"  >而对性能做出的一种让步</SPAN></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >。</SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ></SPAN>&nbsp;</P>  <H1><A id="ctl02_TitleUrl" rel="nofollow" href="http://www.cnblogs.com/microgrape/archive/2011/05/12/2043905.html"  ><FONT color="#3468a4"  >《深入理解Linux内核》笔记2：进程的数据结构与其生命周期</FONT></A></H1><STRONG><U><FONT color="#800080"  size="6"  ><A rel="nofollow" href="http://www.cnblogs.com/microgrape/archive/2011/05/12/2043905.html"  >http://www.cnblogs.com/microgrape/archive/2011/05/12/2043905.html</A></FONT></U></STRONG>   <H3 id="post-2838"  >&nbsp;</H3>  <H3><A title="Permanent Link to Linux2.6&#36827;&#31243;&#35843;&#24230;&#20998;&#26512;(1)-&#35843;&#24230;&#31574;&#30053;" rel="nofollow" href="http://edsionte.com/techblog/archives/2838"  ><FONT color="#000000"  >Linux2.6进程调度分析(1)-调度策略</FONT></A></H3>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><FONT size="5"  ><STRONG><A rel="nofollow" href="http://edsionte.com/techblog/archives/category/linux%e5%86%85%e6%a0%b8/page/2"  >http://edsionte.com/techblog/archives/category/linux%e5%86%85%e6%a0%b8/page/2</A></STRONG></FONT></SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><STRONG><FONT size="5"  ></FONT></STRONG></SPAN>&nbsp;</P><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >  <H2>Linux2.6进程调度分析(2)-调度算法</H2>  <P><A rel="nofollow" href="http://edsionte.com/techblog/archives/2851"  >http://edsionte.com/techblog/archives/2851</A></P>  <P>&nbsp;</P>  <H2>Linux2.6进程调度分析(3)-与调度有关的函数分析</H2>  <P><A rel="nofollow" href="http://edsionte.com/techblog/archives/2870"  >http://edsionte.com/techblog/archives/2870</A></P></SPAN>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><FONT size="5"  ><STRONG></STRONG></FONT></SPAN>&nbsp;</P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><FONT size="5"  ><STRONG></STRONG></FONT></SPAN>&nbsp;</P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><FONT size="5"  ><STRONG>参考资料：《linux内核设计与实现》《深入理解linux</STRONG></FONT></SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><FONT size="5"  ><STRONG>2.5.3　处理优先级（1）内核</STRONG></FONT></SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><STRONG><FONT size="5"  ><A rel="nofollow" href="http://book.51cto.com/art/201005/200899.htm"  >http://book.51cto.com/art/201005/200899.htm</A></FONT></STRONG></SPAN></P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ></SPAN>&nbsp;</P>  <P style="TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;"  ><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  ><STRONG><FONT size="5"  >-------------------</FONT></STRONG></SPAN></P><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: 'yes';"  >  <P><FONT size="3"  ><STRONG>1)初识调度</STRONG></FONT></P>  <P><FONT size="3"  ><BR>为配合系统对进程的调度,采用两种方式进行处理<BR>1.1)协同多任务处理</FONT></P>  <P><FONT size="3"  >当进程因为事件的等待,而自动放弃CPU资源,而使其它进程得以使用CPU,这时称之为协同多任务处理.<BR>其实如果进程都采用协同多任务处理时,系统将会轻松的调度进程,以分配资源</FONT></P>  <P><FONT size="3"  >1.2)抢先式多任务处理<BR>当进程不进行I/O,比如计算型运算应用时,一直占用大量的CPU时间,这时系统将会利用中断,使原占用CPU的进程放弃CPU.<BR>这时称之为抢先式多任务处理</FONT></P>  <P><FONT size="3"  >1.3)总结<BR>1.3.1)UNIX/LINUX采用协同多任务处理与抢先式多任务处理相结合的方式处理进程.<BR>1.3.2)当进程都采用协同多任务处理,系统就可能永远不会用到抢先式.<BR>1.3.3)调度程序本身也是一个进程,PID是0,是INIT进行的父进程</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  ><BR></FONT><FONT size="3"  ><STRONG>2)阻塞,抢先占用和放弃</STRONG></FONT></P>  <P><FONT size="3"  ><BR>2.1)抢先占用的触发:</FONT></P>  <P><FONT size="3"  >2.1.1)当一个进程因为它的时间片用完而被内核停止执行时,就说这个进程被抢占.<BR>2.1.2)当一个享有更高优先公的进程在就绪队列,内核同样可以抢占正在执行的进程,即使它的时间片还没用完.</FONT></P>  <P><FONT size="3"  ><BR>2.2)放弃的触发:<BR>2.2.1)用户进程可以通过sched_yield系统调用来放弃使用CPU.<BR>2.2.2)用户进程通过其它系统调用来放弃CPU.<BR>例如:一个进程正在调用read/write时,它很可能不得不等待相应的设备的响应,这时它应用使自己睡眠(sleep),放弃CPU,直到设备就绪为止.</FONT></P>  <P><FONT size="3"  ><BR>2.3)阻塞的触发:<BR>2.3.1)当进程在内核模式下等待一个事件时,就是阻塞,直到所等侍的事件来唤醒它为止.</FONT></P>  <P><FONT size="3"  >2.4)总结:<BR>2.4.1)阻塞与放弃的区别<BR>一个阻塞的进程即不会占用CPU,也不会被调度程序调度.而放弃的进程则会被调度程序调度.<BR>2.4.2)linux2.6内核是一个可抢先占有的内核,在不可抢先有的内核则高优先级的进程不能抢占低优先级的进程.</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  ><STRONG>3)优先级</STRONG></FONT></P>  <P><FONT size="3"  >3.1)动态优先级<BR>因为高优先级的进程总比低优先级的进程先被调度,为防止有多个高优先级且一直占用CPU资源,导致其它进程不能占用CPU,所以引用动态优先级概念.</FONT></P>  <P><FONT size="3"  >3.2)交互式的进程<BR>如果某个进程被认为是交互式的,那么将被赋予较高的优先权,例如:键盘输入.交互式的进程从来不被抢占,并且占用CPU很少,它们常常自动放弃CPU.</FONT></P>  <P><FONT size="3"  >3.3)有效优先级<BR>进程的有效优先级就是静态优先级与额外值的和.</FONT></P>  <P><FONT size="3"  >静态优先级是在系统创建时就已经分配给进程了,整个运行周期里不变.<BR>额外值是一个可正可负的值,也可以把额外值理解为动态优先级,因为系统通过改变这个额外值(动态优先级)来改变进程的有效优先级.<BR>额外值是由内核来管理</FONT></P>  <P><FONT size="3"  >3.4)用一个例子来说明系统是如何给进程分配动态优先级的</FONT></P>  <P><FONT size="3"  >新建nicegy脚本,这个脚本用sleep使其部分时间在睡眠状态.<BR>#!/bin/sh<BR>while true; do<BR>sleep .1<BR>done</FONT></P>  <P><FONT size="3"  >新建cruncher脚本,这个脚本在循环中使用true,一直占用CPU.<BR>#!/bin/sh<BR>while true; do<BR>true<BR>done</FONT></P>  <P><FONT size="3"  ><BR>新建脚本runex,这个脚本使行cruncher和niceguy两个脚本,监控这两个脚本的动态优先级. <BR>#!/bin/sh</FONT></P>  <P><FONT size="3"  >./cruncher &amp;<BR>./niceguy &amp;</FONT></P>  <P><FONT size="3"  ><BR>trap 'echo stoping; kill %1 %2; break' SIGINT</FONT></P>  <P><FONT size="3"  >while true; do<BR>ps -C niceguy -C cruncher -o etime,pid,pri,cmd<BR>sleep .5<BR>done</FONT></P>  <P><FONT size="3"  >运行runex</FONT></P>  <P><FONT size="3"  >./runex <BR>ELAPSED&nbsp;&nbsp; PID PRI CMD<BR>00:00&nbsp; 2343&nbsp; 20 /bin/sh ./cruncher<BR>00:00&nbsp; 2344&nbsp; 21 /bin/sh ./niceguy<BR>ELAPSED&nbsp;&nbsp; PID PRI CMD<BR>00:01&nbsp; 2343&nbsp; 20 /bin/sh ./cruncher<BR>00:01&nbsp; 2344&nbsp; 22 /bin/sh ./niceguy<BR>ELAPSED&nbsp;&nbsp; PID PRI CMD<BR>00:01&nbsp; 2343&nbsp; 19 /bin/sh ./cruncher<BR>00:01&nbsp; 2344&nbsp; 22 /bin/sh ./niceguy<BR>ELAPSED&nbsp;&nbsp; PID PRI CMD<BR>00:02&nbsp; 2343&nbsp; 18 /bin/sh ./cruncher<BR>00:02&nbsp; 2344&nbsp; 23 /bin/sh ./niceguy<BR>ELAPSED&nbsp;&nbsp; PID PRI CMD<BR>00:02&nbsp; 2343&nbsp; 15 /bin/sh ./cruncher<BR>00:02&nbsp; 2344&nbsp; 23 /bin/sh ./niceguy<BR>ELAPSED&nbsp;&nbsp; PID PRI CMD<BR>00:03&nbsp; 2343&nbsp; 14 /bin/sh ./cruncher<BR>00:03&nbsp; 2344&nbsp; 23 /bin/sh ./niceguy<BR>ELAPSED&nbsp;&nbsp; PID PRI CMD<BR>00:04&nbsp; 2343&nbsp; 14 /bin/sh ./cruncher<BR>00:04&nbsp; 2344&nbsp; 23 /bin/sh ./niceguy<BR><BR>结论:<BR>1)这两个进程会随时时间变化而变化<BR>进程cruncher会一直运行不休眠(sleep),因此调度程序会给它一个负的额外值以降低它的有效优先级.<BR>而进程niceguy大部从那时间则处于休息状态,因此调度程序会给它一个正的额外值以提高它的有效优先级.<BR>2)而这两个进程在此之后就处于相对稳定的状态.<BR>3)PRI是有效优先级,系统不能改变进程的静态优先级,但可以改变它的额外值以达到降低有效优先级的目的.<BR>例如:静态优先级是20,额外值是-6,则有效优先级就是PRI=20+(-6)=14,注意这里没有涉及nice值,我们下面再来谈nice值对优先级的影响.</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  ><BR><STRONG>4)nice值与有效优先级</STRONG></FONT></P>  <P><FONT size="3"  >4.1)nice值的由来<BR>内核允许用户通过使用一个名为nice的数值来影响调度程序关于优先级的调度<BR>也就是说nice值是用户来触发,而我们上面说的额外值是内核来触发的.</FONT></P>  <P><FONT size="3"  >4.2)nice值对有效优先级的影响</FONT></P>  <P><FONT size="3"  >nice值越高,有效优先级就越低.<BR>nice值越低,有效优先级就越高.<BR>有效优先级=静态优先值+额外值-nice值<BR>例如:<BR>静态优先值为20<BR>额外值为-6<BR>nice值为-10<BR>那最后有效优先级就是:<BR>PRI=20+(-6)-(-10)=24<BR>而如果nice值为10<BR>PRI=20+(-6)-10=4</FONT></P>  <P><FONT size="3"  ><BR>4.3)nice与有效优先级的范围</FONT></P>  <P><FONT size="3"  >nice的范围是-20到19<BR>有效优先级的范围是0-39</FONT></P>  <P><FONT size="3"  ><BR>4.4)例子:nice是如何影响有效优先级的</FONT></P>  <P><FONT size="3"  >cruncher进程的有效优先级是14,nice值是0</FONT></P>  <P><FONT size="3"  >ps -C cruncher -o etime,pid,pri,ni,cmd<BR>ELAPSED&nbsp;&nbsp; PID PRI&nbsp; NI CMD<BR>00:17&nbsp; 6034&nbsp; 14&nbsp;&nbsp; 0 /bin/sh ./cruncher</FONT></P>  <P><FONT size="3"  >更改nice值为-20<BR>renice -20 -p 6034<BR>6034: old priority 0, new priority -20</FONT></P>  <P><FONT size="3"  >当nice的值为-20,PRI的值变成34<BR>PRI = 静态优先级(20) + 附加值(-6) - nice(-20) = 34<BR>ps -C cruncher -o etime,pid,pri,ni,cmd<BR>ELAPSED&nbsp;&nbsp; PID PRI&nbsp; NI CMD<BR>00:39&nbsp; 6034&nbsp; 34 -20 /bin/sh ./cruncher</FONT></P>  <P><FONT size="3"  >更改nice的值为19<BR>renice 19 -p 6034<BR>6034: old priority -20, new priority 19</FONT></P>  <P><FONT size="3"  >当nice的值为19,PRI的值为0<BR>PRI = 静态优先级(20) + 附加值(-6) - nice(19) = 0 因为最低0,即使是-5最后也0</FONT></P>  <P><FONT size="3"  >ps -C cruncher -o etime,pid,pri,ni,cmd<BR>ELAPSED&nbsp;&nbsp; PID PRI&nbsp; NI CMD<BR>01:03&nbsp; 6034&nbsp;&nbsp; 0&nbsp; 19 /bin/sh ./cruncher</FONT></P>  <P><FONT size="3"  >注意:PRI为34时,系统的反应会变慢.</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  ><STRONG>5)实时优先级</STRONG></FONT></P>  <P><FONT size="3"  >5.1)实时优先级概述:<BR>linux提供了一个实时调度策略,提供了100个额外优先级别,以保证系统能及时响应进程.</FONT></P>  <P><FONT size="3"  >5.2)实时优先级和普通优先级的区别:<BR>实时优先级比普通优先级高,普通优先级是0-39.而实时优先级是(41-139),优先级一般不用40.</FONT></P>  <P><FONT size="3"  >实时优先级在整个进程的生命周期里是不变的,所以实时进程没有nice值,也没有额外值.它的有效优先级就是静态优先级.</FONT></P>  <P><FONT size="3"  >5.3)POSIX标准为实时进程指定了两种策略:先进先出(FIFO),时间片法(Round_Robin,简称RR)</FONT></P>  <P><FONT size="3"  >5.3.1)先进先出(FIFO)调度<BR>如果有两个同优先级的进程位于就绪队列,通常情况下,排在前面的先被执行</FONT></P>  <P><FONT size="3"  >FIFO的策略要求进程不能抢占CPU,除非另一个实时进程有更高优先级</FONT></P>  <P><FONT size="3"  >5.3.2)FIFO调度的例子<BR>这个程序将永远不会退出.系统将会死机.</FONT></P>  <P><FONT size="3"  >新建chewer脚本<BR>#!/bin/sh<BR>(sleep 50;kill -ALRM $$) &amp;<BR>while true;do<BR>true;<BR>done</FONT></P>  <P><FONT size="3"  >程序为什么不在50秒之后退出呢,原因是一个fifo的调度,是不会运行(sleep 5;kill -ALRM $$),而永远进入了一个死循环.<BR>在2.6.18的内核中,这个会造成死机,而新的2.6.32内核则不会,我们依然有机会终止它.<BR>我们在2.6.32的内核中看下它的优先级</FONT></P>  <P><FONT size="3"  >指定调度策略为FIFO,优先级为50<BR>chrt -f 50 ./chewer &amp;<BR>[2] 2414</FONT></P>  <P><FONT size="3"  >查看优先级,CLS显示了调度策略,chewer的调度策略是FF,FF表示FIFO,PTRPIO是实时优先级,这里chewer是50,<BR>PRI是有效优先级,在实时系统里也叫绝对优先级,有效优先级是实时优先级与40的和,所以这里是90.</FONT></P>  <P><FONT size="3"  >ps -eo pid,ppid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,command<BR>PID&nbsp; PPID&nbsp;&nbsp; TID CLS RTPRIO&nbsp; NI PRI PSR %CPU STAT WCHAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMMAND<BR>1&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 1 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ init [2]&nbsp; <BR>2&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 2 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kthreadd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kthreadd]<BR>3&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 3 FF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 99&nbsp;&nbsp; - 139&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; migration_thre [migration/0]<BR>4&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 4 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; ksoftirqd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [ksoftirqd/0]<BR>5&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 5 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [events/0]<BR>6&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 6 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [khelper]<BR>11&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 11 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; async_manager_ [async/mgr]<BR>58&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 58 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_sync_super [sync_supers]<BR>60&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 60 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_forker_tas [bdi-default]<BR>62&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 62 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kblockd/0]<BR>64&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 64 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kacpid]<BR>65&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 65 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kacpi_notify]<BR>66&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 66 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kacpi_hotplug]<BR>118&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 118 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; serio_thread&nbsp;&nbsp; [kseriod]<BR>168&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 168 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kswapd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kswapd0]<BR>169&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 169 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [aio/0]<BR>170&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 170 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [crypto/0]<BR>552&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 552 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; scsi_error_han [scsi_eh_0]<BR>812&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 812 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>902&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; 902 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp; -4&nbsp; 23&nbsp;&nbsp; 0&nbsp; 0.0 S&lt;s&nbsp; poll_schedule_ udevd --daemon<BR>1035&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1035 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kpsmoused]<BR>1551&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1551 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kstriped]<BR>1562&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1562 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [ksnapd]<BR>1588&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1588 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>1589&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1589 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>1659&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1659 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ dhclient3 -pf /var/run/dhclient.eth0.pid -lf /var/lib/dhcp3/dhclie<BR>1675&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1675 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /sbin/portmap<BR>1839&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1839 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Sl&nbsp;&nbsp; poll_schedule_ /usr/sbin/rsyslogd -c3<BR>1852&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1852 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/acpid<BR>2127&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2127 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/exim4 -bd -q30m<BR>2139&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2139 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/inetd<BR>2158&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2158 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/sshd<BR>2162&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2162 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /sbin/rpc.statd<BR>2163&nbsp; 2158&nbsp; 2163 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ sshd: <A rel="nofollow" href="mailto:root@pts/0,pts/1"  >root@pts/0,pts/1</A><BR>2172&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2172 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; hrtimer_nanosl /usr/sbin/atd<BR>2192&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2192 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; hrtimer_nanosl /usr/sbin/cron<BR>2206&nbsp; 2163&nbsp; 2206 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -bash<BR>2211&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2211 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/apache2 -k start<BR>2228&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2228 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty1<BR>2229&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2229 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty2<BR>2230&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2230 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty3<BR>2231&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2231 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty4<BR>2232&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2232 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty5<BR>2233&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2233 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty6<BR>2236&nbsp; 2211&nbsp; 2236 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2237&nbsp; 2211&nbsp; 2237 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2238&nbsp; 2211&nbsp; 2238 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2239&nbsp; 2211&nbsp; 2239 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2240&nbsp; 2211&nbsp; 2240 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2276&nbsp; 2163&nbsp; 2276 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -bash<BR>2280&nbsp; 2276&nbsp; 2280 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.1 S+&nbsp;&nbsp; poll_schedule_ top<BR>2347&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 2347 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_writeback_ [flush-8:0]<BR>2414&nbsp; 2206&nbsp; 2414 FF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp; -&nbsp; 90&nbsp;&nbsp; 0&nbsp; 112 R&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /bin/sh ./chewer<BR>2415&nbsp; 2414&nbsp; 2415 FF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp; -&nbsp; 90&nbsp;&nbsp; 0&nbsp; 0.0 R&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /bin/sh ./chewer<BR></FONT></P>  <P><FONT size="3"  >5.3.3)时间片调度(RR)</FONT></P>  <P><FONT size="3"  >用时间片调度来执行chewer程序,则不会出现死机的情况.因为它在运行一段时间后,会根据时间片释放自己,这样就会fork出sleep进程,最后kill掉自己(chewer).</FONT></P>  <P><FONT size="3"  >依然用chrt程序,-r表示用实时时间片调度,级别依然是50<BR>chrt -r 50 ./chewer &amp;</FONT></P>  <P><FONT size="3"  >用ps命令查看有sleep 50的进程,同时chewer的调度状态CLS为RR<BR>ps -eo pid,ppid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,command<BR>PID&nbsp; PPID&nbsp;&nbsp; TID CLS RTPRIO&nbsp; NI PRI PSR %CPU STAT WCHAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMMAND<BR>1&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 1 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ init [2]&nbsp; <BR>2&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 2 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kthreadd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kthreadd]<BR>3&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 3 FF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 99&nbsp;&nbsp; - 139&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; migration_thre [migration/0]<BR>4&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 4 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; ksoftirqd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [ksoftirqd/0]<BR>5&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 5 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [events/0]<BR>6&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 6 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [khelper]<BR>11&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 11 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; async_manager_ [async/mgr]<BR>58&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 58 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_sync_super [sync_supers]<BR>60&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 60 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_forker_tas [bdi-default]<BR>62&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 62 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kblockd/0]<BR>64&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 64 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kacpid]<BR>65&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 65 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kacpi_notify]<BR>66&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 66 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kacpi_hotplug]<BR>118&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 118 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; serio_thread&nbsp;&nbsp; [kseriod]<BR>168&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 168 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kswapd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kswapd0]<BR>169&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 169 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [aio/0]<BR>170&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 170 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [crypto/0]<BR>552&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 552 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; scsi_error_han [scsi_eh_0]<BR>812&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 812 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>902&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; 902 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp; -4&nbsp; 23&nbsp;&nbsp; 0&nbsp; 0.0 S&lt;s&nbsp; poll_schedule_ udevd --daemon<BR>1035&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1035 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kpsmoused]<BR>1551&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1551 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [kstriped]<BR>1562&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1562 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp; [ksnapd]<BR>1588&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1588 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>1589&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1589 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>1659&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1659 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ dhclient3 -pf /var/run/dhclient.eth0.pid -lf /var/lib/dhcp3/dhclie<BR>1675&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1675 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /sbin/portmap<BR>1839&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1839 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Sl&nbsp;&nbsp; poll_schedule_ /usr/sbin/rsyslogd -c3<BR>1852&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1852 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/acpid<BR>2127&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2127 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/exim4 -bd -q30m<BR>2139&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2139 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/inetd<BR>2158&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2158 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/sshd<BR>2162&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2162 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /sbin/rpc.statd<BR>2163&nbsp; 2158&nbsp; 2163 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ sshd: <A rel="nofollow" href="mailto:root@pts/0,pts/1"  >root@pts/0,pts/1</A><BR>2172&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2172 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; hrtimer_nanosl /usr/sbin/atd<BR>2192&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2192 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; hrtimer_nanosl /usr/sbin/cron<BR>2206&nbsp; 2163&nbsp; 2206 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -bash<BR>2211&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2211 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_ /usr/sbin/apache2 -k start<BR>2228&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2228 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty1<BR>2229&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2229 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty2<BR>2230&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2230 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty3<BR>2231&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2231 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty4<BR>2232&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2232 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty5<BR>2233&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2233 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty6<BR>2236&nbsp; 2211&nbsp; 2236 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2237&nbsp; 2211&nbsp; 2237 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2238&nbsp; 2211&nbsp; 2238 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2239&nbsp; 2211&nbsp; 2239 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2240&nbsp; 2211&nbsp; 2240 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accep /usr/sbin/apache2 -k start<BR>2276&nbsp; 2163&nbsp; 2276 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -bash<BR>2280&nbsp; 2276&nbsp; 2280 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.1 S+&nbsp;&nbsp; poll_schedule_ top<BR>2434&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 2434 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_writeback_ [flush-8:0]<BR>2456&nbsp; 2206&nbsp; 2456 RR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp; -&nbsp; 90&nbsp;&nbsp; 0&nbsp; 141 R&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /bin/sh ./chewer<BR>2457&nbsp; 2456&nbsp; 2457 RR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp; -&nbsp; 90&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /bin/sh ./chewer<BR>2458&nbsp; 2457&nbsp; 2458 RR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp; -&nbsp; 90&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; hrtimer_nanosl sleep 50<BR>2459&nbsp; 2206&nbsp; 2459 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 R+&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ps -eo pid,ppid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wc</FONT></P><FONT size="3"  >  <P><BR>注:<BR>实时时间片调度进程的时间片与普通进程的时间片不一样,实时进程的时间片法,如果该进程被另一个更高优先级的进程抢占,<BR>在高优先级执先完后,允许该进程用完剩余的时间片,如果普通进程则它的时间片将会缩短.</P>  <P>  <TABLE style="WIDTH: 100%; TABLE-LAYOUT: fixed;"  >  <TBODY>  <TR>  <TD>  <DIV id="blog_text"  >  <P><FONT size="3"  >5.3.4)批处理调度(BATCH)<BR><BR>这种调度算法不是实时调度策略,这种调度策略和实时调度策略相反,因为只会在没有其他进程占用CPU时间时,它才会运行.<BR>但与nice值设成最大不同,因为即便是优先权最低还是有可能轮到它.</FONT></P>  <P><FONT size="3"  >下面指定批处理调度来运行chewer<BR>chrt -b 0 ./chewer &amp;<BR>[1] 2508</FONT></P>  <P><FONT size="3"  >可以看到chewer进程的CLS一列为B,它的实时优先级只能是0.<BR>ps -eo pid,ppid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:30,command<BR>PID&nbsp; PPID&nbsp;&nbsp; TID CLS RTPRIO&nbsp; NI PRI PSR %CPU STAT WCHAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMMAND<BR>1&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 1 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init [2]&nbsp; <BR>2&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 2 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kthreadd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kthreadd]<BR>3&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 3 FF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 99&nbsp;&nbsp; - 139&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; migration_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [migration/0]<BR>4&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 4 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; ksoftirqd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [ksoftirqd/0]<BR>5&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 5 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [events/0]<BR>6&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 6 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [khelper]<BR>11&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 11 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; async_manager_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [async/mgr]<BR>58&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 58 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_sync_supers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [sync_supers]<BR>60&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 60 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_forker_task&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [bdi-default]<BR>62&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 62 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kblockd/0]<BR>64&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 64 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kacpid]<BR>65&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 65 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kacpi_notify]<BR>66&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; 66 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kacpi_hotplug]<BR>118&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 118 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; serio_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kseriod]<BR>168&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 168 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kswapd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kswapd0]<BR>169&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 169 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [aio/0]<BR>170&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 170 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [crypto/0]<BR>552&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 552 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; scsi_error_handler&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [scsi_eh_0]<BR>812&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 812 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>902&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; 902 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp; -4&nbsp; 23&nbsp;&nbsp; 0&nbsp; 0.0 S&lt;s&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; udevd --daemon<BR>1035&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1035 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kpsmoused]<BR>1551&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1551 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kstriped]<BR>1562&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1562 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; worker_thread&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [ksnapd]<BR>1588&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1588 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>1589&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 1589 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; kjournald&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [kjournald]<BR>1659&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1659 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dhclient3 -pf /var/run/dhclient.eth0.pid -lf /var/<BR>1675&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1675 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/portmap<BR>1839&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1839 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Sl&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/rsyslogd -c3<BR>1852&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 1852 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/acpid<BR>2127&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2127 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/exim4 -bd -q30m<BR>2139&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2139 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/inetd<BR>2158&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2158 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/sshd<BR>2162&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2162 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/rpc.statd<BR>2163&nbsp; 2158&nbsp; 2163 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sshd: <A rel="nofollow" href="mailto:root@pts/0,pts/1"  >root@pts/0,pts/1</A><BR>2172&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2172 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; hrtimer_nanosleep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/atd<BR>2192&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2192 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; hrtimer_nanosleep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/cron<BR>2206&nbsp; 2163&nbsp; 2206 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -bash<BR>2211&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2211 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/apache2 -k start<BR>2228&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2228 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty1<BR>2229&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2229 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty2<BR>2230&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2230 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty3<BR>2231&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2231 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty4<BR>2232&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2232 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty5<BR>2233&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 2233 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss+&nbsp; n_tty_read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /sbin/getty 38400 tty6<BR>2236&nbsp; 2211&nbsp; 2236 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accept&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/apache2 -k start<BR>2237&nbsp; 2211&nbsp; 2237 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accept&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/apache2 -k start<BR>2238&nbsp; 2211&nbsp; 2238 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accept&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/apache2 -k start<BR>2239&nbsp; 2211&nbsp; 2239 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accept&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/apache2 -k start<BR>2240&nbsp; 2211&nbsp; 2240 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; inet_csk_accept&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/apache2 -k start<BR>2276&nbsp; 2163&nbsp; 2276 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 Ss&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -bash<BR>2280&nbsp; 2276&nbsp; 2280 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.1 S+&nbsp;&nbsp; poll_schedule_timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; top<BR>2491&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 2491 TS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp; 0&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; bdi_writeback_task&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [flush-8:0]<BR>2508&nbsp; 2206&nbsp; 2508 B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; -&nbsp; 19&nbsp;&nbsp; 0 85.6 R&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /bin/sh ./chewer<BR>2509&nbsp; 2508&nbsp; 2509 B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; -&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /bin/sh ./chewer<BR>2510&nbsp; 2509&nbsp; 2510 B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; -&nbsp; 19&nbsp;&nbsp; 0&nbsp; 0.0 S&nbsp;&nbsp;&nbsp; hrtimer_nanosleep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep 50</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  ><STRONG>6)chrt命令</STRONG></FONT></P>  <P><FONT size="3"  >chrt命令的用法:<BR>可以指定进程的调度方法<BR>6.1)--fifo or -f 表示先入先出策略<BR>例如:<BR>chrt --fifo 50 ./chewer &amp;</FONT></P>  <P><FONT size="3"  >6.2)--rr or -r 表示时间片策略<BR>例如:<BR>chrt --rr 50 ./chewer &amp;</FONT></P>  <P><FONT size="3"  >6.3)--batch or -b 表示批处理或空闲的策略<BR>例如:<BR>chrt --batch 0 ./chewer &amp;</FONT></P>  <P><FONT size="3"  >6.4)--other or -o 表示普通的分时进程<BR>chrt --other 0 ./chewer &amp;</FONT></P>  <P><FONT size="3"  >--max or -m 可以打印出chrt分配优先级的范围<BR>chrt --max</FONT></P>  <P><FONT size="3"  >6.5)--pid or -p 可以打印出进程的调度策略及优先级</FONT></P>  <P><FONT size="3"  >chrt&nbsp; -p 2537<BR>pid 2537's current scheduling policy: SCHED_RR<BR>pid 2537's current scheduling priority: 50</FONT></P>  <P><FONT size="3"  ><BR>6.6)用chrt命令测试优先级的抢占</FONT></P>  <P><FONT size="3"  >根据上面的论述,高的优先级进程抢占低的优先级的进程,之所以用FIFO的策略,优先级别为50,会造成死机,这个进程的策略是最高的.<BR>而又没有进程的优先级超过它,它自己又不会放弃或阻塞,所以会死机</FONT></P>  <P><FONT size="3"  >那我们用更高的优先级来KILL它,可以吗?<BR>答案是可以的.<BR>还是那个程序.首先用时间片策略调度程序,优先级为50<BR>chrt -r 50 ./chewer &amp;</FONT></P>  <P><FONT size="3"  >再用chrt指定它为fifo的策略,优先级为60,2563为它的进程号<BR>chrt -f -p 60 2563</FONT></P>  <P><FONT size="3"  >我们用ps查询sleep的PID为2565<BR>ps -eo pid,ppid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,command<BR>2565&nbsp; 2564&nbsp; 2565 RR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp; -&nbsp; 90&nbsp;&nbsp; 0&nbsp; 0.0 R&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep 50</FONT></P>  <P><FONT size="3"  >再用chrt指定sleep的优先级为70<BR>chrt -f -p 70 2565</FONT></P>  <P><FONT size="3"  >这时程序在50秒后,就退出了.因为sleep是最高的,它kill掉了chewer</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  >&nbsp;</FONT></P>  <P><FONT size="3"  ><STRONG>7)调度策略的总结</STRONG></FONT></P>  <P><FONT size="3"  >在进程调度中有四种方法,也就是四种类型的宏</FONT></P>  <P><FONT size="3"  >普通的分时策略&nbsp;&nbsp;&nbsp; TS&nbsp; SCHED_OTHER<BR>实时FIFO的策略&nbsp;&nbsp;&nbsp; FF&nbsp; SCHED_FIFO<BR>实时时间片策略&nbsp;&nbsp;&nbsp; RR&nbsp; SCHED_RR<BR>普通批处理策略&nbsp;&nbsp; B&nbsp; SCHED_BATCH</FONT></P>  <P><FONT size="3"  >在三种状态可以在ps 命令的CLS列查出来<BR>例如:<BR>ps -eo pid,ppid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,command</FONT></P><FONT size="3"  >class代表CLS列<BR>trprio代表实时优先级<BR>ni代表nice,(在实时进程中无意思,所以为-)<BR>pri代表绝对优先级,也就是有效优先级,在实时进程来说,绝对优先级是大于40<BR>例如:指定fifo的优先级为1,绝对优先级就是41<BR>chrt -f 1 ps -C ps -o pri,ni,rtprio,comm<BR>PRI&nbsp; NI RTPRIO COMMAND<BR>41&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 ps<BR>wchan:14代表操作系统调用,14代表宽度为14个字符</FONT></DIV></TD></TR></TABLE><BR>-------------------------</P>  <P><STRONG><FONT color="#295200"  size="5"  >关于程序的执行顺序nice renice</FONT></STRONG> </P>  <P>关于程序的执行顺序：<BR>　　还记得我们提过的多人多工环境吧？因为目前的 x86 平台的 CPU 可以做到多工的行为， 所以，我们的 Linux 可以在 x86 上面‘同时进行多个工作’的呢！那么多个工作是如何进行的呢？ 其实每个工作都会进入到 CPU 的工作排程当中，并等待 CPU 来执行， 而 CPU 会根据每个工作的优先执行序 (priority) 来判断谁比较重要， 所以某个工作就可能会比较优先被执行完毕啦！<BR><BR>　　也就是说， Linux 系统中，每个 process 都会拥有一个所谓的‘优先执行序 (priority)’的属性， 利用该属性来让 CPU 判断那个工作是比较重要的，那个工作在一群工作当中就会优先被执行， 也让系统资源可以分配的更恰当。我们可以使用 ps 还观察优先执行序：<BR><BR>　　[root@linux ~]# ps -l<BR>　　F S&nbsp;&nbsp; UID&nbsp;&nbsp; PID&nbsp; PPID&nbsp; C PRI&nbsp; NI ADDR SZ WCHAN&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD<BR>　　0 S&nbsp;&nbsp;&nbsp;&nbsp; 0 18851 18827&nbsp; 0&nbsp; 77&nbsp;&nbsp; 0 -&nbsp; 1302 wait&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 su<BR>　　4 S&nbsp;&nbsp;&nbsp;&nbsp; 0 18852 18851&nbsp; 0&nbsp; 76&nbsp;&nbsp; 0 -&nbsp; 1349 wait&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 bash<BR>　　4 R&nbsp;&nbsp;&nbsp;&nbsp; 0 19510 18852&nbsp; 0&nbsp; 76&nbsp;&nbsp; 0 -&nbsp; 1111 -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 ps<BR><BR>　　其中，<SPAN style="FONT-WEIGHT: bold;"  >那个 PRI 就是 Priority 的简写，而 NI 是 nice 的简写，</SPAN>这两个东西是凑在一起才产生目前的 PRI 值的！ PRI 越小时，代表该程序可以具有‘越早被优先执行’的意思，只是 PRI 是由系统动态产生的， 并不会是一直固定的值喔。至于那个 NI (nice) 则是我们操作值额外给予的一个数值， 他可以影响 PRI 的值，基本上，他的相关性是这样的：<BR><BR>　　* PRI(new) = PRI(old) + nice<BR><BR>　　不过您要特别留意到，如果原本的 PRI 是 50 ，并不是我们给予一个 nice = 5 ，就会让 PRI 变成 55 喔！ 因为 PRI 是系统‘动态’决定的，所以，虽然 nice 值是可以影响 PRI ，不过， 最终的 PRI 仍是要经过系统分析后才会决定的。另外， nice 值是有正负的喔，而既然 PRI 越小越早被执行， 所以，当 nice 值为负值时，那么该程序就会降低 PRI 值，亦即会变的较优先被处理。此外，您必须要留意到：<BR><BR>　　* 一般使用者的 nice 值为 0 ~ 19 ；<BR>　　* root 可用的 nice 值为 -20 ~ 19 ；<BR>　　* 一般使用者仅可将 nice 值越调越高，如果本来 nice 为 5 ，则未来仅能调整到大于 5 的 nice ；<BR>　　* 一般使用者仅能调整属于自己的程序的 nice 值。<BR><BR>　　这也就是说，要调整某个程序的优先执行序，就是‘调整该程序的 nice 值’啦！那么如何给予某个程序 nice 值呢？有两种方式，分别是：<BR><BR>　<SPAN style="FONT-WEIGHT: bold;"  >　* 一开始执行程式就立即给予一个特定的 nice 值：用 nice 指令；</SPAN><BR style="FONT-WEIGHT: bold;"  ><SPAN style="FONT-WEIGHT: bold;"  >　　* 调整某个已经存在的 PID 的 nice 值：用 renice 指令。</SPAN><BR><BR><BR>　　# nice<BR><BR>　　[root@linux ~]# nice [-n] command<BR>　　参数：<BR>　　-n&nbsp; ：后面接一个数值，数值的范围 -20 ~ 19。<BR>　　范例：<BR><BR>　　范例一：用 root 给一个 nice 植为 -5 ，用于执行 vi ，并观察该程序！<BR>　　[root@linux ~]# nice -n -5 vi &amp;<BR>　　[1] 19542<BR>　　[root@linux ~]# ps -l<BR>　　F S&nbsp;&nbsp; UID&nbsp;&nbsp; PID&nbsp; PPID&nbsp; C PRI&nbsp; NI ADDR SZ WCHAN&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD<BR>　　0 S&nbsp;&nbsp;&nbsp;&nbsp; 0 18851 18827&nbsp; 0&nbsp; 77&nbsp;&nbsp; 0 -&nbsp; 1302 wait&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 su<BR>　　4 S&nbsp;&nbsp;&nbsp;&nbsp; 0 18852 18851&nbsp; 0&nbsp; 76&nbsp;&nbsp; 0 -&nbsp; 1349 wait&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 bash<BR>　　4 T&nbsp;&nbsp;&nbsp;&nbsp; 0 19542 18852&nbsp; 0&nbsp; 72&nbsp; -5 -&nbsp; 1063 finish pts/0&nbsp;&nbsp;&nbsp; 00:00:00 vi<BR>　　4 R&nbsp;&nbsp;&nbsp;&nbsp; 0 19543 18852&nbsp; 0&nbsp; 77&nbsp;&nbsp; 0 -&nbsp; 1110 -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 ps<BR><BR>　　就如同前面说的， nice 是用来调整程序的执行优先顺序！这里只是一个执行的范例罢了！ 通常什么时候要将 nice 值调大呢？举例来说，系统的背景工作中， 某些比较不重要的程序之进行：例如备份工作！由于备份工作相当的耗系统资源， 这个时候就可以将备份的指令之 nice 值调大一些，可以使系统的支援分配的更为公平！<BR><BR>　　# renice<BR><BR>　　[root@linux ~]# renice [number] PID<BR>　　参数：<BR>　　PID ：某个程序的 ID 啊！<BR>　　范例：<BR><BR>　　范例一：以上面 nice 范例中 ps -l 的结果，将 18852 那个 PID 修改 nice 为 10<BR>　　[root@linux ~]# renice 10 18852<BR>　　18852: old priority 0, new priority 10<BR>　　[root@linux ~]# ps -l<BR>　　F S&nbsp;&nbsp; UID&nbsp;&nbsp; PID&nbsp; PPID&nbsp; C PRI&nbsp; NI ADDR SZ WCHAN&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD<BR>　　0 S&nbsp;&nbsp;&nbsp;&nbsp; 0 18851 18827&nbsp; 0&nbsp; 77&nbsp;&nbsp; 0 -&nbsp; 1302 wait&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 su<BR>　　4 S&nbsp;&nbsp;&nbsp;&nbsp; 0 18852 18851&nbsp; 0&nbsp; 85&nbsp; 10 -&nbsp; 1349 wait&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 bash<BR>　　4 R&nbsp;&nbsp;&nbsp;&nbsp; 0 19593 18852&nbsp; 0&nbsp; 87&nbsp; 10 -&nbsp; 1111 -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pts/0&nbsp;&nbsp;&nbsp; 00:00:00 ps<BR><BR>　　如果要调整的是已经存在的某个 process 的话，那么就得要使用 renice 了。使用的方法很简单， renice 后面接上数值及 PID 即可。因为后面接的是 PID ，所以您务必要以 ps 或者其他程序观察的指令去找出 PID 才行啊！<BR><BR>　　刚好，由上面这个范例当中我们也看的出来，虽然修改的是 bash 那个 PID 为 18852 的程序， 但是该程序所触发的 ps 指令当中的 PID 同样的也有一个 nice = 10 的结果喔！ t解了吧？整个 nice 值是可以在父程序 --&gt; 子程序之间传递的呢！<BR><BR>　　另外，除了 renice 之外，其实那个 top 同样的也是可以调整 nice 值的！ top 也是可以调整已经存在的某个 process 的 nice 喔！<BR><BR></P></FONT></SPAN></div>
        <div class="nbw-blog-end"></div>

        <div>
		</div>

        <div>
		</div>

		<div>
      	  <div >
		  	<script type="text/javascript" id="wumiiRelatedItems"></script>
		  </div>
		</div>

        <div class="ptc phide ztag">
          <span class="ptcp">
            <span class="iblock bcmimg">&nbsp;</span>
            <span class="nbc-0 nbc-0-40 ptcmt ptcmt-2">评论这张</span>
          </span>
        </div>
		<div style="display:none" class="ptc phide ztag">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="http://b.bst.126.net/newpage/images/microblog.png?1" />
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>
        <div class="ptc phide">
          <a id="publishtolofter" class="toLofter" title="发布到LOFTER" target="_blank" hidefocus="true">&nbsp;</a>
        </div>
        
        <div style="display:none" class="ptc phide ztag">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="http://b.bst.126.net/newpage/images/microblog.png?1" />
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>


        <div class="nbw-act tbar fc03 clearfix">
          
          
          <div style="height:40px;line-height:40px;">
            <div class="pleft">
              <div class="pleft leftoperatebar">
                  <span class="fc07">阅读(<span id="$_spaniReadCount">1659</span>)</span><span class="sep fc07">|</span>
                  <span class="fc07">评论(<span id="$_spaniCommentCount">0</span>)</span>
	          </div>
            </div>
            <div class="pleft rdif">
              <span class="pleft sep sep-last fc07">|</span>
              <span style="display:none" id="$_shareToSites" class="fc07 pleft nas-tofix">分享到：</span><span class="nas-wrap pleft"><span id="$_shareBtn_163weibo" title="分享到网易微博" class="nas-itm nas-itm0">&nbsp;</span><span id="$_shareBtn_sinaweibo" title="分享到新浪微博" class="nas-itm nas-itm6">&nbsp;</span><span id="$_shareBtn_qqweibo" title="分享到腾讯微博" class="nas-itm nas-itm9">&nbsp;</span><span style="display:none" class="nas-itm nas-itm7" title="分享到MSN" id="$_shareBtn_msn">&nbsp;</span><span class="nas-itm nas-itm3" title="分享到QQ空间" id="$_shareBtn_qq">&nbsp;</span><span style="display:none" class="nas-itm nas-itm1" title="分享到人人网" id="$_shareBtn_renren">&nbsp;</span><span style="display:none" class="nas-itm nas-itm2" title="分享到开心网" id="$_shareBtn_kaixin">&nbsp;</span><span class="nas-itm nas-itm4" title="分享到豆瓣" id="$_shareBtn_douban">&nbsp;</span></span></span>
            </div>
            <div class="pright rightoperatebar">
              <span class="f-myLikeIcons likebtn pnt pright" id="$_spanLike">喜欢</span>
	            <span class="f-myLikeIcons recommendbtn pnt pright" id="$_spanRecommend">推荐</span>
	          <span style="display:none" id="$_spanShowRecommend" class="pleft rdct  phide">
	            <span class="pleft ul fc03"><span id="$_spanRecommendCount">0</span>人</span><span class="pleft iblock icn0 icn0-722 nbw-tgl1 nas-icn0fix">&nbsp;</span><span class="pleft iblock icn0 icn0-621 nbw-tgl0 nas-icn0fix">&nbsp;</span><span class="fc07"></span>|&nbsp;
	          </span>
                <span class="f-myLikeIcons reblogbtn pnt pright" id="$_spanCite">转载</span>
            </div>
          </div>
        </div>
      </div>
      <div class="snl">
        <div style="display:none" class="phide bdwb bds2 bdc0 rdcnt" id="$_divRecommendContent"></div>
        <div id="yodaoad" class="bdwb bds2 bdc0" style="display:none;_zoom:1;">&nbsp;</div>
        <div id="$_newOldBlogLinkBottomDiv" class='top fc03 clearfix'>
	     </div>
	    <div class="relateblog phide">
          <h4 class="bdwb bds2 bdc0 fc07 fs0">历史上的今天</h4>
          <div class="cnt ztag clearfix"></div>
        </div>
	    <div class="author">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">最近读者</h4>
	      <div class="cnt ztag clearfix"></div>
	    </div>
	    <div id="hotarea" class="hotarea author ">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">热度</h4>
	      <div id="hotlist" class="cnt clearfix"></div>
	    </div>
	    <div class="phide" id="yodaoad_1" style="_zoom:1;"></div>
	    <div id="loftertextlinkad" style="display:none;padding:0 6px 0 5px;">
	      <div style="height:40px;line-height:40px;margin:15px 0 15px 0;border:1px solid #d5d5d5;background:#ffffe1;text-align:left;">
	        <span style="float:right;height:20px;line-height:20px;padding:10px 16px 10px 0;color:#d7854e;cursor:pointer;">关闭</span>
	        <div style="padding-left:24px;color:#000;">玩LOFTER，免费冲印20张照片，人人有奖！&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="color:#d7854e;text-decoration:none;" href="http://www.lofter.com" target="_blank">我要抢&gt;</a></div>
	      </div>
	    </div>
	    <div class="comment">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">评论</h4>
	      <a name="blogComment" id="blogComment"></a>
	      <div class="ztag"></div>
	    </div>
	    <div class="phide" id="yodaoad_3" style="_zoom:1;"></div>
      </div>
      <div class="cite ztag fc03"></div>
    </div>
   </div>
  </div>
</div>
<div class="phide nb-init">
  <textarea name="js">
    this.p={  m:2,
              b:2,
              id:'fks_095071080083087065080084087095085086081068082094095066080',
              blogTitle:'linux进程调度浅析',
              blogAbstract:'  <P style=\"TEXT-ALIGN: left; PADDING-BOTTOM: 0pt; LINE-HEIGHT: 160%; MARGIN-TOP: 0pt; TEXT-INDENT: 21pt; PADDING-LEFT: 0pt; PADDING-RIGHT: 0pt; MARGIN-BOTTOM: 7.5pt; PADDING-TOP: 0pt;\"  \><SPAN style=\"FONT-FAMILY: \'Arial\'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: \'yes\';\"  \>操作系统要实现多进程，进程调度必不可少。</SPAN\><SPAN style=\"FONT-FAMILY: \'Arial\'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: \'yes\';\"  \><BR\></SPAN\><SPAN style=\"FONT-FAMILY: \'Arial\'; COLOR: #000000; FONT-SIZE: 10.5pt; mso-spacerun: \'yes\';\"  \>有人说，进程调度是操作系统中最为重要的一个部分。我觉得这种说法说得太绝对了一点，就像很多人动辄就说<SPAN style=\"FONT-FAMILY: Arial;\"  \>\"</SPAN\><SPAN style=\"FONT-FAMILY: 宋体;\"  \>某某函数比某某函数效率高</SPAN\><SPAN style=\"FONT-FAMILY: Arial;\"  \>XX</SPAN\><SPAN style=\"FONT-FAMILY: 宋体;\"  \>倍</SPAN\><SPAN style=\"FONT-FAMILY: Arial;\"  \>\"</SPAN\><SPAN style=\"FONT-FAMILY: 宋体;\"  \>一样，脱离了实际环境，这些结论是比较片面的。</SPAN\></SPAN\></P\>',
              blogTag:'',
              blogUrl:'blog/static/100768914201152072621773',
              isPublished:1,
              istop:false,
              type:2,
              modifyTime:1316825891221,
              publishTime:1308569433240,
              permalink:'blog/static/100768914201152072621773',
              commentCount:0,
              mainCommentCount:0,
              recommendCount:0,
              bsrk:-100,
              publisherId:0,
              recomBlogHome:false,
              currentRecomBlog:false,
              attachmentsFileIds:[],
              vote:{},
              groupInfo:{},
              friendstatus:'none',
              followstatus:'unFollow',
              pubSucc:'',
              visitorProvince:'',
              visitorCity:'',
              visitorNewUser:false,
              postAddInfo:{&quot;postAdSetting&quot;:{&quot;title&quot;:&quot;必胜客&quot;,&quot;linkUrl&quot;:&quot;http://g.163.com/a?CID=29495&amp;Values=3214368749&amp;Redirect=http://e.cn.miaozhen.com/r.gif?k=1014155&amp;p=4-7Oo0&amp;ae=1000778&amp;vo=3f900abb5&amp;vr=2&amp;rt=2&amp;ns=[M_ADIP]&amp;ni=[M_IESID]&amp;na=[M_MAC]&amp;o=http%3A%2F%2Fpizzahut.qq.com&quot;,&quot;imageUrl&quot;:&quot;http://img1.126.net/channel8/017284_290260_0714.swf&quot;,&quot;linkUrl2&quot;:&quot;&quot;,&quot;expireDay&quot;:&quot;3&quot;,&quot;modifyTime&quot;:&quot;1405304775795&quot;,&quot;imageUrl2&quot;:&quot;&quot;,&quot;targetProvince&quot;:&quot;&quot;,&quot;flashUrl&quot;:&quot;http://img1.126.net/channel8/017284_290260_0714.swf&quot;},&quot;isAdShow&quot;:true,&quot;postAdContent&quot;:{&quot;special&quot;:[{&quot;title&quot;:&quot;陈祥：大陆警察配枪用枪大升级&quot;,&quot;url&quot;:&quot;http://chenxiang8964.blog.163.com/blog/static/14738701220146145921673/&quot;},{&quot;title&quot;:&quot;桥本：前所未闻的犯罪事件&quot;,&quot;url&quot;:&quot;http://mikesakai.blog.163.com/blog/static/1353354892014614104131680/&quot;},{&quot;title&quot;:&quot;九哥：基金经理究竟多苦逼&quot;,&quot;url&quot;:&quot;http://imjiuge.blog.163.com/blog/static/236043109201461410157190/&quot;}],&quot;blog&quot;:[{&quot;title&quot;:&quot;开着游艇抓螃蟹大丰收&quot;,&quot;pic&quot;:&quot;http://img4.cache.netease.com/cnews/2014/7/15/2014071507380558566.jpg&quot;,&quot;url&quot;:&quot;http://blog.163.com/&quot;},{&quot;title&quot;:&quot;姚树洁：郭美美背后大佬不是干爹是亲爹？&quot;,&quot;url&quot;:&quot;http://blog.163.com/&quot;},{&quot;title&quot;:&quot;博导诱奸学生败德不违法？&quot;,&quot;url&quot;:&quot;http://bjnews.blog.163.com/blog/static/198844081201461412651845/&quot;},{&quot;title&quot;:&quot;美国根本就没有&amp;quot;野鸡大学&amp;quot;&quot;,&quot;url&quot;:&quot;http://xinluduwu.blog.163.com/blog/static/229863001201461562157430/&quot;},{&quot;title&quot;:&quot;东平自杀母亲以死倒逼真相&quot;,&quot;url&quot;:&quot;http://shiyanping.blog.163.com/blog/static/196044123201461411450524/&quot;},{&quot;title&quot;:&quot;中南海选调舞伴引全军整顿&quot;,&quot;url&quot;:&quot;http://kllrw.blog.163.com/blog/static/19258588820146149443517/&quot;}]}},
              mset:'000',
              mcon:'',
              srk:-100,
              remindgoodnightblog:false,
              isBlackVisitor:false,
              isShowYodaoAd:false,
              hostIntro:'',
              hmcon:'1',
              selfRecomBlogCount:'0',
              lofter_single:'<a hidefocus="true" target="_blank" href="http://www.lofter.com/regurs?flag=actreg&act=wangyiboke_20140529"><img onload="var nimg = new Image(); nimg.src=\'http://blog.163.com/newpage/images/analyse.png?lofter_single&t=\'+new Date().getTime()" border="0" src="http://imgcdn.ph.126.net/jngpCT66Tei9V405fx4-eg==/6608776266957018211.png"/></a>'
            }
  </textarea>
  <textarea name="jst" id="m-3-jst-1">
    {list a as x}
    {if !!x}
    <div class="iblock nbw-fce nbw-f40">
      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.visitorName}/">
      {if x.visitorName==visitor.userName}
      <img alt="${x.visitorNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.visitorName)}&r=${visitor.imageUpdateTime}"/>
      {else}
      <img alt="${x.visitorNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.visitorName)}"/>
      {/if}
      </a>
      <div class="cwd vname thide">
        {if x.moveFrom=='wap'}
          <a class="noul pnt" target="_blank" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome"><span title="来自网易手机博客" class="iblock wapIcon">&nbsp;</span></a>
        {elseif x.moveFrom=='iphone'}
          <a class="noul pnt" target="_blank"><span title="来自iPhone客户端" class="iblock iphoneIcon">&nbsp;</span></a>
        {elseif x.moveFrom=='android'}
          <a class="noul pnt" target="_blank"><span title="来自Android客户端" class="iblock androidIcon">&nbsp;</span></a>
        {elseif x.moveFrom=='mobile'}
          <a class="noul pnt" target="_blank" href="http://blog.163.com/services/emsblog.html?frompersonalbloghome"><span title="来自网易短信写博" class="iblock wapIcon">&nbsp;</span></a>
        {/if}
        <a class="fc03 m2a"  target="_blank" hidefocus="true" href="http://blog.163.com/${x.visitorName}/">
          ${fn(x.visitorNickname,8)|escape}
        </a>
      </div>
    </div>
    {/if}
    {/list}
  </textarea>
  <textarea name="jst" id="m-3-jst-2">
    {if !!a}
    <a target="_blank" href="http://blog.163.com/${a.userName}/"><img class="bdwa bdc0 pnt" onerror="this.src=location.f60" src="${fn1(a.userName)}"/></a>
    <a target="_blank" class="fc03 m2a" href="http://blog.163.com/${a.userName}/">${fn(a.nickname,8)|escape}</a>
    <div class="intro fc05">${a.selfIntro|escape}{if great260}${suplement}{/if}</div>
	    <div class="acts ztag"></div>
	  <div class="mbga phide xtag">
        <div class="mbgai">&nbsp;</div>
        <a class="fc03 xtag m2a" href="#" target="_blank"></a>
      </div>
    {/if}
  </textarea>
  <#--最新日志，群博日志-->
  <textarea name="jst" id="m-3-jst-3">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="${furl()}${x.permalink}/?latestBlog">${fn(x.title,26)|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--推荐日志-->
  <textarea name="jst" id="m-3-jst-4">
    <p class="fc06">推荐过这篇日志的人：</p>
    <div>
      {list a as x}
      {if !!x}
      <div class="iblock nbw-fce nbw-f40">
        <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.recommenderName}/">
        <img alt="${x.recommenderNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.recommenderName)}"/>
        </a>
        <div class="cwd thide">
          <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/${x.recommenderName}/">
            ${fn(x.recommenderNickname,6)|escape}
          </a>
        </div>
      </div>
      {/if}
      {/list}
    </div>
    {if !!b&&b.length>0}
    <p  class="fc06">他们还推荐了：</p>
    <ul>
    {list b as y}
      {if !!y}
        <li class="rrb"><span class="iblock">&#183;</span><a class="fc03 m2a" target="_blank" href="http://blog.163.com/${y.recommendBlogPermalink}/?from=blog/static/100768914201152072621773">${y.recommendBlogTitle|escape}</a></li>
      {/if}
    {/list}
    </ul>
    {/if}
  </textarea>
  <#--引用记录-->
  <textarea name="jst" id="m-3-jst-5">
    <span class="pleft fc07">转载记录：</span>
    <ul class="tbac">
    {list d as x}
      <li class="clearfix">
        <span class="pleft iblock">&#183;</span>
        <div class="tbl thide pleft"><span><a target="_blank" class="fc07 m2a" href="${x.referBlogUrl}">${x.referBlogTitle|escape}</a></span></div>
        <div class="tbr pleft"><span><a target="_blank" class="fc07 m2a" href="${x.referHomePage}">${x.referUserName|escape}</a></span></div>
      </li>
    {/list}
    </ul>
  </textarea>
  <#--博主推荐-->
  <textarea name="jst" id="m-3-jst-6">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/${x.userName}/${x.permalink}/?recommendBlog" title="${x.title|default:""|escape}">${x.title|default:""|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--随机阅读-->
  <textarea name="jst" id="m-3-jst-7">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/${x.userName}/${x.permalink}/?personalRecomBlog" title="${x.title|default:""|escape}">${x.title|default:""|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--首页推荐-->
  <textarea name="jst" id="m-3-jst-8">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" target="_blank" href="${x.blogUrl|default:""|escape}?recommendReader" title="${x.blogTile|default:""|escape}">${x.blogTile|default:""|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--历史上的今天-->
  <textarea name="jst" id="m-3-jst-10">
    <ul>
      {list a as x}
      {if x_index>4}{break}{/if}
      {if !!x}
        <li class="thide fc03">
          <a class="m2a" target="_blank"  href="http://blog.163.com/${x.userName}/${x.permalink|default:""}"  title="${x.title|default:""|escape}">${fn1(x.title,60)|escape}</a><span class="fc07">${fn2(x.publishTime,'yyyy-MM-dd HH:mm:ss')}</span>
        </li>
      {/if}
      {/list}
    </ul>
  </textarea>
  <#--被推荐日志-->
  <textarea name="jst" id="m-3-jst-11">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="${furl()}${x.permalink}/">${fn(x.title,26)|escape}</a></li>
    {/if}
    {/list}
  </textarea>
    <#--上一篇，下一篇-->
  <textarea name="jst" id="m-3-jst-12">
     {if !!(blogDetail.preBlogPermalink)}
       <span class="ilft iblock icn0 icn0-620">&nbsp;</span>
       <div class="pleft thide"><a class="m2a"  href="http://zhumeng8337797.blog.163.com/${blogDetail.preBlogPermalink}/">${blogDetail.preBlogTitle|escape}</a></div>
     {/if}
     {if !!(blogDetail.nextBlogPermalink)}
       <span class="irgt iblock icn0 icn0-619">&nbsp;</span>
       <div class="pright thide"><a class="m2a" href="http://zhumeng8337797.blog.163.com/${blogDetail.nextBlogPermalink}/">${blogDetail.nextBlogTitle|escape}</a></div>
     {/if}
  </textarea>
  <#-- 热度 -->
  <textarea name="jst" id="m-3-jst-13">
    {list a as x}
    {if !!x}
    <div class="hotItem iblock nbw-fce nbw-f40">
      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.publisherUsername}/">
      {if x.publisherUsername==visitor.userName}
      <img alt="${x.publisherNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.publisherUsername)}&r=${visitor.imageUpdateTime}"/>
      {else}
      <img alt="${x.publisherNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.publisherUsername)}"/>
      {/if}
      </a>
      <div class="cwd vname thide">
        <a class="fc03 m2a"  target="_blank" hidefocus="true" href="http://blog.163.com/${x.publisherUsername}/">
          ${fn(x.publisherNickname,8)|escape}
        </a>
      </div>
      <a class="f-myLikeIcons hottype {if x.type==1} js-liketype{elseif x.type==2} js-reblogtype{elseif x.type==3} js-sharetype{else}{/if}" target="_blank" hidefocus="true" href="http://blog.163.com/${x.publisherUsername}/">&nbsp;</a>
    </div>
    {/if}
    {/list}
  </textarea>
  <#--右边模块结构-->
  <textarea name="txt" id="m-3-txt-0">
    <div class="uinfo ztag"></div>
    <h4 class="fc07 fs0 ltt phide ztag">被推荐日志</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">最新日志</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">该作者的其他文章</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">博主推荐</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">随机阅读</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">首页推荐</h4>
    <ul class="ztag blst"></ul>
    <div class="more"><a target="_blank" class="fc03 m2a" href="http://blog.163.com">更多&gt;&gt;</a></div>
    <br/><br/>
    <div id="yodaoad_r" style="display:none;_zoom:1;"></div>
    <div id="lofter_single"></div>
    <div id="blogPublicAccount"></div>
  </textarea>
  <#--评论模块结构-->
  <textarea name="txt" id="m-3-txt-1">
    <div class="publish ztag"></div>
    <div class="bdwt bds2 bdc0 phide" id="yodaoad_2" style="_zoom:1;"></div>
    <div class="ztag bdwt bds2 bdc0">
      <div class="case"></div>
      <div class="clearfix"></div>
    </div>
  </textarea>
  <#--引用模块结构-->
  <textarea name="jst" id="m-3-txt-2">
     <div class="close">
       <span class="ztag iblock icn0 icn0-57">&nbsp;</span>
     </div>
	 <div class="ztag phide"></div>
  </textarea>
    <#--博主发起的投票-->
  <textarea name="jst" id="m-3-txt-3">
    {list a as x}
    {if !!x}
      <li>
      <a href="http://blog.163.com/${x.userName}/" target="_blank" class="m2a fc03">${x.nickName|escape}</a>&nbsp;&nbsp;投票给
        {var first_option = true;}
        {list x.voteDetailList as voteToOption}
            {if voteToOption==1}
              {if first_option==false},{/if}&nbsp;&nbsp;“${b[voteToOption_index]}”&nbsp;&nbsp;
            {/if}
        {/list}
        {if (x.role!="-1") },“我是${c[x.role]}”&nbsp;&nbsp;{/if}
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="fc07">&nbsp;&nbsp;&nbsp;&nbsp;${fn1(x.voteTime)}</span>
        {if x.userName==''}{/if}
    {/if}
    {/list}
  </textarea>
</div>

<script type="text/javascript">
var wumiiPermaLink = "http://blog.163.com/zhumeng8337797/blog/static/100768914201152072621773/"; //文章的永久链接，作为文章的唯一标识
var wumiiTags = ""; //文章标签，以英文逗号分隔，如："标签1,标签2"
var wumiiSitePrefix = "http://blog.163.com/zhumeng8337797/"; //博客的主页地址，作为博客的唯一标识
var wumiiParams = "&num=5&mode=3&pf=blog163"; //num为默认显示的相关文章数目，mode为默认的显示模式（1为文字，2为图片，3为自动）
</script>
<script type="text/javascript" src="http://widget.wumii.com/ext/relatedItemsWidget.htm"></script>
</div>
      <div class="l cl h100">&nbsp;</div>
      <div class="r cr h100">&nbsp;</div>
    </div>
    <div class="nb-mb lcr bh space">
      <div class="l bl bh">&nbsp;</div>
      <div class="r br bh">&nbsp;</div>
      <div class="c bc bh lcr">&nbsp;</div>
    </div>
  </div>

</div>
      <div class="l wl g lg h100">&nbsp;</div>
      <div class="l wl t lt">&nbsp;</div>
      <div class="l wl b lb">&nbsp;</div>
      <div class="r wr g rg h100">&nbsp;</div>
      <div class="r wr t rt">&nbsp;</div>
      <div class="r wr b rb">&nbsp;</div>
    </div>
  </div>
  <div class="nb-are nb-smb"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
<div class="nb-are nb-fot">
  <div class="wkg h">
    <h2>页脚</h2>
    <div class="k">      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/index_gb.html">公司简介</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://gb.corp.163.com/gb/contactus.html">联系方法</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/job/job.html">招聘信息</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://help.163.com/?b13abk1">客户服务</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/legal/legal.html">隐私政策</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/public/theme/">博客风格</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/services/wapblog.html">手机博客</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/vip.do">VIP博客</a>
      
      <link rel="alternate" type="application/rss+xml" title="RSS" href="http://zhumeng8337797.blog.163.com/rss/"/>
      <span class="p fc10">-</span><span class="fc08" id="$_foot_subscribe"><span class="iblock m2a icn0 icn0-919">&nbsp;</span><a class="m2a fc08">订阅此博客</a></span>
    </div>
    <p class="fc08">网易公司版权所有&nbsp;&copy;1997-2014</p>
  </div>
</div></div>
    <!--[if lte IE 6]></div><![endif]-->
  <!--[if lte IE 6]></div><![endif]-->
  <div class="nb-layer" id="blog-163-com-layer"></div>
  <div class="nb-tpl nb-init phide" id="blog-163-com-template" style="display:none;">  <textarea rows="1" cols="1" name="jst" id="nb-jst-a1">  <a rel="nofollow" class="pr" target="_blank" href="http://help.163.com/special/007525FT/blog.html?b13aze1">帮助</a>
  <span class="fr iblock space icn1 icn1-4">&nbsp;</span>
  <a class="pr" target="_blank" href="http://blog.163.com/activation.do?host=activation&&username=${u}">${u}</a>
</textarea>
  <textarea rows="1" cols="1" name="jst" id="nb-jst-d0">      {list wl as x}
        <div class="grp">${x.g}</div>
        {list x.l as y}
        <a class="itm noul" href="#" hidefocus="true" name="{if typeof(y.v)=='string'}${y.v}{else}${y_index}{/if}">${y.n}</a>
        {/list}
      {/list}
</textarea>
  <textarea rows="1" cols="1" name="jst" id="nb-jst-d1">	{if defined('wl')}
        {list wl as x}<a class="itm noul" href="#" hidefocus="true" name="${x.v}">${x.n}</a>{/list}
    {/if}
</textarea>
</div>
<script type="text/javascript">
  window.N = {tm:{'zbtn':'nbtn',
                  'bdc0':'bdc0','bdc2':'bdc1',
				  'bgc0':'bgc0','bgc1':'bgc1','bgc2':'bgc2','bgh0':'bgc9',
				  'fc00':'fc03','fc01':'fc04','fc02':'fc05','fc03':'fc06','fc04':'fc07','fc05':'fc09'}};
  Date.servTime = '07/15/2014 16:28:52';
  location.api = 'http://api.blog.163.com/';
  location.msg = 'http://api.blog.163.com/msg/dwr';
  location.dwr = 'http://api.blog.163.com/zhumeng8337797/dwr';
  location.vcd = 'http://api.blog.163.com/cap/captcha.jpgx?parentId=100768914&r=';
  location.mrt = 'http://b.bst.126.net/newpage/style/mbox/';
  location.fce = 'http://os.blog.163.com/common/ava.s?host=';
  location.fce2= 'http://os.blog.163.com/common/ava.s?host=';
  location.passportfce = 'http://os.blog.163.com/common/ava.s?passport=';
  location.fpr = 'http://b.bst.126.net/common/portrait/face/preview/';
  location.f60 = 'http://b.bst.126.net/common/face60.png';
  location.f140= 'http://b.bst.126.net/common/face140.png';
  location.f40 = location.f140;
  location.adf140= 'http://b.bst.126.net/common/admireface140.png';
  location.ept = 'http://b.bst.126.net/common/empty.png';
  location.guide_profile_add= 'http://b.bst.126.net/common/guide_profile_add.gif';
  location.phtoto_dream = 'http://photo.dream.163.com/blog/writeBlogCallback.do';
  window.CF = {
    ca:false
   ,cb:''
   ,cc:false
   ,cd:false
   ,ce:'-3'
   ,ck:0
   ,ci:['api.blog.163.com'
       ,'http://photo.163.com/photo/html/crossdomain.html?t=20100205'
        
        ,'ud.blog.163.com'
        
        
        
        ]
   ,cj:[-3]
   ,cl:''
   ,cm:["","blog/","album/","music/","collection/","friends/","profile/","pprank/"]
   ,cf:0
   ,co:{pv:false
       ,ti:4191
       ,tn:''
       ,tc:0
       ,tl:3
       ,ut:0
       ,un:''
       ,um:''
       ,ui:0
       ,ud:false}
   ,cp:{nr:0
       ,cr:0
       ,vr:-100
       ,fr:0}
   ,cs:0
   ,ct:{'nav':['首页','日志','相册','音乐','收藏','博友','关于我'],'enabled':[0,1,6],'defaultnav':parseInt('1111111',2)}
   ,cu:false
   ,cv:false
   ,cw:false
  };
  window.UD = {};
  UD.host = {
      userId:100768914
     ,userName:'zhumeng8337797'
     ,nickName:'zhuzhu'
     ,imageUpdateTime:1258611355649
     ,baseUrl:'http://zhumeng8337797.blog.163.com/'
     ,gender:'他'
     ,email:'zhumeng8337797@163.com'
     ,photo163Name:'zhumeng8337797'
     ,photo163HostName:'zhumeng8337797'
     ,TOKEN_HTMLMODULE:''
     ,isMultiUserBlog:false
     ,isWumiUser:true
     ,sRank:-100
  };
</script>
    <script type="text/javascript" src="http://b1.bst.126.net/newpage/r/j/pc.js?v=1404703241875"></script>
    <script type="text/javascript" src="http://b1.bst.126.net/newpage/r/j/m/m-3/pm.js?v=1404703241875"></script>
  <script src="http://analytics.163.com/ntes.js" type="text/javascript"></script>
  <script type="text/javascript">
    _ntes_nacc='blog';neteaseTracker();
    
    new Image().src = 'http://blog.163.com/newpage/images/analyse.png?s=p&t='+new Date().getTime();
  </script>

<script type="text/javascript">
    window.setTimeout(function(){
			J.loadScript('http://music.ph.126.net/ph.js?001');
			
			J.postDataByDWR(location.dwr,'MusicBeanNew','setCopyrightMusicSessionToken',false);
	},1000);
</script>

    <script type="text/javascript" src="/newpage/prettycode/prettify.js"></script>
</body>
</html>
