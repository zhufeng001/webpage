<html><head><title>【转】Ubuntu 10.10 桌面定制系统LiveCD制作_梦中化仙~_百度空间</title><meta http-equiv=content-type content="text/html; charset=GBK"><link rel=alternate type="application/rss+xml" title="订阅该空间的博客文章" href="http://hi.baidu.com/flashgive/rss"><style type="text/css">.error{color:#F00;font-size:12px}.shareUser,.shareLastEditor{line-height:20px;color:#666;text-align:left}.shareLastEditor{margin:5px 0 8px}</style><script>
	    var g_pageTimerStart=new Date().getTime();
	</script><script src="http://hi.bdimg.com/static/cblog/js/other/global.js?v=009301b8.js"></script><script src="http://hi.bdimg.com/static/cblog/js/other/libs.js?v=48b209f9.js"></script><script src="http://img.baidu.com/js/tangram-1.1.0.js?v=1334907755.js"></script><script>
var Session = {
    isLogin: true,
    isHost: 0,
    loginStatus : 2,
    userName: "flashgive",   
    userPortrait:'d940666c617368676976651304',
    spaceURL: "\/flashgive",
    spBasicURL:"http:\/\/hi.baidu.com\/flashgive",
    spBasicURLEnc:"http%3A%2F%2Fhi.baidu.com%2Fflashgive",
    visitorName:    "zhu__feng001",
    visitorPortrait:'a0a27a68755f5f66656e673030314312',
    isActive: '1',   /*{cmt 访问者是否激活空间}*/
    visitorURL: "\/zhu__feng001",        // 
    pageURL: "http://hi.baidu.com\/flashgive\/blog\/item\/7266600172c239121c9583bb.html",    
    refer: "",
    spToken: '91289ab5418b67c38c2b75c03e37e41f', 
    spFriendDomain: 'http://frd.baidu.com',
    spSpaceDomain: 'http://hi.baidu.com',
    spPortraitDomain: 'http://tx.bdimg.com',
    spSpaceStaticDomain: 'http://hi.bdimg.com', /*{cmt TODO RD似乎还不有提供这个变量，记得补成呀！}*/
    spImgDomain : 'http://img.baidu.com',
    spStaticDomain : 'http://hi.bdimg.com',

    isDrag: false  /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isProfile: false   /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isPortraitVerify:!true
    };
</script></head><body> <script>
/*<![CDATA[*/
if(top.location != self.location){
	top.location = self.location;
}
var myref = encodeURIComponent("http://hi.baidu.com\/flashgive\/blog\/item\/7266600172c239121c9583bb.html");
/*]]>*/
</script><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods.css?v=774e31a7.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods_datauri.css?v=a1661a70.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hitn.bdimg.com/2402050202/css/item/a19c3f24bba5e3338644f9a3.css"><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space.css?v=674c899c.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space_datauri.css?v=b27686c7.css"><!--<![endif]--><div class=userbar><center> <div id=nav><a class=logo href=http://hi.baidu.com/index.htm><img src=http://img.baidu.com/hi/logo/logo_93_30.gif border=0 alt="百度空间"></a> <ul class=topmenu><li><a href="/zhu__feng001/ihome">个人中心</a><li class=vline><li><a href="/zhu__feng001/home" >我的主页</a><li class=vline><li><a href="/zhu__feng001/ihome/frdme">好友</a><li class=vline><li id=topMsgLi><a href="http://hi.baidu.com/msg/index" id=topMsgTab>消息</a> </ul> <dl class=manage> <dd id=tary_space_name class=nolink>zhu__feng001<dt>|<dd id=user_disguise_link><a href="/zhu__feng001/modify/spmodules/0">装扮</a><dt id=user_disguise_l>|<dd><a href="/zhu__feng001/ihome/basicconfig">设置</a><dt>| <dd><a href="https://passport.baidu.com/?logout&bdstoken=91289ab5418b67c38c2b75c03e37e41f&u=">退出</a></dl> </div></center></div><script src="http://hi.bdimg.com/static/base/js/conf/base.js?v=1334907755.js"></script><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/base/css/base.css?v=1334907755.css"><script>			
		(function(){
			function initMessage(){
				Space.msgConfig={
					staticDomain:'http://hi.bdimg.com'
					,portraitDomain:'http://tx.bdimg.com'
					,appsDomain:'http://apps.hi.baidu.com'
					,domain:'http://hi.baidu.com'
					,userPortrait:"a0a27a68755f5f66656e673030314312"
					,userName:"zhu__feng001"
					,spToken:"91289ab5418b67c38c2b75c03e37e41f"
					,spaceUrl:"\/zhu__feng001"
					,pageType:"blog"
				};
				if(Space.msgConfig.spaceUrl.indexOf("/")==0) {
					Space.msgConfig.spaceUrl = Space.msgConfig.spaceUrl.substr(1);
				}

				var job = new Space.Libs.Jobs();
				job.add("message_tip");
				job.start();
			}
			
			if(window.addEventListener){
				window.addEventListener('load', initMessage, false );
			}else if(window.attachEvent){
				window.attachEvent('onload', initMessage);
			}
		})();
	</script><script language=javascript src="http://hi.bdimg.com/static/cblog/js/ui/dialog.js?v=f1d92f7b.js"></script><center><div id=main align=left><!--[if IE]><script>
var objmain = document.getElementById("main");
function updatesize(){ var bodyw = window.document.body.offsetWidth; if(bodyw <= 790) objmain.style.width="772px"; else if(bodyw >= 1016) objmain.style.width="996px"; else objmain.style.width="100%"; }
updatesize(); window.onresize = updatesize;
</script><![endif]--><div id=header><div class=lc><div class=rc></div></div><div class=tit><a href="/flashgive" class=titlink title="flashgive的空间 http://hi.baidu.com/flashgive">梦中化仙~</a></div><div class=desc>春色无边上苑深，回头醉眼月氤氲；前身不觉红颜老，千古任凭风露尘。</div><div id=tabline>&nbsp;</div><div id=tab><a href="http://hi.baidu.com/flashgive/home">主页</a><a href="http://hi.baidu.com/flashgive/blog" class=on>博客</a><a href="http://hi.baidu.com/flashgive/album">相册</a><span>|</span><a href="http://hi.baidu.com/flashgive/profile">个人档案</a><span>|</span><a href="http://hi.baidu.com/flashgive/friends">好友</a><span>|</span><a href="http://tieba.baidu.com/i/sys/jump?un=flashgive&fr=spacebar" onclick="BdUtil.ns_trackerLink('m_20110330_spacebar','')" target=_blank>i贴吧</a></div></div><div class=stage><div class=stagepad><div style="width:100%"><table width="100%" border=0 cellspacing=0 cellpadding=0 class=modth><tr><td class=modtl width=7>&nbsp;<td class=modtc nowrap><div class=modhead><span class=modtit>查看文章</span></div><td class=modtc nowrap align=right><td class=modtr width=7>&nbsp;</table><div id=m_blog class=modbox style="overflow-x:hidden;"><div class=tit>【转】Ubuntu 10.10 桌面定制系统LiveCD制作</div><div class=date>2011年02月27日 星期日 下午 12:54</div><table style="table-layout:fixed;width:100%"><tr><td><div id=blog_text class=cnt><h1 class="title_txt"><cite class="fav_csdnstylebykimi"> </cite>
     
    </h1>
    <div class="blogstory">

     

     

     <p><br><span style="font-size: 16px;"></span></p><p><span style="font-size: 16px;">最近突发奇想，打算定制一个Ubuntu 10.10桌面最小系统，并且将其制成LiveCD。以下是我的制作过程。</span></p>
<p><span style="font-size: 16px;">1.首先要下载ubuntu-10.10-alternate-i386.iso和ubuntu-10.10-desktop-i386.iso镜
像，之所以要用2个镜像是因为需要通过ubuntu-10.10-alternate-i386.iso来安装命令行系统，再在命令行的基础上安装X11
环境和GNOME环境，而ubuntu-10.10-desktop-i386.iso则是用来制作LiveCD。alternate版和desktop
版的区别在http://www.linuxdiyf.com/bbs/thread-64198-1-1.html有详细的介绍，主要就是安装原理的不
同desktop版相当于一个LiveCD，安装时就是从光盘将Ubuntu系统“恢复”到硬盘，而alternate版才是真正意义上的安装程序，并且
可以只安装命令行系统。</span></p>
<p><span style="font-size: 16px;">2.用ubuntu-10.10-alternate-i386.iso引导开机，选择好语言后，按F4选择安装模式为“安装命令行系统”，再按“安装Ubuntu”，就可以开始了。</span></p>
<p><span style="font-size: 16px;">3.安装完，重启后执行 $sudo apt-get update 更新源下载文件，再执行</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install openssh-server</span></p>
<p><span style="font-size: 16px;">安装ssh server，</span></p>
<p><span style="font-size: 16px;">4.下载并安装X-window环境，执行</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install x-window-system-core</span></p>
<p><span style="font-size: 16px;">5.再就要安装显卡驱动了，由于我用的VMWare虚拟机的显卡驱动已经被Ubuntu集成了，所以这一步可以跳过</span></p>
<p><span style="font-size: 16px;">6.安装GNOME桌面环境</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install gnome-core</span></p>
<p><span style="font-size: 16px;">安装gnome-core需要的包较多，可能会下载比较长的时间</span></p>
<p><span style="font-size: 16px;">7.安装Compiz窗口管理器</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install compiz</span></p>
<p><span style="font-size: 16px;">按道理这个不需要装的，但是不安装的话，ubuntu新开窗口不能移动，缩放。</span></p>
<p><span style="font-size: 16px;">8.安装输入法管理器与小企鹅输入法</span></p>
<p><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp; $sudo apt-get install im-switch</span></p>
<p><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp; $sudo apt-get install fcitx</span></p>
<p><span style="font-size: 16px;">某些情况下可能，在安装了fcitx输入法以后可能会出现和SCIM并存的问题，只要用im-switch把默认输入法改成fcitx就可以了：</span><br><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp; $sudo im-switch -a fcitx</span><br><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp; $im-switch -a fcitx</span></p>
<p><span style="font-size: 16px;">9.设置英语界面中文输入环境，如果不需要输入汉字的话，8、9两步可以省略</span></p>
<p><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp; $sudo vim.tiny /etc/environmont</span></p>
<p><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp; 添加LC_CTYPE=zh_CN.UTF-8</span></p>
<p><span style="font-size: 16px;">10.安装中文字体（如果执行了第8步，这一步可以省略）</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install ttf-arphic-uming</span></p>
<p><span style="font-size: 16px;">11.现在运行$sudo startx就可以进入Ubuntu的图形界面了。第一次进入界面，会看到"OAFILD:Gnome_FastUserSwitch Applet"的出错窗口，这实际上是一个快速切换用户的功能包，要解决的话，要执行</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install indicator-applet-session</span></p>
<p><span style="font-size: 16px;">12.再安装gdm这样下次重启就能直接进入GNOME界面了，</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install gdm</span></p>
<p><span style="font-size: 16px;">也可以把startx写到/etc/rc.d/local下</span></p>
<p><span style="font-size: 16px;">13.执行$sudo apt-get clean，再执行df -h可以看到装完整个系统用了大约1.2G的空间。</span></p>

<p><span style="font-size: 16px;">安装系统到此可以告一段落了，下面就可以开始制作LiveCD了。前文已经说过，ubuntu-10.10-desktop-i386.iso实际
上就是一个现成的LiveCD，我们只要利用它的结构，就可以方便快捷的生成自己的最小系统LiveCD了。这里主要做的事情是首先将已安装操作系统上的
文件备份成一个squashfs归档文件，然后将ubuntu-10.10-desktop-i386.iso里的内容拷贝出来，用新的squashfs
文件替换掉里面已有的文件，再调整一些配置，然后将其生成新的ISO文件，再将其刻录成CD或者制成USB引导盘，这个过程就算大功告成了。</span></p>
<p><span style="font-size: 16px;">1.将当前操作系统备份成squashfs归档文件，有很多工具，其中最简便的就数国内某大牛写的Live Ubuntu Backup 
V2.2了，尤其是它还支持中文提示，在http://forum.ubuntu.org.cn/viewtopic.php?f=21&amp;
t=206287&nbsp;&nbsp; 可以看到使用说明。这是一个shell脚本写成的Ubuntu备份工具，直接运行即可。</span></p>
<p><span style="font-size: 16px;">将lub拷贝到/home下，$sudo chmod 777 /home/lub 然后执行$sudo /home/lub 
-b，然后按e或c来选择是英文提示，还是中文提示。第一次执行时，可能会提示需要安装lupin-casper和squashfs-tools，其中
lupin-casper可以忽略，而squashfs-tools必须安装，运行$sudo apt-get install 
squashfs-tools即可。</span></p>
<p><span style="font-size: 16px;">之后再次运行$sudo /home/lub -b，依提示运行，就能在用户文件夹下生成一个backup-2011.01.05的目录了，其中有的backup-2011.01.05.squashfs文件就是我们想要的。</span></p>

<p><span style="font-size: 16px;">2.再将ubuntu-10.10-desktop-i386.iso拷贝到用户目录下，比如/home/jxg/下，</span></p>
<p><span style="font-size: 16px;">&nbsp; 创建一个目录，用来挂载ubuntu-10.10-desktop-i386.iso</span></p>
<p><span style="font-size: 16px;">$sudo mkdir /home/jxg/mnt ，</span></p>
<p><span style="font-size: 16px;">&nbsp; 将ISO挂载到/home/jxg/mnt下</span></p>
<p><span style="font-size: 16px;">$sudo mount -o loop /home/jxg/ubuntu-10.10-desktop-i386.iso /home/jxg/mnt</span></p>
<p><span style="font-size: 16px;">&nbsp; 创建一个livecd的工作目录</span></p>
<p><span style="font-size: 16px;">$sudo mkdri /home/jxg/livecd</span></p>
<p><span style="font-size: 16px;">&nbsp; 将mnt目录下casper/filesystem.squashfs以外的内容，同步的livecd工作目录上</span></p>
<p><span style="font-size: 16px;">$sudo rsync --exclude=/home/jxg/mnt/casper/filesystem.squashfs -a /home/jxg/mnt/ /home/jxg/livecd</span></p>
<p><span style="font-size: 16px;">下面，我们要对/home/jxg/livecd/casper/目录下的filesystem.squashfs、filesystem.manifest、filesystem.manifest-desktop这三个文件进行操作，由于它们只有读权限，所以先执行</span></p>
<p><span style="font-size: 16px;">$sudo chmod o+w /home/jxg/livecd/casper/filesystem.*</span></p>

<p><span style="font-size: 16px;">将刚才lub生成的那个backup-2011.01.05.squashfs文件，拷贝成/home/jxg/livecd/casper/filesystem.squashfs</span></p>
<p><span style="font-size: 16px;">执行：</span></p>
<p><span style="font-size: 16px;">$sudo cp /home/jxg/backup-2011.01.05/backup2011.01.05.squashfs /home/jxg/livecd/casper/filesystem.squashfs</span></p>
<p><span style="font-size: 16px;">此外，还要更新/home/jxg/livecd/casper/目录下的filesystem.manifest和filesystem.manifest-desktop，这两个文件实际上是LiveCD系统内所装包的列表，通过以下方式更新</span></p>
<p><span style="font-size: 16px;">$sudo dpkg -l | grep ii | awk '{print $2,$3}' &gt; /home/jxg/livecd/casper/filesystem.manifest</span></p>
<p><span style="font-size: 16px;">$sudo dpkg -l | grep ii | awk '{print $2,$3}' &gt; /home/jxg/livecd/casper/filesystem.manifest-desktop</span></p>
<p><span style="font-size: 16px;">实际上filesystem.manifest-desktop和filesystem.manifest是有所不同的，主要是少了
ubiquity casper live-initramfs user-setup discover1 xresprobe os-prober 
libdebian-installer4这几个包，这里我将其忽略了。</span></p>

<p><span style="font-size: 16px;">3.退回的LiveCD的工作目录 /home/jxg/livecd 下，</span></p>
<p><span style="font-size: 16px;">执行</span></p>
<p><span style="font-size: 16px;">$cd /home/jxg/livecd</span></p>
<p><span style="font-size: 16px;">$sudo rm md5sum.txt</span></p>
<p><span style="font-size: 16px;">$find -type f -print0 | sudo xargs -0 md5sum | grep -v ./isolinux/ | grep -v ./md5sum.txt | sudo tee md5sum.txt</span></p>
<p><span style="font-size: 16px;">更新原有的md5sum</span></p>

<p><span style="font-size: 16px;">4.将工作目录下的内容打包成ISO</span></p>
<p><span style="font-size: 16px;">安装ISO打包工具</span></p>
<p><span style="font-size: 16px;">$sudo apt-get install mkisofs</span></p>

<p><span style="font-size: 16px;">将livecd内的内容打成ISO包，执行</span></p>
<p><span style="font-size: 16px;">$sudo mkisofs -D -r -V "$IMAGE_NAME" -cache-inodes -J -l -b 
isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size
 4 -boot-info-table -o ../ubuntu-jxg-test.iso .</span></p>
<p><span style="font-size: 16px;">这个一定要在工作目录的跟下执行，并且命令最后的 . 一定不要忘记。命令完成后，就可以在上一级的目录下发现ubuntu-jxg-test.iso文件了,大小为407MB</span></p>

<p><span style="font-size: 16px;">总结，实际上我的制作过程中，对包的选择比较粗放，很多包比如 indicator-applet-session 、 gdm 
、fcitx包都可以不装，并且对linux的内核也没有裁剪，限于时间所限，目前只能做到这一步了，其实还有Ubuntu精简还有很大的潜力。我使用
LXDE替代GNOME制作了一个LiveCD包，只有350多M，过程参见&nbsp;&nbsp;</span><a href="http://blog.csdn.net/vah101/archive/2011/01/06/6119391.aspx"><span style="font-size: 16px;">基于LXDE的Ubuntu桌面最小系统LiveCD</span></a>
</p>

<p><span style="font-size: 16px;">参考文档：</span></p>
<p><span style="font-size: 16px;">最小化定制Ubuntu</span></p>
<p><span style="font-size: 16px;">http://keqi360.blog.163.com/blog/static/636039142009221112144993/</span></p>
<p><span style="font-size: 16px;">制作自己的Ubuntu安装盘</span></p>
<p><span style="font-size: 16px;">http://upc.gg.blog.163.com/blog/static/297984982010930644120/</span></p>
<p><span style="font-size: 16px;">从零开始构建Ubuntu LiveCD</span></p>
<p><span style="font-size: 16px;">http://shenqiubufu.blog.163.com/blog/static/1627924942010814101024134/</span></p>
<p><span style="font-size: 16px;">Live Ubuntu Backup V2.2，备份你的 ubuntu 为可启动的 squashfs 文件</span></p>
<p><span style="font-size: 16px;">http://forum.ubuntu.org.cn/viewtopic.php?f=21&amp;t=206287</span></p><p><span style="font-size: 16px;">基于Ubuntu-10.04-Alternate的精简定制安装</span></p><p><span style="font-size: 16px;">http://heshijidihu.blog.163.com/blog/static/2338726920104765039613/</span></p><p><span style="font-size: 18px; color: rgb(255, 0, 0);">&nbsp;原文链接：<a target="_blank" href="http://blog.csdn.net/vah101/archive/2011/01/05/6117563.aspx">http://blog.csdn.net/vah101/archive/2011/01/05/6117563.aspx</a></span></p></div></div></table><br><div class=opt id=blogOpt><a href="http://hi.baidu.com/flashgive/blog/category/Linux" title="查看该分类中所有文章">类别：Linux</a><span class=x-blog-opt-sp>|</span><a href="#" onclick="addToShare(); return false;" target=_blank><img src=http://img.baidu.com/hi/apps/share/share_btn.gif border=0 align=absbottom></a><span class=x-blog-opt-sp>|</span><a title="将此文章添加到百度搜藏" href=http://cang.baidu.com/do/add onClick="return addToFavor();" target=_blank>添加到搜藏</a> <span class=x-blog-opt-sp>|</span><a title="将此文章分享到i贴吧" href="#" onclick="addToiTieba(); return false;" target=_blank>分享到i贴吧</a><span class=x-blog-opt-sp>|</span>浏览(<span id=result>4199</span>)<span class=x-blog-opt-sp>|</span><a href="#send">评论</a>&nbsp;(<span id=blogCmtCount>0</span>)<script language=javascript>
										/*<![CDATA[*/
										var pre = [true,'【转】ubuntu10.10从安装到使用详细说明', '【转】ubuntu10.10从安装到使用...','\/flashgive/blog/item/89564b26ecfd4a038b82a172.html'];
										var post = [true,'Ubuntu 10.04.2 LTS 下编译安装Transmission 2.22','Ubuntu 10.04.2 LTS 下编译安装T...', '\/flashgive/blog/item/2f222e1130ba17d2a6ef3f0e.html'];
										if(pre[0] || post[0]){
											document.write('<div style="height:5px;line-height:5px;">&nbsp;</div><div id="in_nav">');
											if(pre[0]){
												document.write('上一篇：<a href="' + pre[3] + '" title="' + pre[1] + '">' +  pre[2] + '</a>&nbsp;&nbsp;&nbsp;&nbsp;');
											}
											if(post[0]){
												document.write('下一篇：<a href="' + post[3] + '" title="' + post[1] + '">' +  post[2] + '</a>');
											}
											document.write('</div>');
										}
										/*]]>*/
									</script></div><div class=line>&nbsp;</div><style type="text/css">#in_related_doc a{text-decoration:none}</style><div id=in_related_tmp></div><div id=in_reader> <div class=tit>最近读者：</div></div><div class=line>&nbsp;</div><div id=in_comment> <a name=comment></a> <div class=tit>网友评论：</div> <span id=userCommentList></span> <div id=page></div></div><form action='/flashgive/commit' id=blogCmtSubmitForm name=blogCmtSubmitForm method=post> <input type=hidden name=bdstoken value='91289ab5418b67c38c2b75c03e37e41f'> <input type=hidden name=ct value=8> <input type=hidden name=cm value=2> <input type=hidden name=spBlogID value='7266600172c239121c9583bb'> <input type=hidden name=spBlogCmtID value=''> <input type=hidden name=spRefURL value=''></form><div id=in_send><a name=send></a><form name=form1 id=popFormSubmit action="/flashgive/commit" method=post onSubmit="return checkcmtform()"><input type=hidden name=bdstoken value="91289ab5418b67c38c2b75c03e37e41f"><input type=hidden name=ct value=8><input type=hidden name=cm value=1><input type=hidden name=spBlogID value="7266600172c239121c9583bb"><input type=hidden name=spRefURL id=spRefURL><script>
										    document.getElementById("spRefURL").value = window.location.href;
										</script><div class=tit>发表评论：</div><table width=620 border=0 cellspacing=5 cellpadding=0><tr><td class=f14>姓　名：<td>zhu__feng001<input name=spBlogCmtor id=spBlogCmtor style="display:none;" maxlength=50 value="zhu__feng001"><div style=display:none id=nmerror>*姓名最长为50字节</div><input type=hidden name=spBlogCmtURL id=spBlogCmtURL style=width:360px maxlength=128 onChange='checkeandu("spBlogCmtURL")' value='http://hi.baidu.com/zhu__feng001'><tr id=2_err style=display:none><td>&nbsp;<td><div class=error id=2_err_con></div><tr><td valign=top class=f14 id=reTitle>内　容：<td> <textarea name="spBlogCmtText" id="spBlogCmtText" style="width:520px;height:155px" tabindex="3" onFocus="hidErr(3);" ></textarea><tr id=3_err style=display:none><td>&nbsp;<td><div class=error id=3_err_con></div><tr id=share_blog> <td> <td valign=top><input type=checkbox id=shareBlog autocomplete=off style="vertical-align:text-bottom; margin-bottom:2px; margin-bottom:-2px\9;"><label for=shareBlog>同时将此文章分享给好友</label><input type=hidden id=shareBlogEchoback name=echoback><tr id=vercode><td valign=top class=f14>验证码：<td valign=top><input type=hidden name=spVcode value=""><input onFocus="f_focus()" id=spVerifyKey name=spVerifyKey size=6 maxlength=4 autocomplete=off tabindex=4> 请点击后输入四位验证码，字母不区分大小写<br><div id=yanzheng style=display:none><img id=verifypic width=120 height=40><wbr><a onFocus="this.blur();" href="#" onClick="return newverifypic();" title="看不清左边的字符">看不清?</a></div><tr><td valign=top class=f14>&nbsp;<td valign=top class=f14><input id=btn_ok name=btn_ok type=submit autocomplete=off value="发表评论" tabindex=5>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id=cancleReLink onClick="canclereply(); return false;" style="display:none; font-size:12px;color:#666;">取消回复</a></table></form></div><br></div><table width="100%" border=0 cellspacing=0 cellpadding=0 height=8><tr><td class=modbl width=7>&nbsp;<td class=modbc>&nbsp;<td class=modbr width=7>&nbsp;</table></div></div></div></div><div class=clearfix></div><div style="text-align:center;margin:30px auto 15px;font-family:Arial,simsun;font-size:12px;"><div style="margin:0 auto 6px;"><a href=http://help.baidu.com/question?prod_en=space target=_blank style="color:#00C;">帮助中心</a><span>&nbsp;|&nbsp;</span><a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4&fr=wwwt" target=_blank style="color:#00C;">空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/ target=_blank style="color:#00C;">投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank style="color:#00C;">空间协议</a></div><div style="color:#7A77C8;">&copy;2012&nbsp;Baidu</div></div></center><ul id=blogCmtContentList style="display:none;"></ul><script>	var g_blogTitle = '【转】Ubuntu 10.10 桌面定制系统LiveCD制作';
		var g_blogId = '7266600172c239121c9583bb';
		var g_isAllowCmt =  true ;
		var g_isByShared =  false ;
		var g_isAddRelate =  true ;
		var g_latestReader = [
									["http:\/\/hi.baidu.com\/zhu__feng001","a0a27a68755f5f66656e673030314312","zhu__feng001"],
									["http:\/\/hi.baidu.com\/javaboy0531","ebba6a617661626f7930353331e801","javaboy0531"],
									["http:\/\/hi.baidu.com\/huizhenjun1","da256875697a68656e6a756e31c404","huizhenjun1"],
									["http:\/\/hi.baidu.com\/xixi","5ec187e57869786987e54a04","xixi"],
									["http:\/\/hi.baidu.com\/0下七du","132b30cfc2c6df6475030c","0下七du"],
									["http:\/\/hi.baidu.com\/cmt89","4c39636d7438393215","cmt89"],
									["http:\/\/hi.baidu.com\/流星点月","eaa5c1f7d0c7b5e3d4c28406","流星点月"],
									["http:\/\/hi.baidu.com\/zmr_no_god","65277a6d725f6e6f5f676f64721b","zmr_no_god"],
								{}
			];
	</script><iframe id=submitiframe name=submitiframe src="http://hi.bdimg.com/static/cblog/html/blank.html?v=20111213" style="display:none;"></iframe><script src="http://hi.bdimg.com/static/base/js/conf/comment.js?v=1334907755.js"></script><script src="http://hi.bdimg.com/static/cblog/js/job/detailpage.js?v=ee7931cf.js"></script><script>
/*<![CDATA[*/
/*{cmt
    这个相当一个代理器  
  在这里想实现一种这种加载效果：加载时注册（用一个 初始化数据.数组 记录要绑定的ID），文档ready后，按需加载js+css资源，js加载完，就初始化据执行

  有个问题，有些结构是 动态 执行这个绑定的，可能会发生资源还没有加载的情况。可以考虑给初始化数据，加一个标志位，说明加载完未，如果未，则把数据push到 初始化数据中(因为是用 dom.onxxx 的方式，所以不怕多次对同一个ID执行的问题)


  }*/
var SP = SP || {};
if(!SP.mycard){
    SP.mycard = new (function(){
        var me = this;
        var _cancleAction = Session.isDrag;  /*{cmt 标记在特殊情况下，所有的注册都被abort 如拖动页面}*/
        var _list = [];
        var _sourceLoaded = false;    /*{cmt 这里用了一种资源加载结束后，回调的机制，这个标志资源是否加载结束}*/
        me.bind = function (_id){
            if(_cancleAction){  //abort
                return;
            }
            if(!_sourceLoaded){
                _list.push(_id);
            } else {
                baidu.space.mycard.bind(_id);
            }
        }
        me.init = function (_config){
            _cancleAction = !!_config.cancle;
        }
        me.onSourceLoaded = function (){
            _sourceLoaded = true;
            baidu.space.mycard.init({portrait: Session.visitorPortrait});
            for(var i=0,len=_list.length; i<len; i++){
                baidu.space.mycard.bind(_list[i]);
            }
        }
    })();
    baidu.dom.ready(function(){
        BdAjax.loadCSS('http://hi.bdimg.com/static/cblog/css/ui/ucard/ucard.css?v=50de96ca.css');
        BdAjax.loadJS('http://hi.bdimg.com/static/cblog/js/ui/ucard/ucard.js?v=fcbffbf8.js');
    });
}
SP.mycard.bind('m_blog');  /*{cmt 只有文档加载完才真正绑定，这里只是append记录 }*/
/*]]>*/
</script>