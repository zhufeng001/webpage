
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=7" />
    <meta http-equiv="content-type" content="text/html;charset=gbk"/>
    <meta http-equiv="content-style-type" content="text/css"/>
    <meta http-equiv="content-script-type" content="text/javascript"/>
    <meta name="version" content="neblog-1.0"/>
    <script type="text/javascript">
      
      
      document.uniqueID!=document.uniqueID&&!!location.hash&&(location.hash=location.hash); 
      document.domain = location.hostname.replace(/^.*\.([\w]+\.[\w]+)$/,'$1');
      window.focus();
      window.getMusicTimeStamp=function(){return 'ef6150104235f7d07f3ef0e818a089c5';};
    </script>
<title>upstart 分析 - zhuzhu的日志 - 网易博客</title>
<meta name="author" content="zhumeng8337797,zhuzhu"/>
<meta name="keywords" content="upstart 分析,日志,zhuzhu,五事九思 （大连Linux主机维护）,网易博客,网易,blog"/>
<meta name="description" content="upstart 分析,zhuzhu的网易博客,大连linux维护qq群：287800525,"/>
  <script type="text/javascript">
    (function(){
     var R=24,C=11,a=[];
     for(var i=0;i<C;i++)for(var j=0;j<R;a.push('.icn0-'+i+j+'{background-position:'+(i>0?('-'+i*40+'px'):'0')+' '+(j>0?('-'+j*20+'px'):'0')+';}'),j++);
          document.write('<style type="text/css">'+a.join('')+'</st'+'yle>');
    })();
  </script>
    <link type="text/css" rel="stylesheet" href="http://b2.bst.126.net/newpage/r/c/c.css?v=1397025761787"/>
    <link type="text/css" rel="stylesheet" href="http://b.bst.126.net/newpage/style/nblog/4191/nb.css" id="blog-163-com-theme"/>
  <!--[if lte IE 6]>
  <style type="text/css">
    html,body,#blog-163-com-ie6body{height:100%;width:100%;overflow:hidden;}
    #blog-163-com-ie6body{overflow:auto;overflow-y:scroll;}
    #blog-163-com{background:none;}
  </style>
  <![endif]-->
  
  
  <style type="text/css">.m-3 .nbw-ryt .left .mcnt{padding-left:10px;}.m-3 .nbw-ryt .right .acts{position:relative;margin:0 0 12px 0;line-height:20px;}.m-3 .nbw-ryt .right .more{margin-top:-15px;height:24px;line-height:24px;}#blog-163-com .m-3 .phide{display:none;}.m-3 .nbw-ryt .left .nbw-bitm{margin:0;padding:0 10px 0 10px;position:relative;}.m-3 .nbw-ryt .left .nbw-bitm .title{margin:30px 0 20px;line-height:32px;}.m-3 .nbw-ryt .left .nbw-bitm .title .tcnt{font-size:26px;font-weight:bold;font-family:"Hiragino Sans GB W3","Hiragino Sans GB","Microsoft YaHei","\5FAE\8F6F\96C5\9ED1",Arial,Helvetica,simsun,"\5B8B\4F53";}.m-3 .nbw-ryt .left .nbw-bitm .tdep{margin-bottom:20px;}.m-3 .nbw-ryt .left .nbw-bitm .tbar{margin:5px 0;padding:10px 0 10px 0;line-height:20px;text-align:right;}.m-3 .nbw-ryt .left .nbw-bitm .bct{font-size:16px;padding-left:0}.m-3 .nbw-ryt .left .nbw-bitm .muava{float:left;margin:5px 7px 0 0;border-width:0 1px 0 0;height:40px;}.m-3 .nbw-ryt .left .snl .pnb div{line-height:20px;text-align:left;}.m-3 .nbw-ryt .cite{margin:20px 0 0 50px;line-height:24px;text-align:left;}.m-3 .nbw-ryt .cite .close{float:right;margin:0;text-align:right;}.m-3 .nbw-ryt .cite span{cursor:pointer;}.m-3 .nbw-ryt .cite .nbw-act{text-align:center;}.m-3 .nbw-ryt .cite .ads{margin-left:20px;width:400px;}.m-3 .nbw-ryt .cite .tbac{margin-left:60px;padding:0;border:0;list-style:none;line-height:24px;}.m-3 .nbw-ryt .cite .tbl{width:150px;overflow:hidden;}.m-3 .nbw-ryt .cite .tbr{margin-left:20px;overflow:hidden;}.m-3 .nbw-act-share{position:relative;}.m-3 .nbw-act-share .nas-wrap{visibility:hidden;}.m-3 .nbw-act-share:hover .nas-wrap,.m-3 .js-share-hover .nas-wrap{visibility:visible;}.m-3 .nas-wrap,.nas-itm,.nas-wb{background:url(/newpage/images/blog/icn-share.png?0011) no-repeat 9999px 9999px;}.m-3 .nas-wrap{margin-top:5px;}.nas-itm,.nas-wb{text-decoration:none;}.nas-itm,.nas-wb:hover{text-decoration:underline;}.m-3 .nas-itm{float:left;width:16px;height:16px;margin:0 1px 0 6px;overflow:hidden;cursor:pointer;}.m-3 .nas-itm0{background-position:0 -173px;}.m-3 .nas-itm1{background-position:0 -56px;}.m-3 .nas-itm2{background-position:0 -85px;}.m-3 .nas-itm3{background-position:0 -227px;}.m-3 .nas-itm4{background-position:0 -143px;}.m-3 .nas-itm5{background-position:0 -201px;}.m-3 .nas-itm6{background-position:0 -249px;}.m-3 .nas-itm7{background-position:0 -283px;}.m-3 .nas-itm8{background-position:0 -313px;}.m-3 .nas-itm9{background-position:0 -342px;}.nas-wb{padding-left:20px;cursor:pointer;line-height:normal;background-position:0 -173px;}.nas-icn0fix{margin-top:4px;}.nas-tofix{margin-top:0;*margin-top:2px;line-height:25px;}.m-3 .ptc{position:absolute;cursor:pointer;}.m-3 .ptc .ptcp .bcmimg{float:left;background-image:url("http://b.bst.126.net/newpage/images/blogcmtimg.png");background-position:0 0;background-repeat:no-repeat;height:22px;line-height:22px;width:22px;padding:0 6px 0 0;}.m-3 .ptc .ptcp{cursor:pointer;position:absolute;left:5px;bottom:5px;clear:both;width:94px;}.m-3 .ptc .ptcp .ptcmi{float:left;width:16px;height:16px;padding:3px 6px 3px 5px;_padding:2px 6px 0 3px;margin:0;}.m-3 .ptc .ptcp .ptcmt{background-position:-418px -50px;float:left;width:67px;height:22px;overflow:hidden;margin:0px 0 0 -3px;line-height:22px;*line-height:23px;text-align:left;color:#444444;}.m-3 .ptc .ptcp .ptcmt-2{width:61px;padding-left:6px;background-position:-424px -50px;}.m-3 .relateblog{text-align:left;}.m-3 .relateblog h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .relateblog .cnt{padding-left:8px;margin:10px 0 10px 0px;}.m-3 .relateblog .cnt ul{margin:0;padding:0;list-style:none;}.m-3 .relateblog .cnt ul li{height:24px;margin-right:20px;line-height:24px;}.m-3 .relateblog .cnt ul li span{margin:0 8px;}.m-3 .author, .m-3 .comment{text-align:left;}.m-3 .author .nlogif{width:150px;line-height:20px;margin-left:5px;_margin-left:3px;}.m-3 .author .nlogif .nbw-fce{margin:0 3px 0 10px;_margin-left:5px}.m-3 .author .nlogif .pright{width:85px;margin:0;padding:5px 0;_padding-top:10px}.m-3 .nbw-ryt .right h4{margin:0;padding:0;line-height:30px;}.m-3 .author h4, .m-3 .comment h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .author .cwd{border:0;text-align:left;}.m-3 .author .vname{width:50px;text-align:center;}.m-3 .author .cnt{margin:10px 0 10px -5px;}.m-3 .author .nbw-fce{margin:0 11px;}.m-3 .author .nbw-f50{width:50px}.m-3 .nbw-ryt .left .top{position:relative;padding-bottom:5px;line-height:20px;}.m-3 .nbw-ryt .left .top .ilft{position:absolute;left:0;top:0;}.m-3 .nbw-ryt .left .top .irgt{position:absolute;right:-10px;top:0;}.m-3 .nbw-ryt .left .top .pleft{margin-left:20px;_margin-left:10px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .top .pright{margin-right:10px;_margin-right:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .top{position:relative;padding:5px 0 15px 0;line-height:20px;}.m-3 .nbw-ryt .left .snl .top .ilft{position:absolute;left:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .irgt{position:absolute;right:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .pleft{margin-left:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .snl .top .pright{margin-right:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .pnb{padding:5px 0 10px 10px;overflow:hidden;_width:100%}.m-3 .comment h4{padding:0 0 0 10px}.m-3 .comment .publish{margin:10px 0;padding:0 0 10px 5px;text-align:left;}.m-3 .comment .publish .nbw-fce{padding-top:0;}.m-3 .comment .publish .nbw-fce .cwd{border:0;}.m-3 .comment .publish .redt{margin-left:65px;}.m-3 .comment .nolog{border:1px solid #000;background-color:#FFFFE1;height:40px;line-height:40px;text-align:center;padding:0;_padding:10px 0;_height:20px;}.m-3 .comment .case{padding-left:5px;padding-bottom:10px;}.m-3 .comment .vgl{margin:8px;width:75%;text-align:center;}#blog-163-com .m-3 .comment .nbw-cmt .cnt{width:488px;}#blog-163-com .m-3 .comment .nbw-cmt .nbw-cmt .cnt{width:444px;}.m-3 .edt-cmt{width:444px;}.m-3 .comment .publish .edt-cmt{width:488px;}.m-3 .comment .publish .edt-cmt .zbcc{display:none;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs0{font-size:150%;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs1, .m-3 .nbw-ryt .left .nbw-bitm .js-fs1 *{font-size:20px;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs2{}.m-3 .nbw-ryt .left .nbw-bitm .js-fs3, .m-3 .nbw-ryt .left .nbw-bitm .js-fs3 *{font-size:12px;}.m-3 .js-fcurrent{font-color:#000;font-weight:bold;text-decoration:none;}.m-3 .nbw-bitm .dream{margin-top:-10px;clear:both}.m-3 .nbw-bitm .cited{margin-top:-15px;}.m-3 .nbw-bitm .rdif{line-height:24px;height:24px;}.m-3 .nbw-bitm .rdif .pnt{line-height:24px;height:24px;margin-right:10px;}.m-3 .nbw-bitm .rdif .pclass{vertical-align:middle;width:57px;height:22px;}.m-3 .nbw-bitm .rdif .rdct{display:inline-block;}.m-3 .snl .rdcnt{padding:5px;text-align:left}.m-3 .snl .rdcnt .nbw-fce{margin:0 5px}.m-3 .snl .rdcnt p{margin:10px 0}.m-3 .snl .rdcnt .rrb{list-style:none;height:22px;line-height:22px;}.m-3 .acts .iblock{width:18px;}.m-3 .ns{margin:0 0 0 2px;}.m-3 .cancel{display:none;}.m-3 .js-hover .cancel, .m-3 .follow:hover .cancel, .m-3 .frd:hover .cancel{display:inline;}.m-3 .follow{*margin-left:2px;}.m-3 .flw{padding:7px 8px;color:#000;background:#fefce4;border:1px solid #b7b7b7;}.m-3 .acts .flw .iblock{width:20px;}.m-3 .sntesctf{width:15px;margin-left:3px;}.dr-warm{width:420px;padding:12px 18px;margin:18px 0;line-height:20px;border:1px solid #aaa;color:#666;background:#ffffdc;}.dr-warm a,.dr-warm a:hover{text-decoration:underline;color:#02a;}.dr-warm .codeinput{width:70px;text-align:center;}.dr-warm .codediv{margin:10px 0 0;}.dr-warm .ml{margin:0px 10px;vertical-align:middle;}.dr-warm .button{background-color:#77716F;width:42px;height:20px;border:0 none;color:#fff;cursor:pointer;}.m-3 .commentcntwrap{position:relative;zoom:1;}.m-3 .cmtMultiUserRole{position:absolute;left:62px;bottom:5px;width:300px;overflow-x;hidden;}.m-3 .cmtMultiUserRole .selectRole{float:right;padding:1px 1px 0 1px;border:none;}.m-3 .cmtMultiUserRole .selectRole .ztxt{float:left;width:auto;overflow:hidden;}.m-3 .cmtMultiUserRole .selectRole .zdwn{float:left;background:url("/newpage/images/icon.png") -240px -420px no-repeat;text-indent:-9999px;}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm{}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm:hover, .m-3 .cmtMultiUserRole .selectRole .slst .item.js-zhvr-910{color:#333;background-color:#ececec;}.m-3 .nbw-cmt{position:static;}.m-3 .nbw-cmt .thde{position:relative;zoom:1;}.m-3 .publish .redt{position:relative;zoom:1;}.m-3 .publish .redt .cmtMultiUserRole{left:135px;_left:132px;}.m-3 .cmtMultiUserRole .js-showlist{padding:0;margin:0;border-style:solid;border-width:1px 1px 0 1px;border-color:#aaa;}.m-3 .cmtMultiUserRole .js-showlist .zlst{border-style:solid;border-width:0 1px 1px 1px;border-color:#aaa;}.m-3 .multiuserItem{}.m-3 .multiuserItem .author{margin-right:-50px;}.m-3 .multiuserItem .multicntwrap{padding:30px 0 20px 0;}.m-3 .multiuserItem .multicnt{_padding-top:2px;margin-left:50px;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .title{width:95%;margin-top:0;margin-bottom:0;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .tdep{margin-bottom:0;}.m-3 .attachment{margin-bottom:20px;}.m-3 .awidth{width:40px;}.m-3 .view{margin-right:10px;}.m-3 .nbw-cmt .op{height:18px;line-height:18px;}.m-3 .suggestedreading{overflow:hidden;position:relative;zoom:1;}.m-3 .suggestedreading .m-list{margin-left:0;padding-left:15px;overflow:hidden;font-size:14px;}.m-3 .suggestedreading .m-list .gap{margin-left:8px;color:#ADADAD;}.m-3 .suggestedreading .m-list li{height:20px;padding:3px 0 2px;vertical-align:middle;}.m-3 .suggestedreading .wrap li{float:left;width:118px;height:146px;}.m-3 .suggestedreading .suggesteditem1{line-height:24px;margin:5px 0;font-size:12px;margin-right:10px;}.m-3 .suggestedreading .suggesteditem2{margin:5px 0;font-size:12px;}.m-3 .suggestedreading .suggesteditem2 .imgwrap1{position:relative;overflow:hidden;width:90px;height:90px;zoom:1;}.m-3 .suggestedreading .suggesteditem2 .imgwrap2{z-index:2;position:absolute;left:0;top:0;}.m-3 .suggestedreading .suggesteditem2 .btitle{width:96px;height:148px;overflow:hidden;text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 .sep{padding:5px 10px 0 10px;}.m-3 .suggestedreading .suggesteditem2 a{cursor:pointer;}.m-3 .suggestedreading .suggesteditem2 a:hover{text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 img{border-width:0;}.m-3 .suggestedreading .color1{background-color:#B3786B;}.m-3 .suggestedreading .color2{background-color:#D2C1A8;}.m-3 .suggestedreading .color3{background-color:#D46646;}.m-3 .suggestedreading .color4{background-color:#D28FA8;}.m-3 .suggestedreading .color5{background-color:#C84F54;}.m-3 .suggestedreading .white{color:white;}.m-3 .suggestedreading .imgtip{margin:2px;font-weight:bold;color:white;font-size:13px;}.m-3 .suggestedreading .borderwrap{padding:2px;background-color:#fff;}.m-3 .suggestedreading .time{position:absolute;bottom:0;right:0;}.m-3 .suggestedreading .hidsep{margin-left:-1px;}.m-3 .suggestedreading .srtitle{font-size:14px;font-weight:bold;margin-bottom:10px;}.m-3 #yodaoad{padding-left:5px;}.m-3 #yodaoad_3{padding:20px 0 25px 0;}.m-3 .relategroup{width:45%}.m-3 .blogvote{padding-left:35px;position:relative;zoom:1;}.m-3 .blogvote .sep{margin:0 5px;}.m-3 .blogvote .vtitle{margin:15px 0 15px -30px;}.m-3 .blogvote .vtitle span{padding-right:8px;}.m-3 .blogvote .vtitle .close{width:60px;height:24px;vertical-align:middle;}.m-3 .blogvote .roleview{padding-right:10px}.m-3 .blogvote .roleview .iblock{width:10px}.m-3 .blogvote .options{clear:both;margin-right:10px}.m-3 .blogvote .options ul{margin:0;padding:0;list-style:none;}.m-3 .blogvote .options ul li{padding:10px 0;line-height:16px;}.m-3 .blogvote .options .role{margin-bottom:15px;}.m-3 .blogvote .options .acts{margin-bottom:15px;height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt{height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt button{height:24px;line-height:18px;}.m-3 .blogvote .options .acts .leftpt span{}.m-3 .blogvote .options .acts .view{margin-left:5px;}.m-3 .blogvote .fvote{padding-top:10px;}.m-3 .blogvote .fvote ul{list-style:none;margin:10px 0;padding:0;}.m-3 .blogvote .fvote ul li{line-height:20px;margin:5px 0;}.m-3 .blogvote .options ul .col0{width:230px;margin-right:10px;margin-top:-3px;_margin-top:-5px;line-height:20px}.m-3 .blogvote .options ul .col0 input{_position:relative;_top:3px}.m-3 .blogvote .options ul .col0 label{width:200px;_position:relative;_top:4px}.m-3 .blogvote .options ul .col1{width:190px;height:14px;line-height:14px;;background:none repeat scroll 0 0 #EAEAEA;}.m-3 .blogvote .options ul .col1 .iblock{width:100%;height:16px;vertical-align:middle;}.qing001{margin:0;border:none;}.qing001 .nb-mc{background:none;}.qing001 .nb-mc .cc{width:942px;padding:0;margin:0 auto;}.qing001 .nb-mc .cl{display:none;}.qing001 .nb-mc .cr{display:none;}.qing001 .bh{display:none;}.qing001 .nbw-ryt{background:url(/newpage/images/qingtheme/qing001/blogdetail_cntbg.png) 0 0 repeat-y;}.qing001 .nbw-ryt .left{background:url(/newpage/images/qingtheme/qing001/blogdetail_ftbg.png) bottom left no-repeat;}.qing001 .nbw-ryt .left .lcnt{width:100%;padding:0;margin:0;background:url(/newpage/images/qingtheme/qing001/blogdetail_ttlbg.png) 0 0 no-repeat;}.qing001 .nbw-ryt .left .mcnt{padding:0 30px;}.qing001 .nbw-ryt .left .nbw-bitm{padding:0;}.qing001 .nb-mt{display:none;}.qing001 .nbw-ryt .left .top{display:none;}.qing001 .nbw-ryt .left .nbw-bitm .title{height:31px;padding:30px 0 46px 3px;margin:0;}.qing001 .nbw-ryt .left .nbw-bitm .title .tcnt{color:#fffadc;font-size:24px;}.qing001 .nbw-ryt .left .nbw-bitm .tdep{padding-top:6px;}.qing001 .comment .case{padding-bottom:40px;}.m-3 .article .douban{float:left;width:200px;margin:0 10px 10px 0;font-size:12px;}.m-3 .article .douban .field{padding-top:5px;}.m-3 .article .douban .field .dbyinyue{width:10px;height:8px;border-width:0;}.m-3 .article .douban img{max-width:100%;width:100%;border-color:#e9e9e9;display:inline-block;border-width:1px;border-style:solid;}.m-3 .article-1 .douban{float:right;width:200px;margin:0 3px 10px 10px;}.m-3 .article-2 .douban{float:left;width:250px;margin:0 -250px 0 0;}.m-3 .article-2 .blog{margin-left:270px;}.m-3 .article-2 .blogc{width:99%;overflow:hidden;}.m-3 .article-3 .douban{float:right;width:250px;margin:0 3px 0 -250px;}.m-3 .article-3 .blog{margin-right:270px;}.m-3 .article-3 .blogc{width:99%;overflow:hidden;}.m-3 .vote_star{overflow:visible;}.m-3 .rateword{display:none;left:88px;width:37px;top:-2px;position:absolute;line-height:23px;}.m-3 .star_d0 .rateword0{display:inline;}.m-3 .star_d1 .rateword1{display:inline;}.m-3 .star_d2 .rateword2{display:inline;}.m-3 .star_d3 .rateword3{display:inline;}.m-3 .star_d4 .rateword4{display:inline;}.m-3 .star_d5 .rateword5{display:inline;}.m-3 .nbw-act .blogsep{margin:0 2px}.m-3 .zihao{position:relative;cursor:default;}.m-3 .zihaoshow{position:absolute;width:26px;top:-57px;left:-3px;padding:0 0 3px;line-height:18px;}.m-3 .zihaoshow span{display:block;text-align:center;cursor:pointer;}.m-3 .zihaoc{border-style:solid;border-width:1px;}.m-3 .mbga{margin-bottom:12px;position:relative;}.m-3 .mbga a{margin-left:20px;}.m-3 .mbgai{position:absolute;top:-1px;width:17px;background:url(/newpage/images/microblog.png?1) no-repeat;_background:none transparent;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='http://b2.bst.126.net/newpage/images/microblog.png');_zoom:1;}.m-3 .mingxing{width:18px;background-position:-43px -80px;}.m-3 .xinxing{width:18px;background-position:-81px -80px;}.m-3 .darendesc{padding:7px 15px;margin-top:10px;line-height:18px;background:#efeae7;vertical-align:middle;}.m-3 .js-cmt-noavatar .nbw-cmt .nbw-fce{display:none;}.m-3 .js-cmt-noavatar .nbw-cmt .thde{padding-left:8px;margin-left:0;}.m-3 .js-cmt-noavatar .nbw-cmt .reps .thde{margin-left:55px;}.m-3 .toLofter{cursor:pointer;position:absolute;bottom:5px;width:112px;height:22px;background:url(/newpage/images/publishtolofter/tolofter.png?v=20130909) 0 0 no-repeat;text-indent:-9999px;}.m-3 .nbw-ryt .left .lcnt{padding-right:20px;}.m-3 .edt-cmt{width:auto;}.m-3 .comment .publish .edt-cmt{width:auto;}#blog-163-com .m-3 .comment .nbw-cmt .cnt{width:auto;}#blog-163-com .m-3 .comment .nbw-cmt .nbw-cmt .cnt{width:auto;}.m-3 .nbw-cmt .nbw-cmt{padding:20px 5px 1px 0;}.m-3 .nbw-cmt .op{height:18px;line-height:18px;margin-bottom:18px;}.m-3 .nbw-ryt .left .nbw-bitm .title{margin:34px 0 10px;line-height:normal;}.m-3 .nbw-ryt .left .nbw-bitm .title .tcnt{line-height:38px;}.m-3 .nbw-ryt .left .nbw-bitm .tdep{margin-bottom:25px;}.m-3 .comment .publish{padding:0 5px 10px 0;margin:20px 0 0 0;}.m-3 .nbw-sdt .miniBlogArea{bottom:12px;}.m-3 .nbw-sdt .edt .zbtn{height:40px;line-height:40px;}.m-3 .nbw-sdt .edt .zbtn .zfce{top:10px;}.m-3 .nas-tofix{line-height:24px;}.m-3 .nas-wrap{margin-top:4px;}.m-3 .leftoperatebar{height:24px;line-height:24px;padding:8px 0;}.m-3 .nbw-bitm .rdif{padding:8px 0;}.m-3 .leftoperatebar .sep-last{margin-right:8px;}.m-3 .rightoperatebar{height:40px;line-height:40px;margin-left:0px;}.m-3 .reblogbtn, .m-3 .recommendbtn, .m-3 .likebtn{width:48px;height:38px;line-height:38px;padding-left:44px;margin:0 0 0 5px;font-size:14px;color:#fff;text-align:left;}.m-3 .reblogbtn{background-position:1px -431px;}.m-3 .recommendbtn{background-position:1px -271px;}.m-3 .js-recommended{background-position:1px -351px;}.m-3 .likebtn{background-position:1px -111px;}.m-3 .js-liked{background-position:1px -191px;}.m-3 .hotarea{}.m-3 .hotarea .hotItem{position:relative;zoom:1;display:block;float:left;}.m-3 .hotarea .hotItem .hottype{position:absolute;right:-5px;top:29px;width:20px;height:20px;text-decoration:none;}.m-3 .hotarea .hotItem .js-liketype{background-position:-4px -536px;}.m-3 .hotarea .hotItem .js-reblogtype{background-position:-4px -648px;}.m-3 .hotarea .hotItem .js-sharetype{background-position:-4px -592px;}.m-3 .hotarea .expandHotItem{}.m-3 .hotarea .expeadbg{width:40px;height:40px;margin:0 auto;background-position:-2px -728px;cursor:pointer;}.js-openlikewin .showhint .zcvr{background:#000;opacity:0.5;filter:alpha(opacity=50);}.f-openlikeicon{background:url(/newpage/images/liketolofter/openlike24.png) -9999px -9999px no-repeat;_background:url(/newpage/images/liketolofter/openlike8.png) -9999px -9999px no-repeat;}#blog-163-com #blog-163-com-layer div.openlikewin{border:none;}.openlikewin .nbwinwrap .ztbr, .openlikewin .nbwinwrap .zcls, .openlikewin .nbwinwrap .zext, .openlikewin .nbwinwrap .zbtnbar{display:none;}.openlikewin .nbwinwrap .zcnt{padding:0;}.openlikewin .hdarea{position:relative;zoom:1;width:500px;height:145px;padding-top:30px;background:#d6e6f1;}.openlikewin .hdarea .tticon{width:86px;height:73px;margin:0 auto;background-position:-8px -111px;}.openlikewin .hdarea .ttcnt{height:60px;line-height:60px;color:#333;font-size:25px;}.openlikewin .hdarea .close{position:absolute;right:10px;top:10px;width:21px;height:21px;background-position:-6px -720px;cursor:pointer;}.openlikewin .bdarea{padding-bottom:40px;}.openlikewin .step{padding-top:30px;}.openlikewin .step .stepicon{width:60px;height:64px;margin:0 auto;}.openlikewin .step .stepcnt{width:500px;height:32px;line-height:32px;padding-top:16px;color:#333;font-size:20px;}.openlikewin .stepone{}.openlikewin .stepone .stepicon{background-position:-6px -247px;}.openlikewin .stepone .stepcnt{}.openlikewin .steptwo{}.openlikewin .steptwo .stepicon{background-position:-6px -359px;}.openlikewin .steptwo .stepcnt{}.openlikewin .stepthree{margin-bottom:40px;}.openlikewin .stepthree .stepicon{background-position:-6px -470px;}.openlikewin .stepthree .stepcnt{margin-bottom:5px;}.openlikewin .likeaddr{width:304px;height:40px;line-height:40px;padding:6px;margin:0 auto;background-position:-1px -600px;}.openlikewin .likeaddr .blogname{font-family:"Hiragino Sans GB W3","Hiragino Sans GB",Arial,Helvetica,simsun,u5b8bu4f53;}.openlikewin .likeaddr .blogname{text-align:right;float:left;width:150px;height:40px;line-height:40px;padding:0;margin:0;color:#666;font-size:20px;border:none;outline:none;background:none;}.openlikewin .likeaddr .urlsuffix{text-align:left;float:left;width:120px;height:40px;line-height:40px;color:#666;font-size:20px;}.openlikewin .openmylike{width:316px;height:54px;margin:0 auto;background-position:1px 1px;cursor:pointer;}.outlinklayer{position:absolute;width:398px;background:#fff;border:1px solid #cdcdcd;text-align:left;}.outlinklayer .hdarea{height:25px;}.outlinklayer .hdarea .close{position:absolute;right:0;top:0;width:30px;height:30px;background:url(/newpage/images/outlink/close.png) 10px 8px no-repeat;cursor:pointer;}.outlinklayer .bdarea{height:108px;padding:0 0 25px 30px;}.outlinklayer .bdarea .ttl{height:26px;line-height:26px;color:#333;font-size:16px;font-weight:bold;}.outlinklayer .bdarea .url{width:340px;height:22px;line-height:22px;color:#666;font-size:14px;font-weight:bold;}.outlinklayer .bdarea .prompt{height:22px;line-height:22px;padding-top:12px;color:#999;font-size:14px;}.outlinklayer .bdarea .goon{height:26px;line-height:26px;color:#536c86;font-size:16px;text-decoration:underline;}.outlinklayer .adarea{padding:10px;border-top:1px solid #e6e6e6;}.outlinklayer .adarea .adlink{}.outlinklayer .adarea .adpic{display:block;width:378px;height:50px;border:none;} </style>
  
  <link href="/newpage/prettycode/prettify.css" type="text/css" rel="stylesheet" />
  </head>
<body onload="prettyPrint()" id="blog-163-com" class="nb-body nb-inr nb-prv">
  <!--[if lte IE 6]><div id="blog-163-com-ie6bodywrap" class=""><![endif]-->
    <!--[if lte IE 6]><div id="blog-163-com-ie6body" class="nb-body"><![endif]-->

<div class="nb-nbar clearfix" id="blog-163-com-topbar">
  <div class="pl fl clearfix">
  <div id="" class="nbw-im fl im im0">
    <a  rel="nofollow"  class="lbl bd ia noul " href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://www.163.com/" target="_blank" hidefocus="true"><span class="tx">网易</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://news.163.com/" >
            新闻
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://t.163.com/" >
            微博
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://email.163.com/" >
            邮箱
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://photo.163.com/" >
            相册
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://yuedu.163.com/" >
            阅读
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://www.youdao.com/" >
            有道
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://photo.163.com/pp/square/" >
            摄影
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://aipai.163.com?from=163blog" >
            爱拍
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://quan.163.com/?from=blogdh" >
            优惠券
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://note.youdao.com/?vendor=163blog" >
            云笔记
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://fm.163.com/?fmblogzx0628" >
            闪电邮
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://m.123.163.com/?frombkcp" >
            手机邮
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://yxp.163.com/" >
            印像派
          </a>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://61.163.com/?from=blogxiala" >
            网易识字
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a  rel="nofollow"   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://sitemap.163.com/" >
            更多
          </a>
        
    </div>
  </div>

    <span style="display:none;margin-left:0;" class="fl iblock space icn1 icn1-4">&nbsp;</span>

  <div id="" class="nbw-im fl im im10">
    <a  class="lbl bd ia noul " href="http://blog.163.com/?frompersonalbloghome" target="_blank" hidefocus="true"><span class="tx">博客</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome" >
            手机博客
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/clone/clone.html?frompersonalbloghome" >
            博客搬家
          </a>
          <a   target="_blank"  class="itm noul youcai " hidefocus="true" href="http://blog.163.com/vip.do?frompersonalbloghome" >
            博客VIP服务
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201082863728829/?frompersonalbloghome" >
            LiveWriter写博
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201092713253500/?frompersonalbloghome" >
            word写博
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/services/mailblog.html?frompersonalbloghome" >
            邮件写博
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/services/emsblog.html?frompersonalbloghome" >
            短信写博
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/showMultiUser.do?frompersonalbloghome" >
            群博客
          </a>
          <a   target="_blank"  class="itm noul youcai " hidefocus="true" href="http://blog.163.com/BLOG_YOUCAI/" >
            博客油菜地
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/ht/?frompersonalbloghome" >
            博客话题
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/hot/history/?frompersonalbloghome" >
            博客热点
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://q.163.com/#home?frompersonalbloghome" >
            博客圈子
          </a>
          <a   target="_blank"  class="itm noul  " hidefocus="true" href="http://blog.163.com/findFriend.do?type=5?frompersonalbloghome" >
            找朋友
          </a>
        
    </div>
  </div>


    <div class="nbw-im fl im1 im explore"><a class="lbl bd ima spy" href="http://blog.163.com/public/explore/?frompersonalbloghome">发现</a></div>
    <div class="nbw-im fl im1 im bloggroup"><a class="lbl bd ima spy" href="http://blog.163.com/g/?frompersonalbloghome">小组</a></div>
    <div class="nbw-im fl im1 im customtheme"><a class="lbl bd ima spy" href="http://blog.163.com/public/theme/?frompersonalbloghome">风格</a></div>
    <div class="nbw-im fl im1 im mobileblog"><a class="lbl bd ima spy" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome">手机博客</a></div>
    <div class="nbw-im fl im1 im seebyway"><a rel="nofollow" title="随便看看" class="lbl bd ima spy" href="http://blog.163.com/randomUser.do"><span>&nbsp;</span></a></div>

    <span style="display:none;" class="fl iblock space icn1 icn1-4">&nbsp;</span>
    <div id="topbar_randShowArea" class="fl">
      <div class="nbw-im fl im1 im randtag phide"><a target="_blank" class="bd ima moveblog randshow" href="http://istyle.163.com" onclick="window.open('http://istyle.163.com/?act=idpistyle_20120604_01');return false;">网易真人搭配社区iStyle</a></div>
<div class="nbw-im fl im1 im randtag phide"><a target="_blank" class="bd ima moveblog randshow" href="http://www.lofter.com/app?act=qbappentry_20140303_04">下载最文艺的手机博客APP&gt;</a></div>
<div class="nbw-im fl im1 im randtag phide"><a target="_blank" class="bd ima moveblog randshow" href="http://www.lofter.com/app?act=qbappentry_20140303_04">下载最文艺的手机博客APP&gt;</a></div>
    </div>
  </div>
  <div class="fr pr clearfix">
    <div id="topbar_loginAndReg" class="fr">
      <a rel="nofollow" style="margin-left:10px;color:#ff7700;" class="iblock fr ima" href="http://reg.163.com/reg/reg.jsp?product=blog&url=http://blog.163.com/ntesRegBlank.html&loginurl=http://blog.163.com/" target="_blank">创建博客</a>
      <a rel="nofollow" class="iblock fr ima ztag" href="#">登录</a>
      <span class="fr iblock space icn1 icn1-4 spx">&nbsp;</span>
      <div id="topbar_followArea" class="nbw-im fr"><span class="lbl bd ima followit fl ztag"><span class="fl addicon">&nbsp;</span><span class="fl">加关注</span></span></div>
    </div>
  </div>
</div>
<script type="text/javascript">
  (function(){
      var e = document.getElementById('blog-163-com-main');
      if(!!e) e.parentNode.insertBefore(document.getElementById('blog-163-com-topbar'),e);
      e = document.getElementById('blog-notice-email');
      if(!!e) window.setTimeout(function(){e.style.display='';},50);
  })()
</script>
<div class="blogtoptips phide" id="blog-163-com-toptips">
 <div class="blogtoptipswrap">
    <div id="newbulletinstip" class="newbulletinstip phide">
    <a class="lnknews fc03 m2a tiptag phide" href="" target="_blank"></a><span class="txtnews tiptag phide"></span>&nbsp;&nbsp;&nbsp;<a class="fc03 ul nextorprevnews tiptag phide" href="" hidefocus="true">显示下一条</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="fc03 ul close tiptag" href="" hidefocus="true">关闭</a>
  </div>
 </div>
 	<div id="sinaoauthtip" class="sinaoauthtip phide">
    	<span style="">温馨提示！由于新浪微博认证机制调整，您的新浪微博帐号绑定已过期，请重新绑定！</span><a rel="nofollow" class="fc03 noul iblock" href="http://zhumeng8337797.blog.163.com/settings/?fromnewcenter#m=6">立即重新绑定新浪微博》</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="fc03 iblock close" href="">关闭</a>
  	</div>
    <div id="$_faxiantip" class="faxiantip phide">
      <div>
	    <a class="m2a iblock" href="http://blog.163.com/public/explore/?fromblogbanner" target="_blank"></a>
	    <span class="faxiantag m2a"></span>
      </div>
    </div>
    <div id="$_guanggaotip" class="guanggaotip phide">
      <div>
	    
	    <span class="guanggaotag m2a"></span>
      </div>
    </div>
    <div id="$_lofterInviteTip" class="lofterInviteTip phide">
      <div>
	    <a class="m2a iblock" href="http://www.lofter.com/invite/163blog/?email=" target="_blank"></a>
	    <span class="lofterInviteTag m2a"></span>
      </div>
    </div>
</div>  <div class="nb-wrap wsy" id="blog-163-com-main"><div class="nb-are nb-top">
  <div class="wkg h" id="blog-163-com-banner">
    
    <div class="t">
      <h1 class="n c"><span class="ztag pre">五事九思 （大连Linux主机维护）</span></h1>
      <p class="d c"><span class="ztag pre">大连linux维护qq群：287800525</span></p>
    </div>
    <div class="f h ztag"></div>
    <a class="x" hidefocus="true" target="_blank" href="#"><span class="xx ztag"></span></a>
  </div>
</div><div class="nb-are nb-nav">
  <div class="wkg">
    <div class="c h">
      <h2>导航</h2>
      <ul class="noul clearfix">
                
	        <li class="w w0">
	          <a class="i i0 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/">首页</a>
	        </li>
	        <li class="w w1 selected">
	          <a class="i i1 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/blog/">日志</a>
	        </li>
	        <li class="w w2">
	          <a class="i i2 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/album/">相册</a>
	        </li>
	        <li class="w w3">
	          <a class="i i3 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/music/">音乐</a>
	        </li>
	        <li class="w w4">
	          <a class="i i4 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/collection/">收藏</a>
	        </li>
	        <li class="w w5">
	          <a class="i i5 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/friends/">博友</a>
	        </li>
	        <li class="w w6">
	          <a class="i i6 fc01 h" hidefocus="true" href="http://zhumeng8337797.blog.163.com/profile/">关于我</a>
	        </li>
      </ul><!--
 --></div>
    <div class="l h">&nbsp;</div>
    <div class="r h">&nbsp;</div>
  </div>
</div>  <div class="nb-are nb-smt"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
  <div class="nb-are nb-cnt">
    <div class="wkg">
      <div class="c wc h clearfix " id="blog-163-com-container">
  <div class="nb-mdl lcr m-3 " id="-3">
  <div class="nb-mt lcr th fc02">
    <div class="c tc th lcr"><h2 class="thide nb-jsc mdl_t_t">日志</h2></div>
    <div class="r tm th nb-jsc"></div>
    <div class="l tl th">&nbsp;</div>
    <div class="r tr th">&nbsp;</div>
  </div>
    <div class="nb-mc lcr">
      <div class="c cc lcr nb-jsc"><script>
function g_onSuggestedReadingImgLoad(_img){
    var image = new Image();
    image.src = _img.src;
    var _width = 90;
    var _height = 90;
    if(image.width > image.height){
    	_img.style.marginLeft = -Math.floor((image.width*(_height/image.height)-_width)/2)+'px';
    	_img.style.height = _height+'px';
    }else {
    	_img.style.width = _width+'px';
    	_img.style.marginTop = -Math.floor((image.height*(_width/image.width)-_height)/2)+'px';
    }
    _img.style.display = 'block';
}
</script>
<div class="nbw-ryt ztag clearfix js-auto-098">
  <div class="right bdwl bds0 bdc0"><div class="cnt ztag"></div></div>
  <div class="left">
     <div class="lcnt bdwr bds0 bdc0 ">
      <div id="$_newOldBlogLinkTopDiv" class='top fc03 bdwb bdc0 bds2 clearfix'>
     </div>
     <div class="mcnt ztag">
      <div class="nbw-bitm bdwb bds2 bdc0 ">
        <div class="multicntwrap">
	      <div class="multicnt">
	      	<div>
		      <h3 class="title pre fs1"><span class="tcnt">upstart 分析</span>&nbsp;&nbsp;<span class="bgc0 fc07 fw0 fs0"></span></h3>
		      <p class="tdep clearfix nbw-act fc06" style="line-height:20px;">
		        <span class="pleft">
		          
		          <span class="blogsep">2012-04-03 18:49:28</span><span class="blogsep">|&nbsp;&nbsp;分类：</span>
		          <a class="fc03 m2a" href="http://zhumeng8337797.blog.163.com/blog/#m=0&t=1&c=fks_084066081084088064085082087095085086081068082094095066080" title="redhat6初识">redhat6初识</a>
		          <span class="blogsep phide" id="$_blogTagTitle">|&nbsp;&nbsp;标签：</span><span class="fc03 phide" id="$_blogTagInfo"></span>
		        </span>
		        <span class="pright fc07 ztag"><span class="blogsep">|</span><span id="$_spanReport" class="fc03 m2a">举报</span></span>
		        <span class="pright fc07 ztag"><span class="blogsep">|</span><span class="zihao fc03" id="$_fontswitch">字号<span class="zihaoshow  phide" id="$_fontsTypes"><span class="zihaoc bdc0"><span class="stag"></span><span class="fc04 stag">大</span><span  class="fc04 stag" >中</span><span  class="fc04 stag">小</span></span></span></span></span><span class="pright pnt fc03" id="$_blog_subscribe"><span class="iblock icn0 icn0-919">&nbsp;</span><a class="m2a">订阅</a></span>
		      </p>
		    </div>
	      </div>
        </div>

        <div>
        
        </div>

        <div class="nbw-blog-start"></div>
        <div class="bct fc05 fc11 nbw-blog ztag"><h2 style="margin-top: 10px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 0px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;"  >前言</h2><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >众所周知，/sbin/init 是linux内核启动后运行的首个用户进程，早期的init程序由sysvinit包提供。 SysVinit软件包包含了一组控制系统最基本函数的进程，它包含了系统初始化程序init，init 是系统启动时被kernel最先启动的进程，它控制着其它所有进程的启动、运行以及停止。Sysvinit 中的init daemon 是一个基于运行级别的初始化程序，它使用了运行级别（如单用户、多用户等）并通过从 /etc/rc?.d 目录到 /etc/init.d 目录的初始化脚本的链接来启动与终止系统服务。例如大家熟悉的级别3进入text模式，级别5为graphis模式；以及/etc/rc?.d 目录下数字代表启动的优先级，K代表停止某个服务，S代表启动服务等。<br><span id="more-68"  ></span><br>Ubuntu 从6.10版本开始使用 upstart来代替sysvinit， upstart包提供了新的init daemon。Upstart init daemon 本质上不是基于运行级别的启动init进程，但为了跟传统的sysvinit兼容，upstart提供了兼容的runlevel和telinit等工具，以及也使用/etc/rc?.d 作为启动或者停止某个服务。但运行级别3不在是text模式，而且也不能通过改变运行级别来改变进入text模式。</p><h2 style="margin-top: 10px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 0px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;"  >Upstart 初探</h2><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >Upstart 跟Sysvinit 本质上一样，都是用于linux开机自动启动某些后台服务，同时还承担监控这些服务运行状态的功能。但Sysvinit中的init daemon 不能解决诸如系统接收到打印机等热插拔事件安装时来启动某种特定的服务这类问题，而upstart则可以。</p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >ustart init daemon 是基于事件的，当系统中的什么情况发生变化时，它会运行某个特定的程序。这里被运行的程序多半是用来启动或终止服务的脚本。这个配置方式和systemv 在系统进入某个运行级别的时候运行init脚本的链接的概念实际上是非常类似的，只不过 upstart 更加灵活一些。Upstart 不仅能在运行级别改变的时候启动或终止服务，也能在接收到系统发生其他改变的信息的时候启动或终止服务。这些系统的改变被称为“事件”。例如，当 upstart 从 udev 接收到运行时文件系统加载、打印机安装或其他类似的设备添加或删除的信息，并采取相应的行动。Upstart 也可以在系统启动、关闭或某个任务状态改变的时候启动或关闭服务。</p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >在upstart中存在如下几个概念：<br>Process: process 是由jobs定义的services或者task，它将被init daemon 运行。 每个job可以定义一个或者多个不同的process，分别在其生命周期的不同状态运行。Process 定义如下：</p><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >Exec COMMAND&nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >Scritp … end script&nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >Pre-start exec|script&nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >Post-start exec|script</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  > Pre-stop exec|script&nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >Post-stop exec|script</pre><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >Event： 事件，事件（event）是 init 可以得到的状态变更信息。几乎系统所有的内部或外部状态变更都可以触发一个事件。比如，引导程序会触发启动（startup）事件，系统进入运行级别2会 触发运行级别2（runlevel 2）事件，而文件系统加载则会触发路径加载（path-mounted）事件，拔掉或安装一个热插拔或USB设备（如打印机）也会触发一个时间。用户还可 以通过 initctl emit 命令来手动触发一个事件。事件定义格式如下：</p><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >start&nbsp; on Event [[KEY=] Value … and| or …]&nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >stop&nbsp; on Event [[KEY=] Value … and| or …]</pre><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >Job： 一个工作（job）是 init 可以理解的一系列指令。典型的指令包括一个程序（二进制文件或是脚本）和事件的名称。Upstart init daemon 会在事件触发的时候运行相应的程序。用户可以分别用 initctl start 和 stop 命令手动启动或终止一项工作。工作又可以分为任务和服务。</p><h2 style="margin-top: 10px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 0px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;"  >My&nbsp; job 示例</h2><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >用户也可以自己定义一个事件，并让一个工作被这个事件触发。如下的 myjob 工作定义文件定义了一个被 hithere 事件触发的工作：</p><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >$ <strong>cat /etc/event.d/myjob </strong>&nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >start on hithere script &nbsp;&nbsp;      &nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >echo “Hi there, here I am!” &gt; /tmp/myjob.out  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >date &gt;&gt; /tmp/myjob.out</pre><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  > end script</pre><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >myjob 文件提供了另一种运行命令的方法：在 script 和 end script 关键字之间包含了两行命令。这两个关键字常常导致 init 去运行 /bin/sh。例中的命令将一条消息和日期输出到了 /tmp/myjob.out 文件。现在可以使用 initctl emit 命令触发这个工作。如下，init 展示了 myjobs 在我们的触发下所经历的各个状态：</p><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >$ <strong>sudo initctl emit hithere</strong></pre><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >$&nbsp;<strong>cat /tmp/myjob.out&nbsp;</strong><br>Hi there, here I am!<br>Sun Apr 24 13:25:43 CST 2011<br>$&nbsp;<strong>sudo initctl list &nbsp;| grep myjob&nbsp;</strong><br>myjob (stop) waiting</p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >在上面的例子里，cat 展示了 myjob 产生的输出，initctl 展示了工作的状态。同样也可以用 initctl start myjob（或直接用 start myjob）来运行它。initctl start 十个非常有用的命令，这样你就可以在没有事件的情况下启动一个工作。比如，你可以用 initctl start mudat 来直接运行前面例子中的 mudat 工作而不会触发 runlevel 2 事件。</p><h2 style="margin-top: 10px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 0px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;"  >Upstart 事件监控实现</h2><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >在init daemon 中需要监测某个进程的状态，例如存在repasw机制，监测getty进程是否退出，如果退出则需要再次启动getty以便用户登录。 为实现对事件的监测，要么采用轮询要么采用事件驱动的回调机制，upstart采用事件驱动机制。为实现基于事件驱动的机制，通常涉及跨进程调用，Upstart利用dbus来完成iPC通信。但upstart init daemon启动时dbus-daemon并没有运行，实际dbus-daemon是由upstart来启动。因此，upstart 采用&nbsp; private D-bus 连接（unxi:address=/com/ubuntu/upstart）来实现IPC；其它进程（如telinit等）通过该连接来通知init daemon 产生某个事件。<br>Upstart init daemon 运行时会产生startup事件，在/etc/init下很多job都start on 该事件，其中比较著名的是：<br>rc-default job . 该job会调用telinit N来登录N用户级别，同时产生runevel事件。而runevel事件触发ttyN job，从而调用getty程序。对于图形界面的登录程序如gdm的触发为另外的条件，后面再续。<br>为完成监控内核事件，例如usb的热插拔，upstart提供upstart-udev-bridge.conf job来完成该功能,即在/etc/init 下存在upstart-udev-bridge.conf 文件。当udev event发生时，该job将产生 upstart事件通知init。这类事件通常采用如下格式：<br>“&lt;udev_subsystem&gt;-device-&lt;udev_action&gt;<br>因此upstart-udev-bridge.conf 可能为：</p><pre style="margin-top: 0px; margin-bottom: 12px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-size: 15px; line-height: 22px;"  >net-device-added net-device-removed graphics-device-added drm-device-added</pre><h2 style="margin-top: 10px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 0px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;"  >用户自动登录和定制XWindows</h2><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >在工作中，常常存在如下需求：</p><ul style="margin-top: 0px; margin-bottom: 8px; margin-left: 0px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 15px; list-style-type: circle; list-style-position: inside; list-style-image: none;"  >开机运行linux，自动登录，无需输入用户名密码；</li><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 15px; list-style-type: circle; list-style-position: inside; list-style-image: none;"  >登录后自动运行我们的GUI软件，且无需ubuntu等桌面环境</li></ul><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >在使用upstart的ubuntu系统中，控制登录的脚本主要是：</p><ul style="margin-top: 0px; margin-bottom: 8px; margin-left: 0px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 15px; list-style-type: circle; list-style-position: inside; list-style-image: none;"  >/etc/init/ttyN.conf</li><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 15px; list-style-type: circle; list-style-position: inside; list-style-image: none;"  >/etc/init/gdm.conf</li></ul><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >Gdm.conf用户启动gdm，即ubuntu的图形桌面；由于我们并不需要桌面，因此首先删除gdm.conf. 删除gdm.conf将不能启动linux GUI桌面，但由于我们开机运行的GUI软件本质还是一个X11 Client程序，因此需要启动X Server。这时可以startx 脚本就派生用场了，在传统的用户text模式下，大都通过startx进入GUI系统。因此我们可以配置.xinitrc 脚本： 例如如下:<br>// user gui programmer<br>Metacity</p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >为保证用户登录后即运行startx，可以在~/.bash_profile 中写入：<br>exec startx<br>上述过程保证了用户登录后即运行startx 启动了用户程序，但如何实现用户自动登录呢？ 这需要修改/etc/init/ttyN.conf ，默认使用getty程序登录，该程序不支持用户自动登录。Linux下有一个叫minigetty 程序支持该功能，下载并修改/etc/init/ttyN.conf 文件，大致如下：<br>Exec /sbin/mingetty Cautologin root tty1</p><h2 style="margin-top: 10px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 0px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;"  >其它init 实现</h2><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >Systemd是一个比upstart设计思路更超前的init系统，见<a style="color: rgb(0, 64, 255); text-decoration: none; outline-style: none; " rel="nofollow" href="http://0pointer.de/blog/projects/systemd.html"  >http://0pointer.de/blog/projects/systemd.html</a>。&nbsp;&nbsp; 其核心是为了加快linux的启动速度，研究如何并行化启动init以后的用户进程，可以参考&nbsp;<a style="color: rgb(47, 99, 179); text-decoration: none; outline-style: none; " rel="nofollow" href="http://linuxtoy.org/archives/more-than-upstart-systemd.html"  >http://linuxtoy.org/archives/more-than-upstart-systemd.html</a></p><h1 style="margin-top: 3px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 5px; padding-right: 12px; padding-bottom: 5px; padding-left: 12px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;"  >参考文献</h1><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><a style="color: rgb(47, 99, 179); text-decoration: none; outline-style: none; " rel="nofollow" href="http://linuxtoy.org/archives/more-than-upstart-systemd.html"  >http://linuxtoy.org/archives/more-than-upstart-systemd.html</a></p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><a style="color: rgb(47, 99, 179); text-decoration: none; outline-style: none; " rel="nofollow" href="http://labs.chinamobile.com/mblog/225_2804"  >http://labs.chinamobile.com/mblog/225_2804</a></p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><a style="color: rgb(47, 99, 179); text-decoration: none; outline-style: none; " rel="nofollow" href="http://upstart.at/"  >http://upstart.at/</a></p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><br></p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><br></p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  >----------------------------------------------------------------</p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-weight: bold; line-height: 21px; text-align: -webkit-auto;"  >RHEL6启动过程</span> </p><p style="margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >在 Red Hat Enterprise Linux 6 中，sysvinit 软件包中的 init 已经由 Upstart 替换，它是基于事件的 init 系统。这个系统可处理在引导过程中的任务和服务启动，在关机过程中关闭它们并在系统运行时监控它们。有关 Upstart 的详情请参考 init(8) man page。Upstart 识别为任务的进程是由 /etc/init 目录中的文件定义。可以说rhel6的启动流程发生了比较大的变化。对于熟悉其流程非常重要，对系统的排错有莫大的帮助。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >1、BIOS加电，进行硬件自检。然后产生int 19的终端，读取第一个可引导的设备，比如自检，初始化各种芯片，控制器，与端口；包括显示器，内存，键盘，软驱，串口等等最终，POST(Power-On Self Test)执行INT 19h中断，找到可以启动的磁盘，并将boot程序装入内存，并将控制权交给OS的boot程序。当BIOS INT 19h被执行以后，系统进入OS Booting阶段。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >2、一块硬盘，有一个主引导记录，就是0面0道1扇区，又称MBR。MBR是由BIOS自动装载到内存中并CPU跳转过去执行的。主引导记录（Master Boot Record，缩写：MBR），又叫做主引导扇区，是计算机开机后访问硬盘时所必须要读取的首个扇区，它在硬盘上的三维地址为（柱面，磁头，扇区）＝（0，0，1）。共512 Byte。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >______________________________________________________________________________</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >| | | |</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >| 引导代码 446 Byte | 分区表 64 Byte | 结束符2 Byte |</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >|________________________________________|_____________________|______________|</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >------------------------------------------------------------------------―---------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >3、读取第一个可引导的设备的MBR的BootLoader程序，在rhel系统上是Grub.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >stage1：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >/boot/grub中的stage1文件大小为512b，它是引导扇区中引导程序（前446字节为引导程序）的备份文件，功能是用来装载 stage1.5或stage2的。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >stage1.5：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >因为STAGE2较大，通常都是放在一个文件系统当中的，但是STAGE1并不能识别文件系统格式，所以才需要stage1.5来引导位于某个文件系统当中的STAGE2，根据文件系统格式的不同，STAGE1.5也需要相应的文件，如：e2fs_stage1_5，fat_stage1_5，分别用于识别ext和fat的文件系统格式。但是，当stage1加载1.5时，原则上是不认识ext文件系统的，应该也是无法找到1.5程序的，而实际上在安装grub时，程序已经把1.5程序写到硬盘最前面的32K中，因为紧连着MBR的一段硬盘空间通常是空白无用的，grub就把stage1.5程序写到这个地方，这个地方没有文件系统，stage1程序可以直接去加载stage1.5。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >4、Grub进程第二阶段引导，读取/boot/grub/grub.conf配置文件，根据配置文件中的定义，加载相应的内核，内核再加载相应的硬件驱动，进行必要的基础硬件初始化</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >stage2：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >grub能让用户以选项方式将OS加载、改变参数、修改选项，这些全都是stage2程序的功能。stage2可以去获取grub.conf以及menu.lst等文件的内容。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# ls /boot/</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >config-2.6.32-71.el6.i686 &lt;===系统kernel的配置文件，内核编译完成后保存的就是这个配置文件</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >efi &lt;===Extensible Firmware Interface（EFI，可扩展固件接口）是 Intel 为全新类型的 PC 固件的体系结构、接口和服务提出的建议标准。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >grub &lt;===开机管理程序grub相关数据目录</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initramfs-2.6.32-71.el6.i686.img &lt;===虚拟文件系统文件（RHEL6用initramfs代替了initrd，他们的目的是一样的，只是本身处理的方式有点不同）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initrd-2.6.32-71.el6.i686.img &lt;===此文件是linux系统启动时的模块供应主要来源，initrd的目的就是在kernel加载系统识别cpu和内存等内核信息之后，让系统进一步知道还有那些硬件是启动所必须使用的；</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >symvers-2.6.32-71.el6.i686.gz &lt;===模块符号信息</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >System.map-2.6.32-71.el6.i686 &lt;===是系统kernel中的变量对应表；(也可以理解为是索引文件)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >vmlinuz-2.6.32-71.el6.i686 &lt;===系统使用kernel，用于启动的压缩内核镜像。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# cat /boot/grub/grub.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># grub.conf generated by anaconda</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># Note that you do not have to rerun grub after making changes to this file</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># NOTICE: You have a /boot partition. This means that</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># all kernel and initrd paths are relative to /boot/, eg.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># root (hd0,0)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># kernel /vmlinuz-version ro root=/dev/sda3</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># initrd /initrd-[generic-]version.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#boot=/dev/sda</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >default=0</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >timeout=5</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >splashimage=(hd0,0)/grub/splash.xpm.gz</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >hiddenmenu</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >title Red Hat Enterprise Linux (2.6.32-71.el6.i686)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >root (hd0,0)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >kernel /vmlinuz-2.6.32-71.el6.i686 ro root=UUID=bfd97ccd-15df-4e0f-8a66-b2da62213f62</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >rd_NO_LUKS rd_NO_LVM rd_NO_MD rd_NO_DM</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >LANG=en_US.UTF-8 SYSFONT=latarcyrheb-sun16 KEYBOARDTYPE=pc KEYTABLE=us crashkernel=auto rhgb quiet</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initrd /initramfs-2.6.32-71.el6.i686.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >default #启动系统时在人为不干预的情况下，默认读取哪一个title，如果安装了多个不同版本内核或者安装了不用的操作系统，默认会产生多个title，#0第一个，1第二个，以此类推。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >timeout #开机等待用户的超时时间，单位为秒。在超时时间结束时，如果用户没有人为选择，则以default指定的title读取。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >splashimage=(hd0,0)/grub/splash.xpm.gz #grub的背景图案</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >hiddenmenu #隐藏菜单</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >title Red Hat Enterprise Linux (2.6.32-71.el6.i686) #title后为指定的菜名字</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >root (hd0,0)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#root 这里不是管理员的意思，这里的root表示为根文件系统，hd代表硬盘（不区分IDE、SCSI），第一个0：第一个硬盘，第二个0：第一个分区。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#这里的意思是定义第一个硬盘的第一个分区为根文件系统。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >kernel /vmlinuz-2.6.32-71.el6.i686 ro root=UUID=bfd97ccd-15df-4e0f-8a66-b2da62213f62 rd_NO_LUKS rd_NO_LVM rd_NO_MD rd_NO_DM LANG=en_US.UTF-8 SYSFONT=latarcyrheb-sun16 KEYBOARDTYPE=pc KEYTABLE=us crashkernel=auto rhgb quiet</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initrd /initramfs-2.6.32-71.el6.i686.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#kernel /vmlinuz-2.6.32-71.el6.i686</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >由boot loader的管理而开始读取内核文件后，接下来，Linux 就会将内核解压缩到主存储器当中， 并且利用内核的功能，开始测试与驱动各个周边设备，包括储存设备、CPU、网卡、声卡等等。 此时 Linux 内核会以自己的功能重新检测一次硬件，而不一定会使用 BIOS 检测到的硬件信息。也就是说，内核此时才开始接管 BIOS 后的工作。内核一般来说，它会被放置到 /boot 里面，并且取名为 /boot/vmlinuz。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#ro root=UUID=bfd97ccd-15df-4e0f-8a66-b2da62213f62</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Linux内核是可以通过动态加载内核模块的 (就请想成驱动程序即可)，这些内核模块就放在 /lib/modules/目录内。由于模块放到磁盘根目录内(这就是为什么/lib不可以与/ 分别放在不同的分区原因)， 因此在开机的过程中内核必须要挂载根目录，这样才能够读取内核模块提供加载驱动程序的功能。 而且为了担心影响到磁盘内的文件系统，开机过程中根目录是以只读的方式来挂载的。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#rd_NO_LUKS rd_NO_LVM rd_NO_MD rd_NO_DM LANG=en_US.UTF-8 SYSFONT=latarcyrheb-sun16 KEYBOARDTYPE=pc</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >KEYTABLE=us crashkernel=auto rhgb quiet</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Speeding up the Boot Process</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >If you want to speed up the boot process, you can specify as much information for dracut on the kernel command as possible. For example, you</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >can tell dracut, that you root partition is not on a LVM volume or not on a raid partition, or that it lives inside a specific crypto LUKS encrypted</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >volume. By default, dracut searches everywhere. A typical dracut kernel command line for</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >a plain primary or logical partition would contain:</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >rd_NO_LUKS rd_NO_LVM rd_NO_MD rd_NO_DM （elinks /usr/share/doc/dracut-004/dracut-rhel6.html or man 8 dracut）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >This turns off every automatic assembly of LVM, MD raids, DM raids and crypto LUKS.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Keyboard Settings</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >If you have to input passwords for encrypted disk volumes, you might want to set the keyboard layout and specify a display font.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >A typical german kernel command would contain:</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >LANG=de_DE.UTF-8 SYSFONT=latarcyrheb-sun16 KEYBOARDTYPE=pc KEYTABLE=de-latin1-nodeadkeys</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >rhgb表示redhat graphics boot，就是会看到图片来代替启动过程中显示的文本信息，这些信息在启动后用dmesg也可以看到</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >quiet表示在启动过程中只有重要信息显示，类似硬件自检的消息不回显示crashkernel=auto kdump使用的内存空间</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#initrd /initramfs-2.6.32-71.el6.i686.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >boot loader装入kernel，然后kernel需要执行/sbin/init，读取这个文件就必须先mount根文件系统，早期是通过启动时的root="参数"告诉内核根文件系统在哪个设备上，随着硬件和技术的发展，现在根文件系统可能位于一个网络存储如NFS上，可能由于RAID而散布于多个设备上，可能位于一个加密设备上需要提供用户名和密码，这时root="参数"就显得不够了。为了应付这种局面，先后出现两种机制来作为boot loader装载kernel到真正的/sbin/init执行这个启动过程的桥梁: initrd和nitramfs</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initrd:</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >虚拟文件系统(Initial RAM Disk) 一般使用的文件名为 /boot/initrd ，这个文件的作用是，能够通过 boot loader 来加载到内存中， 然后这个文件会被解压缩并且在内存当中仿真成一个根目录， 且此仿真在内存当中的文件系统能够提供一支可执行的程序，通过该程序来加载开机过程中所最需要的内核模块，通常这些模块就是 USB, RAID, LVM,SCSI 等文件系统与磁盘接口的驱动程序。等载入完成后，会帮助内核重新呼叫 /sbin/init 来开始后续的正常开机流程。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Initial RAM Disk是一个基于ram的块设备，因此它占据了一块固定的内存，而且事先要使用特定的工具比如mke2fs格式化，还需要一个文件系统驱动来读写其上的文件。如果这个disk上的空间没有用完，这些未用的内存就浪费掉了，并且这个disk的空间固定导致容量有限，要想装入更多的文件就需要重新格式化。由于Linux的块设备缓冲特性，ram disk上的数据被拷贝到page cache(对于文件数据)和dentry cache(对于目录项)，这个也导致内存浪费。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initramfs:</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >最初的想法是Linus提出的: 把cache当作文件系统装载。 他在一个叫ramfs的cache实现上加了一层很薄的封装，其它内核开发人员编写了一个改进版tmpfs， 这个文件系统上的数据可以写出到交换分区，而且可以设定一个tmpfs装载点的最大尺寸以免耗尽内存。initramfs就是tmpfs的一个应用。Linux 2.6 kernel提出了这种新的实现机制，即</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initramfs。顾名思义，initramfs只是一种RAM filesystem而不是disk。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initramfs的优点:</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >(1)tmpfs随着其中数据的增减自动增减容量。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >(2)在tmpfs和page cache/dentry cache之间没有重复数据。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >(3)tmpfs重复利用了Linux caching的代码，因此几乎没有增加内核尺寸，而caching的代码已经经过良好测试，所以tmpfs的代码质量也有保证。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >(4)不需要额外的文件系统驱动。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >另外，initrd机制被设计为旧的"root="机制的前端，而非其替代物，它假设真正的根设备是一个块设备，而且也假设了自己不是真正的根设备，这样不便将NFS等作为根文件系统，最后/linuxrc不是以PID=1执行的，因为1这个进程ID是给/sbin/init保留的。initrd机制找到真正的根设备后将其设备号写入/proc/sys/kernel/real-root-dev，然后控制转移到内核由其装载根文件系统并启动/sbin/init。initramfs则去掉了上述假设，而且/init以PID=1执行，由init装载根文件系统并用exec转到真正的/sbin/init，这样也</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >导致一个更为干净漂亮的设计。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >下面让我们来看看initrd文件的具体内容，</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# mkdir /tmp/initramfs/</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# cp /boot/initramfs-2.6.32-71.el6.i686.img /tmp/initramfs/</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# cd /tmp/initramfs/</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba initramfs]# file initramfs-2.6.32-71.el6.i686.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initramfs-2.6.32-71.el6.i686.img: gzip compressed data, from Unix, last modified: Wed Aug 24 23:14:47 2011, max compression</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >我们可以看到，这个文件是GZIP压缩的文件，我们把后缀改成gz，然后再进行解压</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba initramfs]# mv initramfs-2.6.32-71.el6.i686.img initramfs-2.6.32-71.el6.i686.img.gz</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba initramfs]# gunzip initramfs-2.6.32-71.el6.i686.img.gz</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >解压后，我们再来看看这个文件是什么类型的</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba initramfs]# file initramfs-2.6.32-71.el6.i686.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initramfs-2.6.32-71.el6.i686.img: ASCII cpio archive (SVR4 with no CRC)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >是cpio压缩成的文件</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba initramfs]# cpio -iv &lt; initramfs-2.6.32-71.el6.i686.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba initramfs]# ls -l</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >total 29708</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 bin</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 cmdline</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 3 root root 4096 Sep 19 14:52 dev</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >-rw-r--r--. 1 root root 18 Sep 19 14:52 dracut-004-32.el6</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 emergency</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 7 root root 4096 Sep 19 14:52 etc</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >-rwxr-xr-x. 1 root root 8088 Sep 19 14:52 init</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 initqueue</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 initqueue-finished</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 initqueue-settled</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >-rw-r--r--. 1 root root 30326784 Sep 19 14:57 initramfs-2.6.32-71.el6.i686.img</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 9 root root 4096 Sep 19 14:52 lib</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 mount</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 pre-pivot</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 pre-trigger</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 pre-udev</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 proc</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 sbin</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 sys</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 sysroot</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 2 root root 4096 Sep 19 14:52 tmp</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 6 root root 4096 Sep 19 14:52 usr</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >drwxr-xr-x. 3 root root 4096 Sep 19 14:52 var</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >看结果，和我们系统中的/很类似。（有兴趣，慢慢了解）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >5、在内核加载完毕、进行完硬件检测与驱动程序加载后，此时主机硬件已经准备就绪了，这时候内核会主动的呼叫第一支程序，那就是 /sbin/init。/sbin/init 最主要的功能就是准备软件执行的环境，包括系统的主机名、网络设定、语言、文件系统格式及其他服务的启动等。 而所有的动作都会通过 init的配置文件/etc/inittab来规划，而inittab 内还有一个很重要的设定内容，那就是默认的 runlevel (开机运行级别)。先来看看运行级别Run level,Linux就是通过设定run level来规定系统使用不同的服务来启动，让Linux的使用环境不同。我们来看看这个inittab文件里面的支持级别（RHEL6系统里面的，和以前的其它版本有很大的差别）.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# cat /etc/inittab</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># inittab is only used by upstart for the default runlevel.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># ADDING OTHER CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># System initialization is started by /etc/init/rcS.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># Individual runlevels are started by /etc/init/rc.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># with configuration in /etc/sysconfig/init.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># For information on how to write upstart event handlers, or how</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># upstart works, see init(5), init(8), and initctl(8).</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># Default runlevel. The runlevels used are:</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># 0 - halt (Do NOT set initdefault to this) (系统直接关机)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># 1 - Single user mode (单用户模式，用在系统出问题时的维护)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># 2 - Multiuser, without NFS (The same as 3, if you do not have networking) (类似底下的 runlevel 3，但无 NFS 服务)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># 3 - Full multiuser mode (完整含有网络功能的字符模式)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># 4 - unused (系统保留，未使用)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># 5 - X11 (与 runlevel 3 类似，但加载使用 X Window)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># 6 - reboot (Do NOT set initdefault to this) (重新启动)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >id:5:initdefault:</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >注意：0, 4, 6 不是关机、重新启动就是系统保留的，所以不能将预设的run level设定为这三个值。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >RHEL6系统上的这个文件和以前的版本有很大的差别，目前这个文件只能设置运行级别，其它的相关配置文件，在此文件中已经做了说明如：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >System initialization is started by /etc/init/rcS.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Individual runlevels are started by /etc/init/rc.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,with configuration in /etc/sysconfig/init.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >从这个文件我们已经看出，红帽已经使用新的Upstart启动服务来替换以前的init.在RHEL6的版本中，我们可以把/etc/init/这个目录里面的内容，看成是以前/etc/inittab这个文件里的拆分。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >我们可能通过man inittab来查看</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >DESCRIPTION</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >The /etc/inittab file was the configuration file used by the original</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >System V init(8) daemon.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >The Upstart init(8) daemon does not use this file, and instead reads</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >its configuration from files in /etc/init. See init(5) for more</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >details.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >UpStart: 基于事件的启动系统</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Sysvinit:基于结果的启动系统</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >SysVinit守护进程（sysvinit软件包）是一个基于运行级别的系统，它使用运行级别（单用户、多用户以及其他更多级别）和链接（位于/etc /rc?.d目录中，分别链接到/etc/init.d中的init脚本）来启动和关闭系统服务。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >Upstart init守护进程（upstart软件包）则是基于事件的系统，它使用事件来启动和关闭系统服务。几个很重要的定义</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >event: 事件， 是指系统状态的一种改变，这种改变会被通知给init进程。举例来说，boot loader会触发startup事件，系统进入runlevel 2的时候会触发runlevel 2事件，某个文件系统被挂载时会触发path-mounted事件， USB设备的插拔也都会产生相应的事件。这些时间会被通知给init进程，然后init进程来决定系统如何处理这些事件</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >job: 作业，一项作业是init进程读入的一系列指令。你可以使用initctl start或initctl stop命令来开始或停止某项作业，这是调用作业的一种方式。另一种方式是当系统被告知发生什么事件event后，运行该事件所对应的作业。可用sudo initctl list命令列出所有系统作业的运行状态。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >task: 任务， a job that performs its work and returns to a waiting state when it is done. 中文是一种完成指定工作后进去等待状态的作业。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >service: 服务，a job that does not normally terminate by itself. 举个例子来说， gettys 是以服务来实现的。 init进程监视所有服务，并在服务失败的时候重启服务。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >原有的System V init启动过程的缺点是，它基于包含了大量启动脚本的runlevel目录。而Upstart则是事件驱动型的，因此，它只包含按需启动的脚本，这将使启动过程变得更加迅速。经过良好调优并使用Upstart启动方式的Linux服务器的启动速度要明显快于原有的使用System V init的系统。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >为了使Upstart更容易理解，它仍然使用了一个init进程。所以，你仍然可以看到/sbin/init，它是所有服务的根进程。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >有一个好消息，那就是RHEL 6对启动过程的改变很少。你还是可以处理那些在目录/etc/init.d中的包含服务脚本的服务，所以runlevel的概念一直存在。因此，在使用yum增加一个服务后，照样可以像以前那样使用chkconfig命令激活它。此外，仍然可以用service命令来启动它。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >6、System initialization is started by /etc/init/rcS.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# cat /etc/init/rcS.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># Note: there can be no previous runlevel here, if we have one it's bad</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># information (we enter rc1 not rcS for maintenance). Run /etc/rc.d/rc</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># without information so that it defaults to previous=N runlevel=S.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >console output</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >exec /etc/rc.d/rc.sysinit</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >/etc/rc.d/rc.sysinit 这个文件做了哪些工作：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >1、获得网络环境</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >2、挂载设备</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >3、开机启动画面Plymouth（取替了过往的 RHGB）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >4、判断是否启用SELinux</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >5、显示于开机过程中的欢迎画面</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >6、初始化硬件</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >7、用户自定义模块的加载</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >8、配置内核的参数</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >9、设置主机名</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >10、同步存储器</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >11、设备映射器及相关的初始化</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >12、初始化软件磁盘阵列（RAID）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >13、初始化 LVM 的文件系统功能</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >14、检验磁盘文件系统（fsck）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >15、磁盘配额(quota)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >16、重新以可读写模式挂载系统磁盘</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >17、更新quota（非必要）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >18、启动系统虚拟随机数生成器</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >19、配置机器（非必要）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >20、清除开机过程当中的临时文件</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >21、创建ICE目录</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >22、启动交换分区（swap）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >23、将开机信息写入/var/log/dmesg文件中</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >这个文件里面的许多预设配置文件在/etc/sysconfig/这个目录当中，要想更多的系统启动信息，大家可以到/var/log/dmesg文件中查看，也可以用dmesg命令来查看。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >7、Individual runlevels are started by /etc/init/rc.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# cat /etc/init/rc.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># rc - System V runlevel compatibility</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># This task runs the old sysv-rc runlevel scripts. It</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># is usually started by the telinit compatibility wrapper.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >start on runlevel [0123456]</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >stop on runlevel [!$RUNLEVEL]</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >task</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >export RUNLEVEL</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >console output</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >exec /etc/rc.d/rc $RUNLEVEL</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >系统服务的启动经过 /etc/rc.sysinit 的系统模块与相关硬件信息的初始化后，RHEL6系统应该已经能顺利工作了。但还需要启动一些为我们提供服务的服务。这个时候，依据在/etc/inittab里面run level的设定值，就可以来决定启动的服务项目了。大家可以打开/etc/rc这个文件来研究.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >以运行级别3为例</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# ls /etc/rc3.d/</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K01certmonger K80sssd S08iptables S25netfs</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K01smartd K84wpa_supplicant S10network S26acpid</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K02oddjobd K86cgred S11auditd S26haldaemon</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K10psacct K87restorecond S12rsyslog S26udev-post</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K10saslauthd K88nslcd S13cpuspeed S28autofs</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K50dnsmasq K89rdisc S13irqbalance S55sshd</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K50netconsole K95cgconfig S13rpcbind S64mysqld</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K60nfs K95firstboot S15mdmonitor S80postfix</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K69rpcsvcgssd K99stap-server S22messagebus S82abrtd</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K73ypbind S00microcode_ctl S23NetworkManager S85httpd</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K74nscd S01sysstat S24avahi-daemon S90crond</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K74ntpd S02lvm2-monitor S24nfslock S95atd</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K75ntpdate S03vmware-tools S24rpcgssd S97rhnsd</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K80kdump S08ip6tables S24rpcidmapd S99local</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >在这个目录下的文件主要具有2个特点：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >1、全部以Sxx或Kxx（xx为数字）开头</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >2、全部是连结文件，连结到/etc/init.d/</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >现在来说明一下这些的目的</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >S表示启动服务</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >K表示停止服务</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >后面的数字是启动的先后顺序</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >以S55sshd来举例</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# ls -l /etc/rc3.d/S55sshd</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >lrwxrwxrwx. 1 root root 14 Aug 24 23:08 /etc/rc3.d/S55sshd -&gt; ../init.d/sshd</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >意思就是</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >/etc/rc3.d/S55sshd = /etc/init.d/sshd start</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >8、用户自定义开机启动脚本</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >上面讲到的都是一些系统服务，Linux系统容许安装其它的软件来提供服务，那我想要自己安装的服务也要在开机启动，那怎么办，没有关系，找 /etc/rc.local 来完成。这就是我们要讲的用户自定义开机启动脚本。我们只要把想启动的脚本写到这个文件中，开机就能启动了，注意一点，写在这里面的脚本要使用绝对路径。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >9、在/etc/init/start-ttys.conf中我们可以看到有4个纯文本终端（tty[2-5]）。我们可以用[Ctrl+Alt+F2~F5]来切换这些终端。如果要切换到X window终端我们可以用</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[Ctrl+Alt+F1]</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# cat /etc/init/start-ttys.conf</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >#</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ># This service starts the configured number of gettys.</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >start on stopped rc RUNLEVEL=[2345]</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >env ACTIVE_CONSOLES=/dev/tty[1-6]</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >env X_TTY=/dev/tty1</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >task</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >script</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >. /etc/sysconfig/init</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >for tty in $(echo $ACTIVE_CONSOLES) ; do</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[ "$RUNLEVEL" = "5" -a "$tty" = "$X_TTY" ] &amp;&amp; continue</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >initctl start tty TTY=$tty</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >done</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >end script</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >注：虚拟机个与真实的环境还是有区别的，有很多快捷键是冲突的，所以这个需要自行实验获得。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >10、加载终端或X-Window接口在完成了系统所有服务的启动后，接下来Linux就会启动终端或者是X Window来等待使用者登陆了！</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >----------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >在文件/etc/sysconfig/init中还有一些额外的配置。在这里，定义了一些参数来决定启动信息的格式。除了那些不很重要的设置，有三行我们需要注意：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >AUTOSWAP=no</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >ACTIVE_CONSOLES=/dev/tty[1-6]</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >SINGLE=/sbin/sushell</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >AUTOSWAP：这一行的值你可以设定为Yes，这样可以让你的系统能够自动检测交换分区。使用此选项意味着你再也不必在/etc/fstab中挂载交换分区了。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >ACTIVE_CONSOLES：这一行决定了虚拟控制台的创建。在大多数情况下，tty[1-6]工作得很好，同时这个选项也允许您分配更多或者更少的虚拟控制台。但是要注意，不要使用tty [1-8]，因为tty7是专门为图形界面预留的。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >SINGLE=/sbin/sushell：这一行可以有两个参数：/sbin/sushell（系统默认的参数），它会在启动单用户模式时将你带入一个root的 shell，参数/sbin/sulogin会在单用户模式启动之前弹出一个登录提示，你必须输入root账户的密码才能继续下去。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >****************************************************************************************************************</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >下面是RHEL6上面Upstart大致的一个启动过程：</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >1.内核启动init</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >2.系统初始化：（/etc/init/rcS.conf exec /etc/rc.d/rc.sysinit）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >3.init找到/etc/inittab文件，确定默认的运行级别(X) （/etc/init/rcS.conf exec telinit $runlevel）</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >4.触发相应的runlevel事件(/etc/init/rc.conf exec /etc/rc.d/rc $RUNLEVEL)</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >5.开始运行/etc/rc.d/rc,传入参数X</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >6./etc/rc.d/rc脚本进行一系列设置，最后运行相应的/etc/rcX.d/中的脚本</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >7./etc/rcX.d/中的脚本按事先设定的优先级依次启动</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >8.最后执行/etc/rc.d/rc.local</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >9.加载终端或X-Window接口</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >想要了解更多的内容，请大家打开/etc/init/这个目录里面的文件看看。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >****************************************************************************************************************</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >运行级别的切换</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >通过上面的学习，我们知道run level是在/etc/rc.sysinit 执行完毕之后，而run level 的不同</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >之处仅是/etc/rc[0-6].d 里面启动的服务不同而已。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >如果我们切换run level只需要停止与启动一些服务就OK，那么要如何来实现，其它很简单，用init n(数字)来切换。</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# runlevel</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >N 5</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >5：当前的运行级别</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >N：在当前运行级别之前运行过什么运行级别，因为例中开机就是运行级别5，之前没有运行过其他运行级别，所以是N</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >[root@osdba~]# init 3</span><br style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  ><span style="color: rgb(0, 0, 0); font-family: 'Microsoft YaHei', 微软雅黑, Arial, 'Lucida Grande', Tahoma, sans-serif; font-size: 13px; line-height: 24px; text-align: -webkit-auto; text-indent: 26px;"  >以上是自己的结合上课时的零星总结，如有错误，望大家指正。</span> </p><wbr><p style="margin-top: 0px; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >With RHEL6 having been released last November, half a year of aging has given me the opportunity to let some of its new features sink in. Definitely my 2 favorites are the introduction of upstart, to replace the aging Sysv init startup mechanism, and the introduction of advanced resource management with Cgroups.<br>Upstart has been available in Ubuntu since the release of edgy in 2006, and soon after it got picked up by other distributions as well. Upstart is an event-driven init daemon. As a consequence, unlike the previous requirement of having multiple runlevels, with each service defined to start in a particular sequence, Upstart will only start a service if there is an external event requiring it. i.e. It will only start Bluetooth services if there is Bluetooth hardware detected. This has the benefit that a large part of the service configuration is handled automatically and since only necessary services will run, you will have faster startup times and less resource consumption. Upstart still regards a change in runlevel as an event, so most services will still use their old rc style init scripts. As a consequence you can still use chkconfig to control these startup scripts or use the service command to manipulate these services. But for other functionalities, like setting up serial console, you will have to use an upstart job instead of the old way of doing it through inittab.<br>One good example is when you want to setup a serial console for qemu if you are testing rhel6 in a KVM virtual machine. By default the upstart script /etc/init/serial.conf will start a serial console if the primary console in grub is set to a serial console. If you want a serial console that is not the primary console, you will have to create your own upstart script:<br>[<a style="text-decoration: none; -webkit-transition-property: all; -webkit-transition-duration: 0.3s; -webkit-transition-timing-function: linear; -webkit-transition-delay: initial; color: rgb(254, 157, 10); " rel="nofollow" href="mailto:root@localhost"  >root@localhost</a>&nbsp;~]# cat /etc/init/Stty.conf<br>stop on runlevel [016]<br>start on runlevel [345]</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >respawn<br>instance /dev/ttyS0<br>exec /sbin/mingetty /dev/ttyS0</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >The first 2 lines of the script are called the event definition. Upstart needs to now for each service defined in /etc/init, what event will trigger a change in the state of the service. In this case we tell upstart to start the service in runlevels 3, 4 and 5 and to stop the service in runlevel 0, 1 and 6</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >The rest of the script is what is called the process definition. Here you define what to run and how to run it. In this case we tell upstart to respawn the getty process if it dies, to ensure that there is only one instance running that uses /dev/ttyS0 and we specify the getty command to run.</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >Now that we’ve create the upstart service we can manipulate it with the initctl tool:</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >[<a style="text-decoration: none; -webkit-transition-property: all; -webkit-transition-duration: 0.3s; -webkit-transition-timing-function: linear; -webkit-transition-delay: initial; color: rgb(254, 157, 10); " rel="nofollow" href="mailto:root@localhost"  >root@localhost</a>&nbsp;~]# initctl start Stty</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >[<a style="text-decoration: none; -webkit-transition-property: all; -webkit-transition-duration: 0.3s; -webkit-transition-timing-function: linear; -webkit-transition-delay: initial; color: rgb(254, 157, 10); " rel="nofollow" href="mailto:root@localhost"  >root@localhost</a>&nbsp;~]# initctl status Stty<br>Stty (/dev/ttyS0) start/running, process 18425<br>Now that we have a serial console running we can connect to it on the hardware node:</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >[:<a style="text-decoration: none; -webkit-transition-property: all; -webkit-transition-duration: 0.3s; -webkit-transition-timing-function: linear; -webkit-transition-delay: initial; color: rgb(254, 157, 10); " rel="nofollow" href="mailto:root@somehost"  >root@somehost</a>:/root]$ virsh list<br>Id Name State<br>----------------------------------<br>2 test running<br>[:<a style="text-decoration: none; -webkit-transition-property: all; -webkit-transition-duration: 0.3s; -webkit-transition-timing-function: linear; -webkit-transition-delay: initial; color: rgb(254, 157, 10); " rel="nofollow" href="mailto:root@somehost"  >root@somehost</a>:/root]$ virsh console 2</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  >The version of upstart in RHEL 6 lacks some of the more recent features introduced in Ubuntu like the ability to schedule cron C like jobs and a replacement for inetd with the socket upstart event. I hope these are backported to RHEL 6 soon.</p><p style="margin-top: 1.5em; margin-bottom: 1.5em; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; font-size: 13px; line-height: 20px; text-align: -webkit-auto;"  ><br></p><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >转自：</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >http://blog.chinaunix.net/u/12679/showart_426217.html</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >upstart从Ubuntu 6.10开始被引入Ubuntu，它是/sbin/init守护进程(daemon)的代替品，是基于事件的(event-based)。它在启动期间负 责处理任务和服务的启动，系统关闭时关闭它们，并在系统运行时管理它们。我发现upstart的中文使用指南很少，就翻译了部分http: //upstart.ubuntu.com/getting-started.html，希望对大家有些帮助。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >1.编写工作(job)文件(工作文件用来指示upstart什么时候该做什么事)&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >一旦你启动和运行upstart，你会想要编写自己的工作文件。请记住工作文件的格式还未稳定，所以如果你更新了upstart，你可能要修改现有的文件。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >/etc/event.d中的文件里定义了一些工作，每个工作的名字就是这个目录里的文件名。这些文件都是普通的文本文件，而且不是可执行的。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >工作文件的格式把一个或多个的空格或跳格(tab)当作是空白，这些空白会被跳过，除非这些空白在单引号或双引号中。在引号中允许有换行，不过要在换行前加上反斜杠。注释行由#号起头，直到本行行尾。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >①exec和script&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >所有的工作文件都必须要含有exec节(exec stanza)或者script节(script stanza)。它们指定这个工作运行什么文件。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >你可以向exec传送可执行文件的路径和可选的参数。任何特殊字母(比如引号或美元符号'$')将被传送到shell来进行解释。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >exec /bin/foo --opt -xyz foo bar</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >script则把脚本代码传送给/bin/sh执行。shell的-e选项将被使用，所以任何一个命令执行失败都将终止运行脚本。script节的最后一行为"end script"。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >script&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># do some stuff&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >if [ ... ]; then&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >...&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >fi&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >end script</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >②启动前运行的脚本和结束后运行的脚本pre-start script and post-stop script&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >在运行exec或者script指定的程序之前或者之后，你可以运行一些附加的shell代码。附加代码不是用来启动主进程的，实际上他们也不能启动主进程。附加代码是用来准备运行环境和进行清理工作的。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >启动前运行的脚本指定主进程运行前所要执行的shell代码，跟script一样，所以任何一个命令执行失败都将终止运行脚本。它也以"end script"作为结束。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >pre-start script&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># prepare environment&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >mkdir -p /var/run/foo&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >end script</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >结束后运行的脚本指定主进程终止或者被杀死后运行的shell代码。任何一个命令执行失败都将终止运行脚本。它也以"end script"作为结束。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >post-stop script&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># clean up&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rm -rf /var/run/foo&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >end script&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >③start on和stop on&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >你的工作现在可以由系统管理员手动的启动和停止，然而，你也想要在事件发生时自动启动和停止一些工作。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >upstart发出(emit)的主要事件是startup。这个事件在机器第一次启动(没有可写的文件系统或网络)时发出。如果你使用upstart的工作文件范例，你还会有运行级X事件，X是0到6或者S。工作将与指定运行级的init脚本一起运行。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >其他工作可以在它们运行时生成事件。当另一个工作停止后你可以用"stopped 工作名"运行自己的工作。(you can have yours run when another job stops by using stopped job.)另一个有用的工作事件是"started 工作名"。(The other useful job event is started job.)(译者注：这段话的意思是说，一个工作的启动和停止也是事件。)&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >你可以用start on列出一些事件，表明发出这些事件时你想要启动这个工作，也可以用stop on来指明发出某些事件时你想要停止这个工作。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >start on startup&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >start on runlevel 2&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >start on runlevel 3&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >start on stopped rcS&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >start on started tty1&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >(译 者注：不知道是不是水平有限，上面的东西翻译得乱七八糟。其实说白了很简单的，假如一个工作文件包含了上面这段代码，那么这个工作会在 "startup"，"runlevel 2"，"runlevel 3"，"tty1启动"，"rcS停止"这些事件发生时运行。)&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >④控制台(console)&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >通过使用console节，你可以改变设置指定工作将信息输出到哪里，从哪里获得输入。console节你可以指定下列参数之一：output(从 /dev/console获得输入输出)；owner(输出和Control-C发送给主进程) ;none(默认参数，输入输出指定到/dev/null)。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >exec echo example&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >console output&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >2.工作控制(在终端中对工作进行控制)&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >①start和stop命令&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >在终端中运行start和stop命令，可以手动启动和停止工作，这两个命令通常被安装到/sbin。他们的参数是工作名，输出状态的改变 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># start tty1&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty1 (start) running, process 7490 active&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># stop tty1&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty1 (stop) running, process 7490 killed&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >②status命令&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >可以用status命令查询任意工作的状态。status也被安装在/sbin。它使用工作名作为命令行参数，输出每个工作的状态。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># status tty1&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty1 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># start tty1&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty1 (start) running, process 4418&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># status tty1&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty1 (start) running, process 4418&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >输出由以下部分组成：工作名 (最后被启动还是被停止) 当前状态, 进程id。&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >③initctl list命令&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >所有工作的列表和它们的状态可以用initctl list命令获得。 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># initctl list&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >control-alt-delete (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >logd (start) running, process 2347&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc-default (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc0 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc0-halt (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc0-poweroff (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc1 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc2 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc3 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc4 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc5 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rc6 (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rcS (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >rcS-sulogin (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >sulogin (stop) waiting&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty1 (start) running, process 4418&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty2 (start) running, process 7367&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty3 (start) running, process 7368&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty4 (start) running, process 7369&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty5 (start) running, process 7370&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >tty6 (start) running, process 7371&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >④initctl emit命令&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >自定义事件可以由initctl emit命令发出。所有由这个事件启动或停止的工作都会被影响到，假设有下面这个工作： 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >on bounce&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >exec echo --Bounced--&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >console output&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >下面这个命令会执行这个工作： 代码:</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ># initctl emit bounce&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >--Bounced--&nbsp;</span><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><br style="line-height: normal; color: rgb(51, 51, 51); font-family: Georgia; text-align: -webkit-auto;"  ><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  >事件可以带有参数(在emit命令中传递)和环境变量(使用-e选项)</span> <div><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ><br></span></div><div><span style="color: rgb(51, 51, 51); font-family: Georgia; line-height: 20px; text-align: -webkit-auto;"  ><br></span></div><div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Ubuntu从6.10开始逐步用Upstart()代替原来的SysVinit进行服务进程的管理。RHEL(CentOS)也都从版本6开始转用Upstart代替以往的init.d/rcX.d的线性启动方式。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　SysVinit守护进程(sysvinit软件包)是一个基于运行级别的系统，它使用运行级别(单用户、多用户以及其他更多级别)和链接(位于/etc /rc?.d目录中，分别链接到/etc/init.d中的init脚本)来启动和关闭系统服务。SysV启动是线性、顺序的。一个S20的服务必须要等待S19启动完成才能启动，如果一个启动要花很多时间，那么后面的服务就算完全无关，也必须要等。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　UpStart(Upstart init daemon)是基于事件的启动系统，它使用事件来启动和关闭系统服务。Upstart是是并行的，只要事件发生,服务可以并发启动。这种方式无疑要优越得多，因为它可以充分利用现在计算机多核的特点，大大减少启动所需的时间。<span id="more-2375"  ></span></p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Upstart是基于事件的，当系统中的什么情况发生变化时,它会运行某个特定的程序。这里被运行的程序多半是用来启动或终止服务的脚本。这个配置方式和System V在系统进入某个运行级别的时候运行init脚本的链接的概念实际上是非常类似的。只不过Upstart更加灵活一些，Upstart不仅能在运行级别改变的时候启动或终止服务,也能在接收到系统发生其他改变的信息的时候启动或终止服务。这些系统的改变被称为“事件”。例如，当Upstart从udev接收到运行时文件系统加载、打印机安装或其他类似的设备添加或删除的信息，并采取相应的行动。Upstart也可以在系统启动、关闭或某个任务状态改变的时候启动或关闭服务。<br>　　<br>　　一、作业(job)</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　一个作业(job)是init可以理解的一系列指令。典型的指令包括一个程序(二进制文件或是脚本)和事件的名称。Upstart init daemon会在事件触发的时候运行相应的作业。用户也可以分别手动用initctl start和stop 命令手动启动或终止某项工作。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　作业又可以分为任务作业(Task)、服务作业(Services)、抽象作业(Abstact Job)。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　任务作业是有确定的生命周期和终止状态的，运行并在执行结束后返回到等待状态的作业。例如：删除一个文件。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　服务作业是那些长期运行的进程，例如守护进程，通常不会自己终止。比如数据库、web服务器、ftp服务器等就被实现为服务。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　抽象作业是没有exec节或script节的作业，这样的作业仍然可以被启动和终止，但是不会被分配PID。这样作业启动后如果没有被管理员终止，会永久的运行。抽象作业只存在于Upstart自己内部，但有时个它非常有用，例如定义“永久运行”的作业，用来同步等。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　作业的10种状态：</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　waiting: 初始状态。<br>　　starting: 作业开始启动。<br>　　pre-start: 运行pre-start配置节。<br>　　spawned: 运行script或exec节。<br>　　post-start: 运行post-start节。<br>　　running: 运行完post-start节之后的临时状态，表示作业正在运行(但可能没有关联的PID)。<br>　　pre-stop:运行pre-stop节。<br>　　stopping:运行完pre-stop节之后的临时状态。<br>　　killed: 作业要被终止。<br>　　post-stop: 运行post-stop节。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　作业的状态可通过inictl status命令输出的中status域来显示给用户。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23751"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 </pre></td><td id="p2375code1"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(102, 102, 102); font-style: italic;"  >#initctl status mysql</span> mysql start<span style="font-weight: bold;"  >/</span>running, process 875</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　init daemon会监测每个服务的状态,如果服务出现问题会重启服务,在某些事件触发时或手工停止时会杀死服务。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Upstart init daemon只能监测哪些使用exec运行的作业，无法监测使用script…end script运行的作业。也就是说，服务应该使用exec运行，而任务则可以使用任意的方法。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Upstart init守护进程读取/etc/init目录下的作业配置文件，并使用inotify来监控它们的改变。配置文件名必须以.conf结尾，可以放在/etc/init/下的子目录中。每个文件定义一个服务或作业，其名称按路径名来称呼。例如定义在/etc/init/rc-sysinit.conf中的作业就称为rc-sysinit，而定义在/etc/init/net/apache.conf的作业称为net/apache。这些文件必须是纯文本且不可执行的。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　二、进程(Process)</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Process是由工作(jobs)定义的服务(Services)或者任务(Task)，它将被init daemon运行。每个job可以定义一个或者多个不同的process，分别在其生命周期的不同状态运行。除抽象作业(Abstact Job)外的所有作业配置文件都必须要含有exec节(exec stanza)或者script节(script stanza)。它们指定这个工作运行什么文件。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　在运行exec或者script指定的程序之前或者之后，你可以运行一些附加的shell代码。附加代码不是用来启动主进程的，实际上他们也不能启动主进程。附加代码是用来准备运行环境和进行清理工作的。启动前运行的脚本指定主进程运行前所要执行的shell代码，跟script一样，所以任何一个命令执行失败都将终止运行脚本。它也以”end script”作为结束。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Process定义如下：</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23752"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 </pre></td><td id="p2375code2"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(122, 8, 116); font-weight: bold;"  >exec</span> COMMAND <span style="color: rgb(122, 8, 116); font-weight: bold;"  >[</span>ARG<span style="color: rgb(122, 8, 116); font-weight: bold;"  >]</span>...</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　定义作业要运行的主进程，注意若有特殊的字符(如引号或$符)将导致整个命令被传递给Shell来运行。例如exec /usr/sbin/acpid -c $EVENTSDIR -s $SOCKET。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23753"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 </pre></td><td id="p2375code3"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >Scritp ...... <span style="color: rgb(122, 8, 116); font-weight: bold;"  >exec</span><span style="font-weight: bold;"  >|</span>end script</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　定义Shell脚本来运行指定的主进程，该脚本由sh来执行。Shell的-e选项总是被使用，因此任何命令失败将导致脚本终止。注意作业的主进程只能用exec或script节中的一种来定义，不能同时用exec和script配置节来定义。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23754"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 </pre></td><td id="p2375code4"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >Pre-start ...... <span style="color: rgb(122, 8, 116); font-weight: bold;"  >exec</span><span style="font-weight: bold;"  >|</span>end script</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　本进程在作业的starting事件完成之后，主进程运行之前执行。通常用来准备相关环境，例如创建必要的目录。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23755"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 </pre></td><td id="p2375code5"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >Post-start  ...... <span style="color: rgb(122, 8, 116); font-weight: bold;"  >exec</span><span style="font-weight: bold;"  >|</span>end script</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　本进程在作业的started事件触发之前，主进程产生之前执行。通常用来发送必要的命令给主进程，或者用来延迟started事件，直到主进程准备好接收客户端的访问。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23756"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 </pre></td><td id="p2375code6"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >Pre-stop  ...... <span style="color: rgb(122, 8, 116); font-weight: bold;"  >exec</span><span style="font-weight: bold;"  >|</span>end script</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　本进程在作业被stop on节中的一个事件停止或被stop命令停止时执行。它在作业的stopping事件之前，及主进程被杀死之前执行。通常用来发送必要的shutdown命令给主进程，或调用不带参数的start命令来取消stop。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23757"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 </pre></td><td id="p2375code7"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >Post-stop  ...... <span style="color: rgb(122, 8, 116); font-weight: bold;"  >exec</span><span style="font-weight: bold;"  >|</span>end script</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　本进程在主进程被杀死之后，作业的stopped事件触发之前执行。通常用来清理相关环境，例如删除临时的目录。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　三、事件(event)</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　事件(event)是指系统状态的一种改变，这种改变会被通知给init进程。init进程可以得到的状态变更信息，几乎系统所有的内部或外部状态变更都可以触发一个事件。比如引导程序会触发启动(startup)事件，系统进入运行级别2会触发运行级别2(runlevel 2)事件，而文件系统加载则会触发路径加载(path-mounted)事件,拔掉或安装一个热插拔或USB设备(如打印机)也会触发一个事件。这些事件会被通知给init进程，然后init进程来决定系统如何处理这些事件。用户还可以通过initctl emit命令来手动触发一个事件。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　你可以用start on列出一些事件，表明发出这些事件时你想要启动这个工作，也可以用stop on来指明发出某些事件时你想要停止这个工作。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　事件定义格式如下：</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23758"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 4 5 </pre></td><td id="p2375code8"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(102, 102, 102); font-style: italic;"  >#定义能导致作业自动启动的事件集。KEY和VALUE指定环境变量及其值</span> start on Event<span style="color: rgb(122, 8, 116); font-weight: bold;"  >[</span><span style="color: rgb(122, 8, 116); font-weight: bold;"  >[</span><span style="color: rgb(0, 120, 0);"  >KEY</span>=<span style="color: rgb(122, 8, 116); font-weight: bold;"  >]</span> Value … and<span style="font-weight: bold;"  >|</span> or …<span style="color: rgb(122, 8, 116); font-weight: bold;"  >]</span> &nbsp; <span style="color: rgb(102, 102, 102); font-style: italic;"  >#定义导致作业自动停止的事件集。</span> stop on Event<span style="color: rgb(122, 8, 116); font-weight: bold;"  >[</span><span style="color: rgb(122, 8, 116); font-weight: bold;"  >[</span><span style="color: rgb(0, 120, 0);"  >KEY</span>=<span style="color: rgb(122, 8, 116); font-weight: bold;"  >]</span> Value … and<span style="font-weight: bold;"  >|</span> or …<span style="color: rgb(122, 8, 116); font-weight: bold;"  >]</span></pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　事件定义示例：</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p23759"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 </pre></td><td id="p2375code9"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >start on started gdm or started kdm start on device-added <span style="color: rgb(0, 120, 0);"  >SUBSYSTEM</span>=tty <span style="color: rgb(0, 120, 0);"  >DEVPATH</span>=ttyS<span style="font-weight: bold;"  >*</span> start on net-device-added INTERFACE<span style="font-weight: bold;"  >!</span>=lo</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　用户也可以自己定义一个事件，并让一个作业被这个事件触发。如下的myjob作业定义文件定义了一个被hithere事件触发的作业：</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p237510"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 4 5 6 7 </pre></td><td id="p2375code10"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(102, 102, 102); font-style: italic;"  >#cat /etc/init/myjob.conf</span> &nbsp; start on hithere script <span style="color: rgb(122, 8, 116); font-weight: bold;"  >echo</span> “Hi there, here I am<span style="font-weight: bold;"  >!</span>” <span style="font-weight: bold;"  >&gt;</span> <span style="font-weight: bold;"  >/</span>tmp<span style="font-weight: bold;"  >/</span>myjob.out <span style="color: rgb(194, 12, 185); font-weight: bold;"  >date</span> <span style="font-weight: bold;"  >&gt;&gt;</span> <span style="font-weight: bold;"  >/</span>tmp<span style="font-weight: bold;"  >/</span>myjob.out end script</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　这段代码指定在接收到hithere事件时将触发该作业。然后代码执行指定的操作(将一条消息和日期输出到/tmp/myjob.out 文件)。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　用户也可以使用initctl emit命令手动触发事件来执行这个作业。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p237511"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 </pre></td><td id="p2375code11"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >initctl emit hithere</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Upstart的事件数量是没有限制的，但init守护进程和telinit工具定义了一组常用的标准事件。主要有以下几个：</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　starting: 当作业被调度并开始运行时，由Upstart触发。<br>　　started: 当作业正在运行时被触发。<br>　　stopping: 当作业开始终止时被触发。<br>　　stopped: 当作业已经完成时(成功或失败)被触发。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　当upstart init进程启动时，它会发出startup事件，这将激活实现了System V兼容性的事件和runlevel事件。随着作业的启动和停止，init守护进程将触发starting, started, stopping,stopped事件。另一个核心事件shutdown则是在系统关闭时发出的。其他核心事件包括ctrlaltdel，它说明您按下了Ctrl-Alt-Delete或kbdrequest，它用来说明您按下了Alt-Up(向上箭头)键组合。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Upstart有三种事件类型</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Signal Event</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　非阻塞的即异步的。触发信号型事件会立即返回，调用者继续往下执行。信号型的意思就是广播者并不关心谁会接收它，也不需要等待是否发生某种事情，它只是用来提供信息用作通信。使用带Cno-wait选项的initctl emit命令来创建信号型事件。例如initctl emit Cno-wait mysignal。注意事件触发的非阻塞特性并不会直接影响那些与此事件有关的作业，它只是影响触发者程序，允许其继续执行，而无需等待任何使用这个事件的作业。作业本身的非阻塞特性则会影响作业自己，它使得作业不能被终止或延迟，不能以任何形式持有触发者的操作。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Method Event</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　阻塞的即同步的。它通常与Task job结合使用。方法型事件的行为类似于编程语言中的method或function call，调用者需要等待这个工作的完成。例如initctl emit mymethod，这个方法型事件被同步地触发，调用者需要等待直到initctl命令完成。在mymethod事件上启动的任务可能运行成功，也可能失败，假设有一个作业/etc/init/myapp.conf，如下：</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Hook Event</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　阻塞的即同步的。钩子介于信号和方法之间。它是一种通知，表示系统发生了一些改变。不同于信号，钩子型事件的触发者需要等待作业的完成。因此钩子通常用来标志即将发生的改变一些事情。starting和stopping是钩子型事件，被Upstart触发以表明作业即将启动或即将终止。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　注意事件与状态是有区别的，虽然Upstart内部使用状态(这些状态可以通过initctl status和list命令显示给用户看)，但事件是配置文件指定作业期望行为的一种方式，starting, started, stopping, stopped是事件，不是状态。这些事件在一些特殊的状态转移发生之前触发。例如，starting事件在与此事件相关的作业实际进行运行队列之前被触发。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　四、作业生命周期</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　启动一个作业的流程</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　1)Upstart把作业的目标从stop改成start。正如目标的名字指示的一样，作业(实例)现在尝试启动。目标可以用initctl list和status命令显示。<br>　　2)Upstart触发starting事件，指示作业即将启动。这个事件包括两个环境变量：JOB指定作业名；INSTANCE指定实例名，如果启动单一的实例(没有instance配置节)，则实例名为空。<br>　　3)starting事件完成。<br>　　4)如果pre-start节存在，则产生pre-start进程。如果pre-start失败，Upstart把目标从start改成stop，设置表示失败的变量并触发stopping和stopped事件。<br>　　5)Upstart产生主进程。即运行script或exec配置节，如果没有script或exec配置节，则Upstart什么也不做。<br>　　6)Upstart确定作业的最终PID，可参考expect fork和expect守护r进程。<br>　　7)如果post-start配置节存在，则产生post-start进程。。如果post-start失败，Upstart把目标从start改成stop，设置表示失败的变量并触发stopping和stopped事件。<br>　　8)Upstart触发started事件。这个事件包含与starting同样的环境变量。对Service job，当started事件完成后，主进程即完全地运行起来了。如果是Task job，则任务执行完成(成功或失败)。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　终止一个作业的流程</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　1)Upstart把作业的目标从start改为stop。现在作业(实例)尝试终止。<br>　　2)如果pre-stop配置节存在，则产生pre-stop进程。如果pre-stop失败，Upstart设置表示失败的变量，并触发stopping和stopped事件。<br>　　3)如果作业有script或exec配置节，则终止主进程，首先向主进程发送SIGTERM信号，然后Upstart等待kill timeout秒数(默认为5秒)，如果进程仍然在运行，则向进程发送SIGKILL信号，因为进程不能选择忽略此信号，因此能保证进程被终止。<br>　　4)Upstart触发stopping事件。这个事件有一系列的相关环境变量，包括：<br>　　JOB: 与本事件关联的作业名。<br>　　INSTANCE: 实例名。<br>　　RESULT: “ok”表示作业正常退出，”failed”表示作业失败，注意退出结果的显示可以用normal exit配置节修改。<br>　　PROCESS: 导致作业失败的配置节名称。如果RESULT=ok，则本变量不会被设置。如果设置了，可能值有pre-start, post-start, main(表示script或exec配置节), pre-stop, post-stop, respawn(表示作业产生次数超过了respawn limit配置节设置的限制)。<br>　　EXIT_STATUS或EXIT_SIGNAL: 如果作业自己退出则设置EXIT_STATUS，如果由于接收到信号退出则设置EXIT_SIGNAL。如果两个变量都没有设置，则进程在产生的过程中出现了问题(例如指定要运行的命令没有找到)。<br>　　5)如果post-stop配置节存在，则生成post-stop进程。如果post-start失败，Upstart设置表示失败的变量并触发stopped事件。<br>　　6)Upstart触发stopped事件。当stopped事件完成后，作业即完全终止。stopped事件与stopping事件有相同的环境变量集。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　五、initctl(init daemon control tool)</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　initctl是一个具有root权限的管理员可以使用init进程管理控制工具，可以通过这个工具和Upstart init daemon进行通信。initctl可以用来启动或终止作业、列表作业、以及获取作业的状态、发出事件、重启init 进程等等。比如initctl list让您可以通过标识作业状态来深入了解系统操作，它告诉您目前正在等待哪些服务以及哪些服务目前是活动的。initctl工具还可以显示用于调试而接收的事件。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　initctl基本用法　</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p237512"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 </pre></td><td id="p2375code12"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  >initctl <span style="color: rgb(122, 8, 116); font-weight: bold;"  >help</span> 作业 commands:   start                       Start job.   stop                        Stop job.   restart                     Restart job.   reload                      Send HUP signal to job.   status                      Query status of job.   list                        List known jobs. &nbsp; 事件 commands:   emit                        Emit an event. &nbsp; Other commands:   reload-configuration        Reload the configuration of the init daemon.   version                     Request the version of the init daemon.   log-priority                Change the minimum priority of log messages from the init daemon   <span style="color: rgb(122, 8, 116); font-weight: bold;"  >help</span>                        display list of commands</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　initctl使用示例</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　通过initctl手动启动、停止、重启MySQL服务</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p237513"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 4 5 6 </pre></td><td id="p2375code13"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(102, 102, 102); font-style: italic;"  >#启动MySQL服务</span> initctl start mysql <span style="color: rgb(102, 102, 102); font-style: italic;"  >#停止MySQL服务</span> initctl stop mysql <span style="color: rgb(102, 102, 102); font-style: italic;"  >#重启MySQL服务</span> initctl restart mysql</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　更简单的方法：</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p237514"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 4 5 6 </pre></td><td id="p2375code14"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(102, 102, 102); font-style: italic;"  >#启动MySQL服务</span> start mysql <span style="color: rgb(102, 102, 102); font-style: italic;"  >#停止MySQL服务</span> stop mysql <span style="color: rgb(102, 102, 102); font-style: italic;"  >#重启MySQL服务</span> restart mysql</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　start、stop和restart工具都是initctl的软链接，会直接运行initctl工具中的对应命令。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　采用Upstart做启动管理的系统，服务的启动均依赖于/etc/init/下的每个服务对应的配置文件，通过修改这配置文件，可以更改服务的运行级别。所以即使你将rcX.d下的文件删除，也都不会影响系统的启动。</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 1205px;"  ><tbody><tr id="p237515"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 4 5 6 7 8 </pre></td><td id="p2375code15"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(194, 12, 185); font-weight: bold;"  >ls</span> <span style="font-weight: bold;"  >/</span>etc<span style="font-weight: bold;"  >/</span>init<span style="font-weight: bold;"  >/</span> &nbsp; apport.conf              failsafe-x.conf    module-init-tools.conf  mounted-tmp.conf                 nmbd.conf             rc.conf              ssh.conf   tty6.conf         upstart-udev-bridge.conf atd.conf                 hostname.conf      mountall.conf           mounted-varrun.conf              plymouth.conf         rcS.conf             tty1.conf  udev.conf         ureadahead.conf console-setup.conf       hwclock.conf       mountall-net.conf       mysql.conf                       plymouth-log.conf     rc-sysinit.conf      tty2.conf  udev-finish.conf  ureadahead-other.conf control-alt-delete.conf  hwclock-save.conf  mountall-reboot.conf    networking.conf                  plymouth-splash.conf  rsyslog.conf         tty3.conf  udevmonitor.conf cron.conf                irqbalance.conf    mountall-shell.conf     network-interface.conf           plymouth-stop.conf    screen-cleanup.conf  tty4.conf  udevtrigger.conf dmesg.conf               mikejobs.conf      mounted-dev.conf        network-interface-security.conf  procps.conf           smbd.conf            tty5.conf  ufw.conf</pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　以Ubuntu下MySQL服务为例，我们先看看基于UpStart的系统下/etc/init.d/mysql脚本详细信息</p><div style="width: 940px; margin-top: 0.5em; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-left-color: silver; border-image: initial; height: 22px; border-bottom-width: 0px; border-bottom-style: initial; border-bottom-color: initial; font-weight: bold; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(243, 248, 215); overflow-x: hidden; overflow-y: hidden; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-position: 100% 5px; background-repeat: no-repeat no-repeat;"  ><span style="float: right; text-align: right; padding-right: 5px; margin-right: 20px;"  ><sup><a title="WP-CodeBox HowTo?" style="color: rgb(0, 119, 136); text-decoration: none; font-size: 14px !important; font-weight: normal !important; line-height: normal !important; " target="_blank" rel="nofollow" href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples"  ><span style="color: rgb(153, 204, 0);"  >?</span></a></sup></span><span style="float: left; font-family: tahoma, arial, verdana; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 20px; margin-left: 5px; font-size: 14px; line-height: 18px; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0% 50%; background-repeat: no-repeat no-repeat;"  ><a style="color: rgb(0, 119, 136); text-decoration: none; " rel="nofollow" href="http://www.mike.org.cn/articles/understand-upstart/"  >View Code</a>&nbsp;BASH</span><div style="clear: both;"  ></div></div><div style="color: rgb(17, 0, 0); width: 940px; background-color: rgb(249, 249, 249); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: silver; border-left-color: silver; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0.5em; margin-left: 0px; overflow-x: auto; overflow-y: auto; font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto;"  ><table style="border-collapse: collapse; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; width: 940px;"  ><tbody><tr id="p237516"  ><td style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px; text-align: right; background-color: rgb(221, 238, 255); color: rgb(102, 102, 102); overflow-x: visible; overflow-y: visible; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(176, 190, 199); table-layout: auto; width: 10px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333;"  >1 2 3 </pre></td><td id="p2375code16"  style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"  ><pre style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; width: auto; float: none; clear: none; overflow-x: visible; overflow-y: visible; font-size: 12px; line-height: 1.333; text-align: left;"  ><span style="color: rgb(194, 12, 185); font-weight: bold;"  >ls</span> <span style="font-weight: bold;"  >/</span>etc<span style="font-weight: bold;"  >/</span>init.d<span style="font-weight: bold;"  >/</span>mysql  <span style="color: rgb(102, 0, 51);"  >-l</span> &nbsp; lrwxrwxrwx 1 root root 21 2011-06-14 21:22 <span style="font-weight: bold;"  >/</span>etc<span style="font-weight: bold;"  >/</span>init.d<span style="font-weight: bold;"  >/</span>mysql -<span style="font-weight: bold;"  >&gt;</span> <span style="font-weight: bold;"  >/</span>lib<span style="font-weight: bold;"  >/</span>init<span style="font-weight: bold;"  >/</span>upstart-job<span style="font-weight: bold;"  >*</span></pre></td></tr></table></div><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　这里和以前基于Sysv init的系统有很大的不同，这里不在是启动MySQL的执行脚本，而是指向/lib/init/upstart-job的一个软链接，而upstart-job这个脚本会调用initctl工具启动对应的服务。所以用传统的System V方式删掉/etc/init.d/mysql或/etc/rcX.d中是不会影响到MySQL的开机启动的。正是这个原因，网上很多文章说sysv-rc-conf、update-rc.d，rcconf三个基于以前Sysv init的启动管理工具不会生效的原因。不过这种现象只针对以Upstart工作配置文件为基础的服务。那些还是以SystemV脚本管理的软件包依然可以用上面三个管理工具进行启动行的管理，必定还有很多软件包还未采用Upstart方式进行管理。目前Ubuntu系统也都还兼容System V方式的脚本。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　六、Ubuntu下常见系统状态下Upstart调用过程</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　系统启动<br>　　我们以Ubuntu为例子，并从Upstart的视角来阐述。在系统引导时，当initramfs文件系统运行起来时(用于设置RAID、解锁加密的文件系统卷等)，将会运行/sbin/init并分配PID为1，这样Upstart接过控制权。在默认运行级别2上的启动流程如下：</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　1)Upstart执行内部的初始化。<br>　　2)Upstart触发一个单一的称为startup的事件，这个事件触发其余的系统初始化过程。<br>　　3)init运行一些指定了start on startup的作业。这其中最著名的就是mountall作业，用来挂载硬盘和文件系统。<br>　　4)mountall作业依次触发一系列的事件，包括local-filesystems, virtual-filesystems, all-swaps等。当系统设备和挂载点可用时，它运行mountall守护程序来完成挂载硬盘和文件系统的工作。<br>　　5)virtual-filesystems事件引发udev作业启动。它运行uded守护程序来管理系统的设备，并监控设备的改变。<br>　　6)udev作业引发upstart-udev-bridge作业启动。<br>　　7)upstart-udev-bridge作业将会在某个点处触发”net-device-up IFACE=lo”事件，以表示本地网络(例如IPv4的127.0.0.0)可用。<br>　　8)在最终的文件系统挂载之后，mountall将会触发filesystem事件。<br>　　9)由于rc-sysinit作业中有start on filesystem and net-device-up IFACE=lo节，Upstart将会启动rc-sysinit作业。<br>　　10)rc-sysinit作业最后调用telinit命令，格式为telinit “${DEFAULT_RUNLEVEL}”。<br>　　11)telinit命令触发runlevel事件，即执行runlevel RUNLEVEL=2 PREVLEVEL=N。注意这就是telinit所做的全部工作，它自己并不会切换运行级别，而通过runlevel程序实现。<br>　　12)runlevel事件引发很多其他的Upstart作业启动，包括/etc/init/rc.conf，它用来启动遗留的SystemV init系统。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　系统关闭</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　在系统关闭过程中，有一些重要的事实需要知道：</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　1)Upstart决不会关闭自己。Upstart会在系统断电时终止，如果它之前终止过，说明是一个bug。<br>　　2)Upstart决不会终止没有stop on配置节的作业。<br>　　3)Ubuntu既使用Upstart作业，也使用SysV作业。核心的服务由Upstart处理，一些额外的服务可以在遗留的SystemV模式下运行。这主要是为向后兼容，因此在Ubuntu的Universe和Mutiverse软件库中有大量的软件包，为避免更改每个软件包以使它能在Upstart下工作，Upstart允许使用已经存在的SystemV(还包括Debian兼容的)脚本。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　关闭系统需要先执行关机动作，例如在图形用户界面中单击”Shut Down…”，运行命令shutdown -h now等。关机的流程如下：</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　1)假设当前运行级别为2，关机动作将会使Upstart触发runlevel事件，即runlevel RUNLEVEL=0 PREVLEVEL=2。<br>　　2)作业/etc/init/rc.conf将被运行。这个作业调用/etc/init.d/rc，并传递新的运行级别(“0“)。<br>　　3)SystemV系统调用/etc/rc0.d/中必要的脚本(都是指向/etc/init.d/中脚本的链接)，来终止SystemV服务。<br>　　4)其中有一个/etc/init.d/sendsigs脚本，这个脚本中有个do_stop()函数，它负责杀死所有没有被终止的进程(包括Upstart进程)。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　系统重启</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　先要执行重启动作，例如在图形界面中单击”Restart…”，运行shutdown -r now或reboot。重启的流程如下：</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　1)假设当前运行级别为2，重启动作将会使Upstart触发runlevel事件，即 runlevel RUNLEVEL=6 PREVLEVEL=2。<br>　　2)作业/etc/init/rc.conf将被运行。这个作业调用/etc/init.d/rc，并传递新的运行级别(“6“)。<br>　　3)SystemV系统调用/etc/rc6.d/中必要的脚本(都是指向/etc/init.d/中脚本的链接)，来终止SystemV服务。<br>　　4)其中有一个/etc/init.d/sendsigs脚本，这个脚本中有个do_stop()函数，它负责杀死所有没有被终止的进程(包括Upstart进程)。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　恢复模式</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　Ubuntu提供了恢复模式以应对系统出现问题的情况。这由friendly-recovery软件包来处理。</p><p style="padding-bottom: 10px; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); font-family: Arial, Tahoma; font-size: 12px; line-height: 20px; text-align: -webkit-auto; background-color: rgb(243, 243, 243);"  >　　七、参考文档<br>　　<br>　　http://www.google.com<br>　　http://www.starwd.com/?p=68<br>　　http://zhoujin.com/post/154/<br>　　http://blog.csdn.net/zhoudaxia/article/details/6666914<br>　　http://hi.baidu.com/dillisbest/blog/item/582312c621f544cdd00060a3.html</p></div></div>
        <div class="nbw-blog-end"></div>

        <div>
		</div>

        <div>
		</div>

		<div>
      	  <div >
		  	<script type="text/javascript" id="wumiiRelatedItems"></script>
		  </div>
		</div>

        <div class="ptc phide ztag">
          <span class="ptcp">
            <span class="iblock bcmimg">&nbsp;</span>
            <span class="nbc-0 nbc-0-40 ptcmt ptcmt-2">评论这张</span>
          </span>
        </div>
		<div style="display:none" class="ptc phide ztag">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="http://b.bst.126.net/newpage/images/microblog.png?1" />
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>
        <div class="ptc phide">
          <a id="publishtolofter" class="toLofter" title="发布到LOFTER" target="_blank" hidefocus="true">&nbsp;</a>
        </div>
        
        <div style="display:none" class="ptc phide ztag">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="http://b.bst.126.net/newpage/images/microblog.png?1" />
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>


        <div class="nbw-act tbar fc03 clearfix">
          
          
          <div style="height:40px;line-height:40px;">
            <div class="pleft">
              <div class="pleft leftoperatebar">
                  <span class="fc07">阅读(<span id="$_spaniReadCount">2036</span>)</span><span class="sep fc07">|</span>
                  <span class="fc07">评论(<span id="$_spaniCommentCount">0</span>)</span>
	          </div>
            </div>
            <div class="pleft rdif">
              <span class="pleft sep sep-last fc07">|</span>
              <span style="display:none" id="$_shareToSites" class="fc07 pleft nas-tofix">分享到：</span><span class="nas-wrap pleft"><span id="$_shareBtn_163weibo" title="分享到网易微博" class="nas-itm nas-itm0">&nbsp;</span><span id="$_shareBtn_sinaweibo" title="分享到新浪微博" class="nas-itm nas-itm6">&nbsp;</span><span id="$_shareBtn_qqweibo" title="分享到腾讯微博" class="nas-itm nas-itm9">&nbsp;</span><span style="display:none" class="nas-itm nas-itm7" title="分享到MSN" id="$_shareBtn_msn">&nbsp;</span><span class="nas-itm nas-itm3" title="分享到QQ空间" id="$_shareBtn_qq">&nbsp;</span><span style="display:none" class="nas-itm nas-itm1" title="分享到人人网" id="$_shareBtn_renren">&nbsp;</span><span style="display:none" class="nas-itm nas-itm2" title="分享到开心网" id="$_shareBtn_kaixin">&nbsp;</span><span class="nas-itm nas-itm4" title="分享到豆瓣" id="$_shareBtn_douban">&nbsp;</span></span></span>
            </div>
            <div class="pright rightoperatebar">
              <span class="f-myLikeIcons likebtn pnt pright" id="$_spanLike">喜欢</span>
	            <span class="f-myLikeIcons recommendbtn pnt pright" id="$_spanRecommend">推荐</span>
	          <span style="display:none" id="$_spanShowRecommend" class="pleft rdct  phide">
	            <span class="pleft ul fc03"><span id="$_spanRecommendCount">0</span>人</span><span class="pleft iblock icn0 icn0-722 nbw-tgl1 nas-icn0fix">&nbsp;</span><span class="pleft iblock icn0 icn0-621 nbw-tgl0 nas-icn0fix">&nbsp;</span><span class="fc07"></span>|&nbsp;
	          </span>
                <span class="f-myLikeIcons reblogbtn pnt pright" id="$_spanCite">转载</span>
            </div>
          </div>
        </div>
      </div>
      <div class="snl">
        <div style="display:none" class="phide bdwb bds2 bdc0 rdcnt" id="$_divRecommendContent"></div>
        <div id="yodaoad" class="bdwb bds2 bdc0" style="display:none;_zoom:1;">&nbsp;</div>
        <div id="$_newOldBlogLinkBottomDiv" class='top fc03 clearfix'>
	     </div>
	    <div class="relateblog phide">
          <h4 class="bdwb bds2 bdc0 fc07 fs0">历史上的今天</h4>
          <div class="cnt ztag clearfix"></div>
        </div>
	    <div class="author">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">最近读者</h4>
	      <div class="cnt ztag clearfix"></div>
	    </div>
	    <div id="hotarea" class="hotarea author ">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">热度</h4>
	      <div id="hotlist" class="cnt clearfix"></div>
	    </div>
	    <div class="phide" id="yodaoad_1" style="_zoom:1;"></div>
	    <div id="loftertextlinkad" style="display:none;padding:0 6px 0 5px;">
	      <div style="height:40px;line-height:40px;margin:15px 0 15px 0;border:1px solid #d5d5d5;background:#ffffe1;text-align:left;">
	        <span style="float:right;height:20px;line-height:20px;padding:10px 16px 10px 0;color:#d7854e;cursor:pointer;">关闭</span>
	        <div style="padding-left:24px;color:#000;">LOFTER：随时随地分享心情、图片、视频的博客APP。&nbsp;<a style="color:#d7854e;text-decoration:none;" href="http://www.lofter.com/app?act=qbappentry_20140328_01" target="_blank">马上下载&gt;</a></div>
	      </div>
	    </div>
	    <div class="comment">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">评论</h4>
	      <a name="blogComment" id="blogComment"></a>
	      <div class="ztag"></div>
	    </div>
	    <div class="phide" id="yodaoad_3" style="_zoom:1;"></div>
      </div>
      <div class="cite ztag fc03"></div>
    </div>
   </div>
  </div>
</div>
<div class="phide nb-init">
  <textarea name="js">
    this.p={  m:2,
              b:2,
              id:'fks_087066084081084070083095082074072087081067083080094074085082',
              blogTitle:'upstart 分析',
              blogAbstract:'<h2 style=\"margin-top: 10px; margin-right: -10px; margin-bottom: 3px; margin-left: -10px; padding-top: 0px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; font-size: 17px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(244, 245, 247); color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif;\"  \>前言</h2\><p style=\"margin-top: 0px; margin-bottom: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑, Helvetica, Times, Arial, serif; font-size: 15px; line-height: 22px;\"  \>众所周知，/sbin/init 是linux内核启动后运行的首个用户进程，早期的init程序由sysvinit包提供。 SysVinit软件包包含了一组控制系统最基本函数的进程，它包含了系统初始化程序init，init 是系统启动时被kernel最先启动的进程，它控制着其它所有进程的启动、运行以及停止。Sysvinit 中的init daemon 是一个基于运行级别的初始化程序，它使用了运行级别（如单用户、多用户等）并通过从 /etc/rc?.d</p\>',
              blogTag:'',
              blogUrl:'blog/static/10076891420123364928269',
              isPublished:1,
              istop:false,
              type:2,
              modifyTime:1333451232238,
              publishTime:1333450168269,
              permalink:'blog/static/10076891420123364928269',
              commentCount:0,
              mainCommentCount:0,
              recommendCount:0,
              bsrk:-100,
              publisherId:0,
              recomBlogHome:false,
              currentRecomBlog:false,
              attachmentsFileIds:[],
              vote:{},
              groupInfo:{},
              friendstatus:'none',
              followstatus:'unFollow',
              pubSucc:'',
              visitorProvince:'',
              visitorCity:'',
              visitorNewUser:false,
              postAddInfo:{},
              mset:'000',
              mcon:'',
              srk:-100,
              remindgoodnightblog:false,
              isBlackVisitor:false,
              isShowYodaoAd:false,
              hostIntro:'',
              hmcon:'1',
              selfRecomBlogCount:'0',
              lofter_single:'<iframe width="140" height="560" style="overflow:hidden;" src="http://www.lofter.com/mailEntry.do?blogad=1&blog" frameBorder="0"></iframe>'
            }
  </textarea>
  <textarea name="jst" id="m-3-jst-1">
    {list a as x}
    {if !!x}
    <div class="iblock nbw-fce nbw-f40">
      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.visitorName}/">
      {if x.visitorName==visitor.userName}
      <img alt="${x.visitorNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.visitorName)}&r=${visitor.imageUpdateTime}"/>
      {else}
      <img alt="${x.visitorNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.visitorName)}"/>
      {/if}
      </a>
      <div class="cwd vname thide">
        {if x.moveFrom=='wap'}
          <a class="noul pnt" target="_blank" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome"><span title="来自网易手机博客" class="iblock wapIcon">&nbsp;</span></a>
        {elseif x.moveFrom=='iphone'}
          <a class="noul pnt" target="_blank"><span title="来自iPhone客户端" class="iblock iphoneIcon">&nbsp;</span></a>
        {elseif x.moveFrom=='android'}
          <a class="noul pnt" target="_blank"><span title="来自Android客户端" class="iblock androidIcon">&nbsp;</span></a>
        {elseif x.moveFrom=='mobile'}
          <a class="noul pnt" target="_blank" href="http://blog.163.com/services/emsblog.html?frompersonalbloghome"><span title="来自网易短信写博" class="iblock wapIcon">&nbsp;</span></a>
        {/if}
        <a class="fc03 m2a"  target="_blank" hidefocus="true" href="http://blog.163.com/${x.visitorName}/">
          ${fn(x.visitorNickname,8)|escape}
        </a>
      </div>
    </div>
    {/if}
    {/list}
  </textarea>
  <textarea name="jst" id="m-3-jst-2">
    {if !!a}
    <a target="_blank" href="http://blog.163.com/${a.userName}/"><img class="bdwa bdc0 pnt" onerror="this.src=location.f60" src="${fn1(a.userName)}"/></a>
    <a target="_blank" class="fc03 m2a" href="http://blog.163.com/${a.userName}/">${fn(a.nickname,8)|escape}</a>
    <div class="intro fc05">${a.selfIntro|escape}{if great260}${suplement}{/if}</div>
	    <div class="acts ztag"></div>
	  <div class="mbga phide xtag">
        <div class="mbgai">&nbsp;</div>
        <a class="fc03 xtag m2a" href="#" target="_blank"></a>
      </div>
    {/if}
  </textarea>
  <#--最新日志，群博日志-->
  <textarea name="jst" id="m-3-jst-3">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="${furl()}${x.permalink}/?latestBlog">${fn(x.title,26)|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--推荐日志-->
  <textarea name="jst" id="m-3-jst-4">
    <p class="fc06">推荐过这篇日志的人：</p>
    <div>
      {list a as x}
      {if !!x}
      <div class="iblock nbw-fce nbw-f40">
        <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.recommenderName}/">
        <img alt="${x.recommenderNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.recommenderName)}"/>
        </a>
        <div class="cwd thide">
          <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/${x.recommenderName}/">
            ${fn(x.recommenderNickname,6)|escape}
          </a>
        </div>
      </div>
      {/if}
      {/list}
    </div>
    {if !!b&&b.length>0}
    <p  class="fc06">他们还推荐了：</p>
    <ul>
    {list b as y}
      {if !!y}
        <li class="rrb"><span class="iblock">&#183;</span><a class="fc03 m2a" target="_blank" href="http://blog.163.com/${y.recommendBlogPermalink}/?from=blog/static/10076891420123364928269">${y.recommendBlogTitle|escape}</a></li>
      {/if}
    {/list}
    </ul>
    {/if}
  </textarea>
  <#--引用记录-->
  <textarea name="jst" id="m-3-jst-5">
    <span class="pleft fc07">转载记录：</span>
    <ul class="tbac">
    {list d as x}
      <li class="clearfix">
        <span class="pleft iblock">&#183;</span>
        <div class="tbl thide pleft"><span><a target="_blank" class="fc07 m2a" href="${x.referBlogUrl}">${x.referBlogTitle|escape}</a></span></div>
        <div class="tbr pleft"><span><a target="_blank" class="fc07 m2a" href="${x.referHomePage}">${x.referUserName|escape}</a></span></div>
      </li>
    {/list}
    </ul>
  </textarea>
  <#--博主推荐-->
  <textarea name="jst" id="m-3-jst-6">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/${x.userName}/${x.permalink}/?recommendBlog" title="${x.title|default:""|escape}">${x.title|default:""|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--随机阅读-->
  <textarea name="jst" id="m-3-jst-7">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/${x.userName}/${x.permalink}/?personalRecomBlog" title="${x.title|default:""|escape}">${x.title|default:""|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--首页推荐-->
  <textarea name="jst" id="m-3-jst-8">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" target="_blank" href="${x.blogUrl|default:""|escape}?recommendReader" title="${x.blogTile|default:""|escape}">${x.blogTile|default:""|escape}</a></li>
    {/if}
    {/list}
  </textarea>
  <#--历史上的今天-->
  <textarea name="jst" id="m-3-jst-10">
    <ul>
      {list a as x}
      {if x_index>4}{break}{/if}
      {if !!x}
        <li class="thide fc03">
          <a class="m2a" target="_blank"  href="http://blog.163.com/${x.userName}/${x.permalink|default:""}"  title="${x.title|default:""|escape}">${fn1(x.title,60)|escape}</a><span class="fc07">${fn2(x.publishTime,'yyyy-MM-dd HH:mm:ss')}</span>
        </li>
      {/if}
      {/list}
    </ul>
  </textarea>
  <#--被推荐日志-->
  <textarea name="jst" id="m-3-jst-11">
    {list a as x}
    {if !!x}
    <li class="thide"><a target="_blank" class="fc03 m2a" href="${furl()}${x.permalink}/">${fn(x.title,26)|escape}</a></li>
    {/if}
    {/list}
  </textarea>
    <#--上一篇，下一篇-->
  <textarea name="jst" id="m-3-jst-12">
     {if !!(blogDetail.preBlogPermalink)}
       <span class="ilft iblock icn0 icn0-620">&nbsp;</span>
       <div class="pleft thide"><a class="m2a"  href="http://zhumeng8337797.blog.163.com/${blogDetail.preBlogPermalink}/">${blogDetail.preBlogTitle|escape}</a></div>
     {/if}
     {if !!(blogDetail.nextBlogPermalink)}
       <span class="irgt iblock icn0 icn0-619">&nbsp;</span>
       <div class="pright thide"><a class="m2a" href="http://zhumeng8337797.blog.163.com/${blogDetail.nextBlogPermalink}/">${blogDetail.nextBlogTitle|escape}</a></div>
     {/if}
  </textarea>
  <#-- 热度 -->
  <textarea name="jst" id="m-3-jst-13">
    {list a as x}
    {if !!x}
    <div class="hotItem iblock nbw-fce nbw-f40">
      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.publisherUsername}/">
      {if x.publisherUsername==visitor.userName}
      <img alt="${x.publisherNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.publisherUsername)}&r=${visitor.imageUpdateTime}"/>
      {else}
      <img alt="${x.publisherNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.publisherUsername)}"/>
      {/if}
      </a>
      <div class="cwd vname thide">
        <a class="fc03 m2a"  target="_blank" hidefocus="true" href="http://blog.163.com/${x.publisherUsername}/">
          ${fn(x.publisherNickname,8)|escape}
        </a>
      </div>
      <a class="f-myLikeIcons hottype {if x.type==1} js-liketype{elseif x.type==2} js-reblogtype{elseif x.type==3} js-sharetype{else}{/if}" target="_blank" hidefocus="true" href="http://blog.163.com/${x.publisherUsername}/">&nbsp;</a>
    </div>
    {/if}
    {/list}
  </textarea>
  <#--右边模块结构-->
  <textarea name="txt" id="m-3-txt-0">
    <div class="uinfo ztag"></div>
    <h4 class="fc07 fs0 ltt phide ztag">被推荐日志</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">最新日志</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">该作者的其他文章</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">博主推荐</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">随机阅读</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">首页推荐</h4>
    <ul class="ztag blst"></ul>
    <div class="more"><a target="_blank" class="fc03 m2a" href="http://blog.163.com">更多&gt;&gt;</a></div>
    <br/><br/>
    <div id="yodaoad_r" style="display:none;_zoom:1;"></div>
    <div id="lofter_single"></div>
  </textarea>
  <#--评论模块结构-->
  <textarea name="txt" id="m-3-txt-1">
    <div class="publish ztag"></div>
    <div class="bdwt bds2 bdc0 phide" id="yodaoad_2" style="_zoom:1;"></div>
    <div class="ztag bdwt bds2 bdc0">
      <div class="case"></div>
      <div class="clearfix"></div>
    </div>
  </textarea>
  <#--引用模块结构-->
  <textarea name="jst" id="m-3-txt-2">
     <div class="close">
       <span class="ztag iblock icn0 icn0-57">&nbsp;</span>
     </div>
	 <div class="ztag phide"></div>
  </textarea>
    <#--博主发起的投票-->
  <textarea name="jst" id="m-3-txt-3">
    {list a as x}
    {if !!x}
      <li>
      <a href="http://blog.163.com/${x.userName}/" target="_blank" class="m2a fc03">${x.nickName|escape}</a>&nbsp;&nbsp;投票给
        {var first_option = true;}
        {list x.voteDetailList as voteToOption}
            {if voteToOption==1}
              {if first_option==false},{/if}&nbsp;&nbsp;“${b[voteToOption_index]}”&nbsp;&nbsp;
            {/if}
        {/list}
        {if (x.role!="-1") },“我是${c[x.role]}”&nbsp;&nbsp;{/if}
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="fc07">&nbsp;&nbsp;&nbsp;&nbsp;${fn1(x.voteTime)}</span>
        {if x.userName==''}{/if}
    {/if}
    {/list}
  </textarea>
</div>

<script type="text/javascript">
var wumiiPermaLink = "http://blog.163.com/zhumeng8337797/blog/static/10076891420123364928269/"; //文章的永久链接，作为文章的唯一标识
var wumiiTags = ""; //文章标签，以英文逗号分隔，如："标签1,标签2"
var wumiiSitePrefix = "http://blog.163.com/zhumeng8337797/"; //博客的主页地址，作为博客的唯一标识
var wumiiParams = "&num=5&mode=3&pf=blog163"; //num为默认显示的相关文章数目，mode为默认的显示模式（1为文字，2为图片，3为自动）
</script>
<script type="text/javascript" src="http://widget.wumii.com/ext/relatedItemsWidget.htm"></script>
</div>
      <div class="l cl h100">&nbsp;</div>
      <div class="r cr h100">&nbsp;</div>
    </div>
    <div class="nb-mb lcr bh space">
      <div class="l bl bh">&nbsp;</div>
      <div class="r br bh">&nbsp;</div>
      <div class="c bc bh lcr">&nbsp;</div>
    </div>
  </div>

</div>
      <div class="l wl g lg h100">&nbsp;</div>
      <div class="l wl t lt">&nbsp;</div>
      <div class="l wl b lb">&nbsp;</div>
      <div class="r wr g rg h100">&nbsp;</div>
      <div class="r wr t rt">&nbsp;</div>
      <div class="r wr b rb">&nbsp;</div>
    </div>
  </div>
  <div class="nb-are nb-smb"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
<div class="nb-are nb-fot">
  <div class="wkg h">
    <h2>页脚</h2>
    <div class="k">      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/index_gb.html">公司简介</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://gb.corp.163.com/gb/contactus.html">联系方法</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/job/job.html">招聘信息</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://help.163.com/?b13abk1">客户服务</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/legal/legal.html">隐私政策</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/public/theme/">博客风格</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/services/wapblog.html">手机博客</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/vip.do">VIP博客</a>
      
      <link rel="alternate" type="application/rss+xml" title="RSS" href="http://zhumeng8337797.blog.163.com/rss/"/>
      <span class="p fc10">-</span><span class="fc08" id="$_foot_subscribe"><span class="iblock m2a icn0 icn0-919">&nbsp;</span><a class="m2a fc08">订阅此博客</a></span>
    </div>
    <p class="fc08">网易公司版权所有&nbsp;&copy;1997-2014</p>
  </div>
</div></div>
    <!--[if lte IE 6]></div><![endif]-->
  <!--[if lte IE 6]></div><![endif]-->
  <div class="nb-layer" id="blog-163-com-layer"></div>
  <div class="nb-tpl nb-init phide" id="blog-163-com-template" style="display:none;">  <textarea rows="1" cols="1" name="jst" id="nb-jst-a1">  <a rel="nofollow" class="pr" target="_blank" href="http://help.163.com/special/007525FT/blog.html?b13aze1">帮助</a>
  <span class="fr iblock space icn1 icn1-4">&nbsp;</span>
  <a class="pr" target="_blank" href="http://blog.163.com/activation.do?host=activation&&username=${u}">${u}</a>
</textarea>
  <textarea rows="1" cols="1" name="jst" id="nb-jst-d0">      {list wl as x}
        <div class="grp">${x.g}</div>
        {list x.l as y}
        <a class="itm noul" href="#" hidefocus="true" name="{if typeof(y.v)=='string'}${y.v}{else}${y_index}{/if}">${y.n}</a>
        {/list}
      {/list}
</textarea>
  <textarea rows="1" cols="1" name="jst" id="nb-jst-d1">	{if defined('wl')}
        {list wl as x}<a class="itm noul" href="#" hidefocus="true" name="${x.v}">${x.n}</a>{/list}
    {/if}
</textarea>
</div>
<script type="text/javascript">
  window.N = {tm:{'zbtn':'nbtn',
                  'bdc0':'bdc0','bdc2':'bdc1',
				  'bgc0':'bgc0','bgc1':'bgc1','bgc2':'bgc2','bgh0':'bgc9',
				  'fc00':'fc03','fc01':'fc04','fc02':'fc05','fc03':'fc06','fc04':'fc07','fc05':'fc09'}};
  Date.servTime = '04/29/2014 16:50:31';
  location.api = 'http://api.blog.163.com/';
  location.msg = 'http://api.blog.163.com/msg/dwr';
  location.dwr = 'http://api.blog.163.com/zhumeng8337797/dwr';
  location.vcd = 'http://api.blog.163.com/cap/captcha.jpgx?parentId=100768914&r=';
  location.mrt = 'http://b.bst.126.net/newpage/style/mbox/';
  location.fce = 'http://os.blog.163.com/common/ava.s?host=';
  location.fce2= 'http://os.blog.163.com/common/ava.s?host=';
  location.passportfce = 'http://os.blog.163.com/common/ava.s?passport=';
  location.fpr = 'http://b.bst.126.net/common/portrait/face/preview/';
  location.f60 = 'http://b.bst.126.net/common/face60.png';
  location.f140= 'http://b.bst.126.net/common/face140.png';
  location.f40 = location.f140;
  location.adf140= 'http://b.bst.126.net/common/admireface140.png';
  location.ept = 'http://b.bst.126.net/common/empty.png';
  location.guide_profile_add= 'http://b.bst.126.net/common/guide_profile_add.gif';
  location.phtoto_dream = 'http://photo.dream.163.com/blog/writeBlogCallback.do';
  window.CF = {
    ca:false
   ,cb:''
   ,cc:false
   ,cd:false
   ,ce:'-3'
   ,ck:0
   ,ci:['api.blog.163.com'
       ,'http://photo.163.com/photo/html/crossdomain.html?t=20100205'
        
        ,'ud.blog.163.com'
        
        
        
        ]
   ,cj:[-3]
   ,cl:''
   ,cm:["","blog/","album/","music/","collection/","friends/","profile/","pprank/"]
   ,cf:0
   ,co:{pv:false
       ,ti:4191
       ,tn:''
       ,tc:0
       ,tl:3
       ,ut:0
       ,un:''
       ,um:''
       ,ui:0
       ,ud:false}
   ,cp:{nr:0
       ,cr:0
       ,vr:-100
       ,fr:0}
   ,cs:0
   ,ct:{'nav':['首页','日志','相册','音乐','收藏','博友','关于我'],'enabled':[0,1,6],'defaultnav':parseInt('1111111',2)}
   ,cu:false
   ,cv:false
   ,cw:false
  };
  window.UD = {};
  UD.host = {
      userId:100768914
     ,userName:'zhumeng8337797'
     ,nickName:'zhuzhu'
     ,imageUpdateTime:1258611355649
     ,baseUrl:'http://zhumeng8337797.blog.163.com/'
     ,gender:'他'
     ,email:'zhumeng8337797@163.com'
     ,photo163Name:'zhumeng8337797'
     ,photo163HostName:'zhumeng8337797'
     ,TOKEN_HTMLMODULE:''
     ,isMultiUserBlog:false
     ,isWumiUser:true
     ,sRank:-100
  };
</script>
    <script type="text/javascript" src="http://b1.bst.126.net/newpage/r/j/pc.js?v=1397025761787"></script>
    <script type="text/javascript" src="http://b1.bst.126.net/newpage/r/j/m/m-3/pm.js?v=1397025761787"></script>
  <script src="http://analytics.163.com/ntes.js" type="text/javascript"></script>
  <script type="text/javascript">
    _ntes_nacc='blog';neteaseTracker();
    
    new Image().src = 'http://blog.163.com/newpage/images/analyse.png?s=p&t='+new Date().getTime();
  </script>

<script type="text/javascript">
    window.setTimeout(function(){
			J.loadScript('http://music.ph.126.net/ph.js?001');
			
			J.postDataByDWR(location.dwr,'MusicBeanNew','setCopyrightMusicSessionToken',false);
	},1000);
</script>

    <script type="text/javascript" src="/newpage/prettycode/prettify.js"></script>
</body>
</html>
